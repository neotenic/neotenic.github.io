protobowl_app_build = 'Thu Sep 03 2020 23:48:30 GMT-0700 (Pacific Daylight Time)';

function C(e){"\n"==e[e.length-1]&&(e=e.substring(0,e.length-1))}!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.io=t():e.io=t()}(this,function(){return function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){function n(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var o,n=i(e),r=n.source,l=n.id,c=n.path,h=u[l]&&c in u[l].nsps,d=t.forceNew||t["force new connection"]||!1===t.multiplex||h;return d?(s("ignoring socket cache for %s",r),o=a(r,t)):(u[l]||(s("new io instance for %s",r),u[l]=a(r,t)),o=u[l]),n.query&&!t.query&&(t.query=n.query),o.socket(n.path,t)}var i=o(1),r=o(7),a=o(15),s=o(3)("socket.io-client");e.exports=t=n;var u=t.managers={};t.protocol=r.protocol,t.connect=n,t.Manager=o(15),t.Socket=o(39)},function(e,t,o){function n(e,t){var o=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(r("protocol-less url %s",e),e="undefined"!=typeof t?t.protocol+"//"+e:"https://"+e),r("parse %s",e),o=i(e)),o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443")),o.path=o.path||"/";var n=-1!==o.host.indexOf(":"),a=n?"["+o.host+"]":o.host;return o.id=o.protocol+"://"+a+":"+o.port,o.href=o.protocol+"://"+a+(t&&t.port===o.port?"":":"+o.port),o}var i=o(2),r=o(3)("socket.io-client:url");e.exports=n},function(e){var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var n=e,i=e.indexOf("["),r=e.indexOf("]");-1!=i&&-1!=r&&(e=e.substring(0,i)+e.substring(i,r).replace(/:/g,";")+e.substring(r,e.length));for(var a=t.exec(e||""),s={},u=14;u--;)s[o[u]]=a[u]||"";return-1!=i&&-1!=r&&(s.source=n,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},function(e,t,o){!function(n){"use strict";function i(){return"undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs)?!0:"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var o="color: "+this.color;t.splice(1,0,o,"color: inherit");var n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,o)}}function a(){var e;return"object"===("undefined"==typeof console?"undefined":c(console))&&console.log&&(e=console).log.apply(e,arguments)}function s(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(o){}}function u(){var e=void 0;try{e=t.storage.getItem("debug")}catch(o){}return!e&&"undefined"!=typeof n&&"env"in n&&(e=n.env.DEBUG),e}function l(){try{return localStorage}catch(e){}}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.log=a,t.formatArgs=r,t.save=s,t.load=u,t.useColors=i,t.storage=l(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=o(5)(t);var h=e.exports.formatters;h.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}.call(t,o(4))},function(e){function t(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function n(e){if(l===setTimeout)return setTimeout(e,0);if((l===t||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(o){try{return l.call(null,e,0)}catch(o){return l.call(this,e,0)}}}function i(e){if(c===clearTimeout)return clearTimeout(e);if((c===o||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function r(){p&&d&&(p=!1,d.length?f=d.concat(f):m=-1,f.length&&a())}function a(){if(!p){var e=n(r);p=!0;for(var t=f.length;t;){for(d=f,f=[];++m<t;)d&&d[m].run();m=-1,t=f.length}d=null,p=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var l,c,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:t}catch(e){l=t}try{c="function"==typeof clearTimeout?clearTimeout:o}catch(e){c=o}}();var d,f=[],p=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)t[o-1]=arguments[o];f.push(new s(e,t)),1!==f.length||p||n(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=u,h.addListener=u,h.once=u,h.off=u,h.removeListener=u,h.removeAllListeners=u,h.emit=u,h.prependListener=u,h.prependOnceListener=u,h.listeners=function(){return[]},h.binding=function(){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,o){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function i(e){function t(e){for(var t=0,o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t|=0;return i.colors[Math.abs(t)%i.colors.length]}function i(e){function o(){for(var e=arguments.length,t=Array(e),r=0;e>r;r++)t[r]=arguments[r];if(o.enabled){var a=o,s=Number(new Date),u=s-(n||s);a.diff=u,a.prev=n,a.curr=s,n=s,t[0]=i.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var l=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,function(e,o){if("%%"===e)return e;l++;var n=i.formatters[o];if("function"==typeof n){var r=t[l];e=n.call(a,r),t.splice(l,1),l--}return e}),i.formatArgs.call(a,t);var c=a.log||i.log;c.apply(a,t)}}var n=void 0;return o.namespace=e,o.enabled=i.enabled(e),o.useColors=i.useColors(),o.color=t(e),o.destroy=r,o.extend=a,"function"==typeof i.init&&i.init(o),i.instances.push(o),o}function r(){var e=i.instances.indexOf(this);return-1!==e?(i.instances.splice(e,1),!0):!1}function a(e,t){var o=i(this.namespace+("undefined"==typeof t?":":t)+e);return o.log=this.log,o}function s(e){i.save(e),i.names=[],i.skips=[];var t=void 0,o=("string"==typeof e?e:"").split(/[\s,]+/),n=o.length;for(t=0;n>t;t++)o[t]&&(e=o[t].replace(/\*/g,".*?"),"-"===e[0]?i.skips.push(new RegExp("^"+e.substr(1)+"$")):i.names.push(new RegExp("^"+e+"$")));for(t=0;t<i.instances.length;t++){var r=i.instances[t];r.enabled=i.enabled(r.namespace)}}function u(){var e=[].concat(n(i.names.map(c)),n(i.skips.map(c).map(function(e){return"-"+e}))).join(",");return i.enable(""),e}function l(e){if("*"===e[e.length-1])return!0;var t=void 0,o=void 0;for(t=0,o=i.skips.length;o>t;t++)if(i.skips[t].test(e))return!1;for(t=0,o=i.names.length;o>t;t++)if(i.names[t].test(e))return!0;return!1}function c(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function h(e){return e instanceof Error?e.stack||e.message:e}return i.debug=i,i.default=i,i.coerce=h,i.disable=u,i.enable=s,i.enabled=l,i.humanize=o(6),Object.keys(e).forEach(function(t){i[t]=e[t]}),i.instances=[],i.names=[],i.skips=[],i.formatters={},i.selectColor=t,i.enable(i.load()),i}e.exports=i},function(e){function t(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return o*c;case"weeks":case"week":case"w":return o*l;case"days":case"day":case"d":return o*u;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*a;case"seconds":case"second":case"secs":case"sec":case"s":return o*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return void 0}}}}function o(e){var t=Math.abs(e);return t>=u?Math.round(e/u)+"d":t>=s?Math.round(e/s)+"h":t>=a?Math.round(e/a)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}function n(e){var t=Math.abs(e);return t>=u?i(e,t,u,"day"):t>=s?i(e,t,s,"hour"):t>=a?i(e,t,a,"minute"):t>=r?i(e,t,r,"second"):e+" ms"}function i(e,t,o,n){var i=t>=1.5*o;return Math.round(e/o)+" "+n+(i?"s":"")}var r=1e3,a=60*r,s=60*a,u=24*s,l=7*u,c=365.25*u;e.exports=function(e,i){i=i||{};var r=typeof e;if("string"===r&&e.length>0)return t(e);if("number"===r&&isFinite(e))return i.long?n(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,o){function n(){}function i(e){var o=""+e.type;if((t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)&&(o+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(o+=e.nsp+","),null!=e.id&&(o+=e.id),null!=e.data){var n=r(e.data);if(n===!1)return y;o+=n}return d("encoded %j as %s",e,o),o}function r(e){try{return JSON.stringify(e)}catch(t){return!1}}function a(e,t){function o(e){var o=p.deconstructPacket(e),n=i(o.packet),r=o.buffers;r.unshift(n),t(r)}p.removeBlobs(e,o)}function s(){this.reconstructor=null}function u(e){var o=0,n={type:Number(e.charAt(0))};if(null==t.types[n.type])return h("unknown packet type "+n.type);if(t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type){for(var i="";"-"!==e.charAt(++o)&&(i+=e.charAt(o),o!=e.length););if(i!=Number(i)||"-"!==e.charAt(o))throw new Error("Illegal attachments");n.attachments=Number(i)}if("/"===e.charAt(o+1))for(n.nsp="";++o;){var r=e.charAt(o);if(","===r)break;if(n.nsp+=r,o===e.length)break}else n.nsp="/";var a=e.charAt(o+1);if(""!==a&&Number(a)==a){for(n.id="";++o;){var r=e.charAt(o);if(null==r||Number(r)!=r){--o;break}if(n.id+=e.charAt(o),o===e.length)break}n.id=Number(n.id)}if(e.charAt(++o)){var s=l(e.substr(o)),u=s!==!1&&(n.type===t.ERROR||m(s));if(!u)return h("invalid payload");n.data=s}return d("decoded %s as %j",e,n),n}function l(e){try{return JSON.parse(e)}catch(t){return!1}}function c(e){this.reconPack=e,this.buffers=[]}function h(e){return{type:t.ERROR,data:"parser error: "+e}}var d=o(8)("socket.io-parser"),f=o(11),p=o(12),m=o(13),g=o(14);t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=n,t.Decoder=s;var y=t.ERROR+'"encode error"';n.prototype.encode=function(e,o){if(d("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)a(e,o);else{var n=i(e);o([n])}},f(s.prototype),s.prototype.add=function(e){var o;if("string"==typeof e)o=u(e),t.BINARY_EVENT===o.type||t.BINARY_ACK===o.type?(this.reconstructor=new c(o),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",o)):this.emit("decoded",o);else{if(!g(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");o=this.reconstructor.takeBinaryData(e),o&&(this.reconstructor=null,this.emit("decoded",o))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},c.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},c.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,o){!function(n){"use strict";function i(){return"undefined"!=typeof window&&window.process&&"renderer"===window.process.type?!0:"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(e){var o=this.useColors;if(e[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+e[0]+(o?"%c ":" ")+"+"+t.humanize(this.diff),o){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,r=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(r=i))}),e.splice(r,0,n)}}function a(){return"object"===("undefined"==typeof console?"undefined":c(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(o){}}function u(){var e;try{e=t.storage.debug}catch(o){}return!e&&"undefined"!=typeof n&&"env"in n&&(e=n.env.DEBUG),e}function l(){try{return window.localStorage}catch(e){}}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t=e.exports=o(9),t.log=a,t.formatArgs=r,t.save=s,t.load=u,t.useColors=i,t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:l(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(u())}.call(t,o(4))},function(e,t,o){"use strict";function n(e){var o,n=0;for(o in e)n=(n<<5)-n+e.charCodeAt(o),n|=0;return t.colors[Math.abs(n)%t.colors.length]}function i(e){function o(){if(o.enabled){var e=o,n=+new Date,r=n-(i||n);e.diff=r,e.prev=i,e.curr=n,i=n;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(o,n){if("%%"===o)return o;u++;var i=t.formatters[n];if("function"==typeof i){var r=a[u];o=i.call(e,r),a.splice(u,1),u--}return o}),t.formatArgs.call(e,a);var l=o.log||t.log||console.log.bind(console);l.apply(e,a)}}var i;return o.namespace=e,o.enabled=t.enabled(e),o.useColors=t.useColors(),o.color=n(e),o.destroy=r,"function"==typeof t.init&&t.init(o),t.instances.push(o),o}function r(){var e=t.instances.indexOf(this);return-1!==e?(t.instances.splice(e,1),!0):!1}function a(e){t.save(e),t.names=[],t.skips=[];var o,n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(o=0;i>o;o++)n[o]&&(e=n[o].replace(/\*/g,".*?"),"-"===e[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(o=0;o<t.instances.length;o++){var r=t.instances[o];r.enabled=t.enabled(r.namespace)}}function s(){t.enable("")}function u(e){if("*"===e[e.length-1])return!0;var o,n;for(o=0,n=t.skips.length;n>o;o++)if(t.skips[o].test(e))return!1;for(o=0,n=t.names.length;n>o;o++)if(t.names[o].test(e))return!0;return!1}function l(e){return e instanceof Error?e.stack||e.message:e}t=e.exports=i.debug=i["default"]=i,t.coerce=l,t.disable=s,t.enable=a,t.enabled=u,t.humanize=o(10),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e){function t(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return o*l;case"days":case"day":case"d":return o*u;case"hours":case"hour":case"hrs":case"hr":case"h":return o*s;case"minutes":case"minute":case"mins":case"min":case"m":return o*a;case"seconds":case"second":case"secs":case"sec":case"s":return o*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return void 0}}}}function o(e){return e>=u?Math.round(e/u)+"d":e>=s?Math.round(e/s)+"h":e>=a?Math.round(e/a)+"m":e>=r?Math.round(e/r)+"s":e+"ms"}function n(e){return i(e,u,"day")||i(e,s,"hour")||i(e,a,"minute")||i(e,r,"second")||e+" ms"}function i(e,t,o){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+o:Math.ceil(e/t)+" "+o+"s"}var r=1e3,a=60*r,s=60*a,u=24*s,l=365.25*u;e.exports=function(e,i){i=i||{};var r=typeof e;if("string"===r&&e.length>0)return t(e);if("number"===r&&isNaN(e)===!1)return i.long?n(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e){function t(e){return e?o(e):void 0}function o(e){for(var o in t.prototype)e[o]=t.prototype[o];return e}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function o(){this.off(e,o),t.apply(this,arguments)}return o.fn=t,this.on(e,o),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var o=this._callbacks["$"+e];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n,i=0;i<o.length;i++)if(n=o[i],n===t||n.fn===t){o.splice(i,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),o=this._callbacks["$"+e];if(o){o=o.slice(0);for(var n=0,i=o.length;i>n;++n)o[n].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,o){function n(e,t){if(!e)return e;if(a(e)){var o={_placeholder:!0,num:t.length};return t.push(e),o}if(r(e)){for(var i=new Array(e.length),s=0;s<e.length;s++)i[s]=n(e[s],t);return i}if("object"==typeof e&&!(e instanceof Date)){var i={};for(var u in e)i[u]=n(e[u],t);return i}return e}function i(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(r(e))for(var o=0;o<e.length;o++)e[o]=i(e[o],t);else if("object"==typeof e)for(var n in e)e[n]=i(e[n],t);return e}var r=o(13),a=o(14),s=Object.prototype.toString,u="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===s.call(Blob),l="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===s.call(File);t.deconstructPacket=function(e){var t=[],o=e.data,i=e;return i.data=n(o,t),i.attachments=t.length,{packet:i,buffers:t}},t.reconstructPacket=function(e,t){return e.data=i(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){function o(e,s,c){if(!e)return e;if(u&&e instanceof Blob||l&&e instanceof File){n++;var h=new FileReader;h.onload=function(){c?c[s]=this.result:i=this.result,--n||t(i)},h.readAsArrayBuffer(e)}else if(r(e))for(var d=0;d<e.length;d++)o(e[d],d,e);else if("object"==typeof e&&!a(e))for(var f in e)o(e[f],f,e)}var n=0,i=e;o(i),n||t(i)}},function(e){var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},function(e){function t(e){return o&&Buffer.isBuffer(e)||n&&(e instanceof ArrayBuffer||i(e))}e.exports=t;var o="function"==typeof Buffer&&"function"==typeof Buffer.isBuffer,n="function"==typeof ArrayBuffer,i=function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}},function(e,t,o){function n(e,t){if(!(this instanceof n))return new n(e,t);e&&"object"==typeof e&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var o=t.parser||s;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this.autoConnect=t.autoConnect!==!1,this.autoConnect&&this.open()}var i=o(16),r=o(39),a=o(11),s=o(7),u=o(41),l=o(42),c=o(3)("socket.io-client:manager"),h=o(38),d=o(43),f=Object.prototype.hasOwnProperty;e.exports=n,n.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var e in this.nsps)f.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},n.prototype.updateSocketIds=function(){for(var e in this.nsps)f.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},n.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},a(n.prototype),n.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},n.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},n.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},n.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},n.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},n.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},n.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},n.prototype.open=n.prototype.connect=function(e){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=i(this.uri,this.opts);var t=this.engine,o=this;this.readyState="opening",this.skipReconnect=!1;var n=u(t,"open",function(){o.onopen(),e&&e()}),r=u(t,"error",function(t){if(c("connect_error"),o.cleanup(),o.readyState="closed",o.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else o.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;c("connect attempt will timeout after %d",a);var s=setTimeout(function(){c("connect attempt timed out after %d",a),n.destroy(),t.close(),t.emit("error","timeout"),o.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(n),this.subs.push(r),this},n.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(u(e,"data",l(this,"ondata"))),this.subs.push(u(e,"ping",l(this,"onping"))),this.subs.push(u(e,"pong",l(this,"onpong"))),this.subs.push(u(e,"error",l(this,"onerror"))),this.subs.push(u(e,"close",l(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",l(this,"ondecoded")))},n.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},n.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},n.prototype.ondata=function(e){this.decoder.add(e)},n.prototype.ondecoded=function(e){this.emit("packet",e)},n.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},n.prototype.socket=function(e,t){function o(){~h(i.connecting,n)||i.connecting.push(n)}var n=this.nsps[e];if(!n){n=new r(this,e,t),this.nsps[e]=n;var i=this;n.on("connecting",o),n.on("connect",function(){n.id=i.generateId(e)}),this.autoConnect&&o()}return n},n.prototype.destroy=function(e){var t=h(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},n.prototype.packet=function(e){c("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,function(o){for(var n=0;n<o.length;n++)t.engine.write(o[n],e.options);t.encoding=!1,t.processPacketQueue()}))},n.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},n.prototype.cleanup=function(){c("cleanup");for(var e=this.subs.length,t=0;e>t;t++){var o=this.subs.shift();o.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},n.prototype.close=n.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},n.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},n.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var o=setTimeout(function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open(function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())}))},t);this.subs.push({destroy:function(){clearTimeout(o)}})}},n.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,o){e.exports=o(17),e.exports.parser=o(24)},function(e,t,o){function n(e,t){return this instanceof n?(t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate?t.perMessageDeflate||{}:!1,!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized?!0:t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open(),void 0):new n(e,t)}function i(e){var t={};for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}var r=o(18),a=o(11),s=o(3)("engine.io-client:socket"),u=o(38),l=o(24),c=o(2),h=o(32);e.exports=n,n.priorWebsocketSuccess=!1,a(n.prototype),n.protocol=l.protocol,n.Socket=n,n.Transport=o(23),n.transports=o(18),n.parser=o(24),n.prototype.createTransport=function(e){s('creating transport "%s"',e);var t=i(this.query);t.EIO=l.protocol,t.transport=e;var o=this.transportOptions[e]||{};this.id&&(t.sid=this.id);var n=new r[e]({query:t,socket:this,agent:o.agent||this.agent,hostname:o.hostname||this.hostname,port:o.port||this.port,secure:o.secure||this.secure,path:o.path||this.path,forceJSONP:o.forceJSONP||this.forceJSONP,jsonp:o.jsonp||this.jsonp,forceBase64:o.forceBase64||this.forceBase64,enablesXDR:o.enablesXDR||this.enablesXDR,withCredentials:o.withCredentials||this.withCredentials,timestampRequests:o.timestampRequests||this.timestampRequests,timestampParam:o.timestampParam||this.timestampParam,policyPort:o.policyPort||this.policyPort,pfx:o.pfx||this.pfx,key:o.key||this.key,passphrase:o.passphrase||this.passphrase,cert:o.cert||this.cert,ca:o.ca||this.ca,ciphers:o.ciphers||this.ciphers,rejectUnauthorized:o.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:o.perMessageDeflate||this.perMessageDeflate,extraHeaders:o.extraHeaders||this.extraHeaders,forceNode:o.forceNode||this.forceNode,localAddress:o.localAddress||this.localAddress,requestTimeout:o.requestTimeout||this.requestTimeout,protocols:o.protocols||void 0,isReactNative:this.isReactNative});return n},n.prototype.open=function(){var e;
if(this.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return setTimeout(function(){t.emit("error","No transports available")},0),void 0}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(o){return this.transports.shift(),this.open(),void 0}e.open(),this.setTransport(e)},n.prototype.setTransport=function(e){s("setting transport %s",e.name);var t=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",function(){t.onDrain()}).on("packet",function(e){t.onPacket(e)}).on("error",function(e){t.onError(e)}).on("close",function(){t.onClose("transport close")})},n.prototype.probe=function(e){function t(){if(d.onlyBinaryUpgrades){var t=!this.supportsBinary&&d.transport.supportsBinary;h=h||t}h||(s('probe transport "%s" opened',e),c.send([{type:"ping",data:"probe"}]),c.once("packet",function(t){if(!h)if("pong"===t.type&&"probe"===t.data){if(s('probe transport "%s" pong',e),d.upgrading=!0,d.emit("upgrading",c),!c)return;n.priorWebsocketSuccess="websocket"===c.name,s('pausing current transport "%s"',d.transport.name),d.transport.pause(function(){h||"closed"!==d.readyState&&(s("changing transport and sending upgrade packet"),l(),d.setTransport(c),c.send([{type:"upgrade"}]),d.emit("upgrade",c),c=null,d.upgrading=!1,d.flush())})}else{s('probe transport "%s" failed',e);var o=new Error("probe error");o.transport=c.name,d.emit("upgradeError",o)}}))}function o(){h||(h=!0,l(),c.close(),c=null)}function i(t){var n=new Error("probe error: "+t);n.transport=c.name,o(),s('probe transport "%s" failed because of error: %s',e,t),d.emit("upgradeError",n)}function r(){i("transport closed")}function a(){i("socket closed")}function u(e){c&&e.name!==c.name&&(s('"%s" works - aborting "%s"',e.name,c.name),o())}function l(){c.removeListener("open",t),c.removeListener("error",i),c.removeListener("close",r),d.removeListener("close",a),d.removeListener("upgrading",u)}s('probing transport "%s"',e);var c=this.createTransport(e,{probe:1}),h=!1,d=this;n.priorWebsocketSuccess=!1,c.once("open",t),c.once("error",i),c.once("close",r),this.once("close",a),this.once("upgrading",u),c.open()},n.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var e=0,t=this.upgrades.length;t>e;e++)this.probe(this.upgrades[e])}},n.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(s('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else s('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout(function(){"closed"!==t.readyState&&t.onClose("ping timeout")},e||t.pingInterval+t.pingTimeout)},n.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)},e.pingInterval)},n.prototype.ping=function(){var e=this;this.sendPacket("ping",function(){e.emit("ping")})},n.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(e,t,o){return this.sendPacket("message",e,t,o),this},n.prototype.sendPacket=function(e,t,o,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof o&&(n=o,o=null),"closing"!==this.readyState&&"closed"!==this.readyState){o=o||{},o.compress=!1!==o.compress;var i={type:e,data:t,options:o};this.emit("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}},n.prototype.close=function(){function e(){n.onClose("forced close"),s("socket closing - telling transport to close"),n.transport.close()}function t(){n.removeListener("upgrade",t),n.removeListener("upgradeError",t),e()}function o(){n.once("upgrade",t),n.once("upgradeError",t)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?o():e()}):this.upgrading?o():e()}return this},n.prototype.onError=function(e){s("socket error %j",e),n.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},n.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){s('socket close with reason: "%s"',e);var o=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),o.writeBuffer=[],o.prevBufferLen=0}},n.prototype.filterUpgrades=function(e){for(var t=[],o=0,n=e.length;n>o;o++)~u(this.transports,e[o])&&t.push(e[o]);return t}},function(e,t,o){function n(e){var t,o=!1,n=!1,s=!1!==e.jsonp;if("undefined"!=typeof location){var u="https:"===location.protocol,l=location.port;l||(l=u?443:80),o=e.hostname!==location.hostname||l!==e.port,n=e.secure!==u}if(e.xdomain=o,e.xscheme=n,t=new i(e),"open"in t&&!e.forceJSONP)return new r(e);if(!s)throw new Error("JSONP disabled");return new a(e)}var i=o(19),r=o(21),a=o(35),s=o(36);t.polling=n,t.websocket=s},function(e,t,o){var n=o(20);e.exports=function(e){var t=e.xdomain,o=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||n))return new XMLHttpRequest}catch(r){}try{if("undefined"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(r){}if(!t)try{return new(self[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(r){}}},function(e){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,o){function n(){}function i(e){if(u.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,o=location.port;o||(o=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||o!==e.port,this.xs=e.secure!==t}}function r(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}function a(){for(var e in r.requests)r.requests.hasOwnProperty(e)&&r.requests[e].abort()}var s=o(19),u=o(22),l=o(11),c=o(33),h=o(3)("engine.io-client:polling-xhr");if(e.exports=i,e.exports.Request=r,c(i,u),i.prototype.supportsBinary=!0,i.prototype.request=function(e){return e=e||{},e.uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new r(e)},i.prototype.doWrite=function(e,t){var o="string"!=typeof e&&void 0!==e,n=this.request({method:"POST",data:e,isBinary:o}),i=this;n.on("success",t),n.on("error",function(e){i.onError("xhr post error",e)}),this.sendXhr=n},i.prototype.doPoll=function(){h("xhr poll");var e=this.request(),t=this;e.on("data",function(e){t.onData(e)}),e.on("error",function(e){t.onError("xhr poll error",e)}),this.pollXhr=e},l(r.prototype),r.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new s(e),o=this;try{h("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders){t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0);for(var n in this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&t.setRequestHeader(n,this.extraHeaders[n])}}catch(i){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(i){}try{t.setRequestHeader("Accept","*/*")}catch(i){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){o.onLoad()},t.onerror=function(){o.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(o.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(n){}4===t.readyState&&(200===t.status||1223===t.status?o.onLoad():setTimeout(function(){o.onError("number"==typeof t.status?t.status:0)},0))},h("xhr data %s",this.data),t.send(this.data)}catch(i){return setTimeout(function(){o.onError(i)},0),void 0}"undefined"!=typeof document&&(this.index=r.requestsCount++,r.requests[this.index]=this)},r.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},r.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},r.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},r.prototype.cleanup=function(e){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=n:this.xhr.onreadystatechange=n,e)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete r.requests[this.index],this.xhr=null}},r.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(o){}e="application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(o){this.onError(o)}null!=e&&this.onData(e)},r.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},r.prototype.abort=function(){this.cleanup()},r.requestsCount=0,r.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",a);else if("function"==typeof addEventListener){var d="onpagehide"in self?"pagehide":"unload";addEventListener(d,a,!1)}},function(e,t,o){function n(e){var t=e&&e.forceBase64;(!c||t)&&(this.supportsBinary=!1),i.call(this,e)}var i=o(23),r=o(32),a=o(24),s=o(33),u=o(34),l=o(3)("engine.io-client:polling");e.exports=n;var c=function(){var e=o(19),t=new e({xdomain:!1});return null!=t.responseType}();s(n,i),n.prototype.name="polling",n.prototype.doOpen=function(){this.poll()},n.prototype.pause=function(e){function t(){l("paused"),o.readyState="paused",e()}var o=this;if(this.readyState="pausing",this.polling||!this.writable){var n=0;this.polling&&(l("we are currently polling - waiting to pause"),n++,this.once("pollComplete",function(){l("pre-pause polling complete"),--n||t()})),this.writable||(l("we are currently writing - waiting to pause"),n++,this.once("drain",function(){l("pre-pause writing complete"),--n||t()}))}else t()},n.prototype.poll=function(){l("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},n.prototype.onData=function(e){var t=this;l("polling got data %s",e);var o=function(e){return"opening"===t.readyState&&t.onOpen(),"close"===e.type?(t.onClose(),!1):(t.onPacket(e),void 0)};a.decodePayload(e,this.socket.binaryType,o),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():l('ignoring poll - transport state "%s"',this.readyState))},n.prototype.doClose=function(){function e(){l("writing close packet"),t.write([{type:"close"}])}var t=this;"open"===this.readyState?(l("transport open - closing"),e()):(l("transport not open - deferring close"),this.once("open",e))},n.prototype.write=function(e){var t=this;this.writable=!1;var o=function(){t.writable=!0,t.emit("drain")};a.encodePayload(e,this.supportsBinary,function(e){t.doWrite(e,o)})},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",o="";!1!==this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||e.sid||(e.b64=1),e=r.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(o=":"+this.port),e.length&&(e="?"+e);var n=-1!==this.hostname.indexOf(":");return t+"://"+(n?"["+this.hostname+"]":this.hostname)+o+this.path+e}},function(e,t,o){function n(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}var i=o(24),r=o(11);e.exports=n,r(n.prototype),n.prototype.onError=function(e,t){var o=new Error(e);return o.type="TransportError",o.description=t,this.emit("error",o),this},n.prototype.open=function(){return("closed"===this.readyState||""===this.readyState)&&(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this},n.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(e){var t=i.decodePacket(e,this.socket.binaryType);this.onPacket(t)},n.prototype.onPacket=function(e){this.emit("packet",e)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,o){function n(e,o){var n="b"+t.packets[e.type]+e.data.data;return o(n)}function i(e,o,n){if(!o)return t.encodeBase64Packet(e,n);var i=e.data,r=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=b[e.type];for(var s=0;s<r.length;s++)a[s+1]=r[s];return n(a.buffer)}function r(e,o,n){if(!o)return t.encodeBase64Packet(e,n);var i=new FileReader;return i.onload=function(){t.encodePacket({type:e.type,data:i.result},o,!0,n)},i.readAsArrayBuffer(e.data)}function a(e,o,n){if(!o)return t.encodeBase64Packet(e,n);if(y)return r(e,o,n);var i=new Uint8Array(1);i[0]=b[e.type];var a=new k([i.buffer,e.data]);return n(a)}function s(e){try{e=p.decode(e,{strict:!1})}catch(t){return!1}return e}function u(e,t,o){for(var n=new Array(e.length),i=f(e.length,o),r=function(e,o,i){t(o,function(t,o){n[e]=o,i(t,n)})},a=0;a<e.length;a++)r(a,e[a],i)}var l,c=o(25),h=o(26),d=o(27),f=o(28),p=o(29);"undefined"!=typeof ArrayBuffer&&(l=o(30));var m="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),g="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),y=m||g;t.protocol=3;var b=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},v=c(b),w={type:"error",data:"parser error"},k=o(31);t.encodePacket=function(e,t,o,r){"function"==typeof t&&(r=t,t=!1),"function"==typeof o&&(r=o,o=null);var s=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&s instanceof ArrayBuffer)return i(e,t,r);if("undefined"!=typeof k&&s instanceof k)return a(e,t,r);if(s&&s.base64)return n(e,r);var u=b[e.type];return void 0!==e.data&&(u+=o?p.encode(String(e.data),{strict:!1}):String(e.data)),r(""+u)},t.encodeBase64Packet=function(e,o){var n="b"+t.packets[e.type];if("undefined"!=typeof k&&e.data instanceof k){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];o(n+e)},i.readAsDataURL(e.data)}var r;try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(a){for(var s=new Uint8Array(e.data),u=new Array(s.length),l=0;l<s.length;l++)u[l]=s[l];r=String.fromCharCode.apply(null,u)}return n+=btoa(r),o(n)},t.decodePacket=function(e,o,n){if(void 0===e)return w;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),o);if(n&&(e=s(e),e===!1))return w;var i=e.charAt(0);return Number(i)==i&&v[i]?e.length>1?{type:v[i],data:e.substring(1)}:{type:v[i]}:w}var r=new Uint8Array(e),i=r[0],a=d(e,1);return k&&"blob"===o&&(a=new k([a])),{type:v[i],data:a}},t.decodeBase64Packet=function(e,t){var o=v[e.charAt(0)];if(!l)return{type:o,data:{base64:!0,data:e.substr(1)}};var n=l.decode(e.substr(1));return"blob"===t&&k&&(n=new k([n])),{type:o,data:n}},t.encodePayload=function(e,o,n){function i(e){return e.length+":"+e}function r(e,n){t.encodePacket(e,a?o:!1,!1,function(e){n(null,i(e))})}"function"==typeof o&&(n=o,o=null);var a=h(e);return o&&a?k&&!y?t.encodePayloadAsBlob(e,n):t.encodePayloadAsArrayBuffer(e,n):e.length?(u(e,r,function(e,t){return n(t.join(""))}),void 0):n("0:")},t.decodePayload=function(e,o,n){if("string"!=typeof e)return t.decodePayloadAsBinary(e,o,n);"function"==typeof o&&(n=o,o=null);var i;if(""===e)return n(w,0,1);for(var r,a,s="",u=0,l=e.length;l>u;u++){var c=e.charAt(u);if(":"===c){if(""===s||s!=(r=Number(s)))return n(w,0,1);if(a=e.substr(u+1,r),s!=a.length)return n(w,0,1);if(a.length){if(i=t.decodePacket(a,o,!1),w.type===i.type&&w.data===i.data)return n(w,0,1);var h=n(i,u+r,l);if(!1===h)return}u+=r,s=""}else s+=c}return""!==s?n(w,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,o){function n(e,o){t.encodePacket(e,!0,!0,function(e){return o(null,e)})}return e.length?(u(e,n,function(e,t){var n=t.reduce(function(e,t){var o;return o="string"==typeof t?t.length:t.byteLength,e+o.toString().length+o+2},0),i=new Uint8Array(n),r=0;return t.forEach(function(e){var t="string"==typeof e,o=e;if(t){for(var n=new Uint8Array(e.length),a=0;a<e.length;a++)n[a]=e.charCodeAt(a);o=n.buffer}i[r++]=t?0:1;for(var s=o.byteLength.toString(),a=0;a<s.length;a++)i[r++]=parseInt(s[a]);i[r++]=255;for(var n=new Uint8Array(o),a=0;a<n.length;a++)i[r++]=n[a]}),o(i.buffer)}),void 0):o(new ArrayBuffer(0))},t.encodePayloadAsBlob=function(e,o){function n(e,o){t.encodePacket(e,!0,!0,function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);e=n.buffer,t[0]=0}for(var r=e instanceof ArrayBuffer?e.byteLength:e.size,a=r.toString(),s=new Uint8Array(a.length+1),i=0;i<a.length;i++)s[i]=parseInt(a[i]);if(s[a.length]=255,k){var u=new k([t.buffer,s.buffer,e]);o(null,u)}})}u(e,n,function(e,t){return o(new k(t))})},t.decodePayloadAsBinary=function(e,o,n){"function"==typeof o&&(n=o,o=null);for(var i=e,r=[];i.byteLength>0;){for(var a=new Uint8Array(i),s=0===a[0],u="",l=1;255!==a[l];l++){if(u.length>310)return n(w,0,1);u+=a[l]}i=d(i,2+u.length),u=parseInt(u);var c=d(i,0,u);if(s)try{c=String.fromCharCode.apply(null,new Uint8Array(c))}catch(h){var f=new Uint8Array(c);c="";for(var l=0;l<f.length;l++)c+=String.fromCharCode(f[l])}r.push(c),i=d(i,u)}var p=r.length;r.forEach(function(e,i){n(t.decodePacket(e,o,!0),i,p)})}},function(e){e.exports=Object.keys||function(e){var t=[],o=Object.prototype.hasOwnProperty;for(var n in e)o.call(e,n)&&t.push(n);return t}},function(e,t,o){function n(e){if(!e||"object"!=typeof e)return!1;if(i(e)){for(var t=0,o=e.length;o>t;t++)if(n(e[t]))return!0;return!1}if("function"==typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e)||"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||a&&e instanceof Blob||s&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return n(e.toJSON(),!0);for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n(e[r]))return!0;return!1}var i=o(13),r=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);e.exports=n},function(e){e.exports=function(e,t,o){var n=e.byteLength;if(t=t||0,o=o||n,e.slice)return e.slice(t,o);if(0>t&&(t+=n),0>o&&(o+=n),o>n&&(o=n),t>=n||t>=o||0===n)return new ArrayBuffer(0);for(var i=new Uint8Array(e),r=new Uint8Array(o-t),a=t,s=0;o>a;a++,s++)r[s]=i[a];return r.buffer}},function(e){function t(e,t,n){function i(e,o){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(r=!0,t(e),t=n):0!==i.count||r||t(null,o)}var r=!1;return n=n||o,i.count=e,0===e?t():i}function o(){}e.exports=t},function(e){function t(e){for(var t,o,n=[],i=0,r=e.length;r>i;)t=e.charCodeAt(i++),t>=55296&&56319>=t&&r>i?(o=e.charCodeAt(i++),56320==(64512&o)?n.push(((1023&t)<<10)+(1023&o)+65536):(n.push(t),i--)):n.push(t);return n}function o(e){for(var t,o=e.length,n=-1,i="";++n<o;)t=e[n],t>65535&&(t-=65536,i+=f(55296|1023&t>>>10),t=56320|1023&t),i+=f(t);return i}function n(e,t){if(e>=55296&&57343>=e){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function i(e,t){return f(128|63&e>>t)}function r(e,t){if(0==(4294967168&e))return f(e);var o="";return 0==(4294965248&e)?o=f(192|31&e>>6):0==(4294901760&e)?(n(e,t)||(e=65533),o=f(224|15&e>>12),o+=i(e,6)):0==(4292870144&e)&&(o=f(240|7&e>>18),o+=i(e,12),o+=i(e,6)),o+=f(128|63&e)}function a(e,o){o=o||{};for(var n,i=!1!==o.strict,a=t(e),s=a.length,u=-1,l="";++u<s;)n=a[u],l+=r(n,i);return l}function s(){if(d>=h)throw Error("Invalid byte index");var e=255&c[d];if(d++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function u(e){var t,o,i,r,a;if(d>h)throw Error("Invalid byte index");if(d==h)return!1;if(t=255&c[d],d++,0==(128&t))return t;if(192==(224&t)){if(o=s(),a=(31&t)<<6|o,a>=128)return a;throw Error("Invalid continuation byte")}if(224==(240&t)){if(o=s(),i=s(),a=(15&t)<<12|o<<6|i,a>=2048)return n(a,e)?a:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(o=s(),i=s(),r=s(),a=(7&t)<<18|o<<12|i<<6|r,a>=65536&&1114111>=a))return a;throw Error("Invalid UTF-8 detected")}function l(e,n){n=n||{};var i=!1!==n.strict;c=t(e),h=c.length,d=0;for(var r,a=[];(r=u(i))!==!1;)a.push(r);return o(a)}var c,h,d,f=String.fromCharCode;e.exports={version:"2.1.2",encode:a,decode:l}},function(e,t){!function(){"use strict";for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(256),n=0;n<e.length;n++)o[e.charCodeAt(n)]=n;t.encode=function(t){var o,n=new Uint8Array(t),i=n.length,r="";for(o=0;i>o;o+=3)r+=e[n[o]>>2],r+=e[(3&n[o])<<4|n[o+1]>>4],r+=e[(15&n[o+1])<<2|n[o+2]>>6],r+=e[63&n[o+2]];return 2===i%3?r=r.substring(0,r.length-1)+"=":1===i%3&&(r=r.substring(0,r.length-2)+"=="),r},t.decode=function(e){var t,n,i,r,a,s=.75*e.length,u=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var c=new ArrayBuffer(s),h=new Uint8Array(c);for(t=0;u>t;t+=4)n=o[e.charCodeAt(t)],i=o[e.charCodeAt(t+1)],r=o[e.charCodeAt(t+2)],a=o[e.charCodeAt(t+3)],h[l++]=n<<2|i>>4,h[l++]=(15&i)<<4|r>>2,h[l++]=(3&r)<<6|63&a;return c}}()},function(e){function t(e){return e.map(function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var o=new Uint8Array(e.byteLength);o.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=o.buffer}return t}return e})}function o(e,o){o=o||{};var n=new i;return t(e).forEach(function(e){n.append(e)}),o.type?n.getBlob(o.type):n.getBlob()}function n(e,o){return new Blob(t(e),o||{})}var i="undefined"!=typeof i?i:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:!1,r=function(){try{var e=new Blob(["hi"]);return 2===e.size}catch(t){return!1}}(),a=r&&function(){try{var e=new Blob([new Uint8Array([1,2])]);return 2===e.size}catch(t){return!1}}(),s=i&&i.prototype.append&&i.prototype.getBlob;"undefined"!=typeof Blob&&(o.prototype=Blob.prototype,n.prototype=Blob.prototype),e.exports=function(){return r?a?Blob:n:s?o:void 0}()},function(e,t){t.encode=function(e){var t="";for(var o in e)e.hasOwnProperty(o)&&(t.length&&(t+="&"),t+=encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t},t.decode=function(e){for(var t={},o=e.split("&"),n=0,i=o.length;i>n;n++){var r=o[n].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return t}},function(e){e.exports=function(e,t){var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}},function(e){"use strict";function t(e){var t="";do t=r[e%a]+t,e=Math.floor(e/a);while(e>0);return t}function o(e){var t=0;for(l=0;l<e.length;l++)t=t*a+s[e.charAt(l)];return t}function n(){var e=t(+new Date);return e!==i?(u=0,i=e):e+"."+t(u++)}for(var i,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,s={},u=0,l=0;a>l;l++)s[r[l]]=l;n.encode=t,n.decode=o,e.exports=n},function(e,t,o){!function(t){function n(){}function i(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof t?t:{}}function r(e){if(a.call(this,e),this.query=this.query||{},!u){var t=i();u=t.___eio=t.___eio||[]}this.index=u.length;var o=this;u.push(function(e){o.onData(e)}),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",function(){o.script&&(o.script.onerror=n)},!1)}var a=o(22),s=o(33);e.exports=r;var u,l=/\n/g,c=/\\n/g;s(r,a),r.prototype.supportsBinary=!1,r.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),a.prototype.doClose.call(this)},r.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var o=document.getElementsByTagName("script")[0];o?o.parentNode.insertBefore(t,o):(document.head||document.body).appendChild(t),this.script=t;var n="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);n&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},r.prototype.doWrite=function(e,t){function o(){n(),t()}function n(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(e){i.onError("jsonp polling iframe removal error",e)}try{var t='<iframe src="javascript:0" name="'+i.iframeId+'">';r=document.createElement(t)}catch(e){r=document.createElement("iframe"),r.name=i.iframeId,r.src="javascript:0"}r.id=i.iframeId,i.form.appendChild(r),i.iframe=r}var i=this;if(!this.form){var r,a=document.createElement("form"),s=document.createElement("textarea"),u=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=u,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),n(),e=e.replace(c,"\\\n"),this.area.value=e.replace(l,"\\n");try{this.form.submit()}catch(h){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===i.iframe.readyState&&o()}:this.iframe.onload=o}}.call(t,function(){return this}())},function(e,t,o){function n(e){var t=e&&e.forceBase64;t&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=i&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(f=r),a.call(this,e)}var i,r,a=o(23),s=o(24),u=o(32),l=o(33),c=o(34),h=o(3)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?i=WebSocket:"undefined"!=typeof self&&(i=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{r=o(37)}catch(d){}var f=i||r;e.exports=n,l(n,a),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,o={agent:this.agent,perMessageDeflate:this.perMessageDeflate};o.pfx=this.pfx,o.key=this.key,o.passphrase=this.passphrase,o.cert=this.cert,o.ca=this.ca,o.ciphers=this.ciphers,o.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(o.headers=this.extraHeaders),this.localAddress&&(o.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new f(e,t):new f(e):new f(e,t,o)}catch(n){return this.emit("error",n)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},n.prototype.write=function(e){function t(){o.emit("flush"),setTimeout(function(){o.writable=!0,o.emit("drain")},0)}var o=this;this.writable=!1;for(var n=e.length,i=0,r=n;r>i;i++)!function(e){s.encodePacket(e,o.supportsBinary,function(i){if(!o.usingBrowserWebSocket){var r={};if(e.options&&(r.compress=e.options.compress),o.perMessageDeflate){var a="string"==typeof i?Buffer.byteLength(i):i.length;a<o.perMessageDeflate.threshold&&(r.compress=!1)}}try{o.usingBrowserWebSocket?o.ws.send(i):o.ws.send(i,r)}catch(s){h("websocket closed before onclose event")}--n||t()})}(e[i])},n.prototype.onClose=function(){a.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",o="";this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(o=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=c()),this.supportsBinary||(e.b64=1),e=u.encode(e),e.length&&(e="?"+e);var n=-1!==this.hostname.indexOf(":");return t+"://"+(n?"["+this.hostname+"]":this.hostname)+o+this.path+e},n.prototype.check=function(){return!(!f||"__initialize"in f&&this.name===n.prototype.name)}},function(){},function(e){var t=[].indexOf;e.exports=function(e,o){if(t)return e.indexOf(o);for(var n=0;n<e.length;++n)if(e[n]===o)return n;return-1}},function(e,t,o){function n(e,t,o){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},o&&o.query&&(this.query=o.query),this.io.autoConnect&&this.open()}var i=o(7),r=o(11),a=o(40),s=o(41),u=o(42),l=o(3)("socket.io-client:socket"),c=o(32),h=o(26);e.exports=t=n;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},f=r.prototype.emit;
r(n.prototype),n.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",u(this,"onopen")),s(e,"packet",u(this,"onpacket")),s(e,"close",u(this,"onclose"))]}},n.prototype.open=n.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},n.prototype.send=function(){var e=a(arguments);return e.unshift("message"),this.emit.apply(this,e),this},n.prototype.emit=function(e){if(d.hasOwnProperty(e))return f.apply(this,arguments),this;var t=a(arguments),o={type:(void 0!==this.flags.binary?this.flags.binary:h(t))?i.BINARY_EVENT:i.EVENT,data:t};return o.options={},o.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(l("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),o.id=this.ids++),this.connected?this.packet(o):this.sendBuffer.push(o),this.flags={},this},n.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},n.prototype.onopen=function(){if(l("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?c.encode(this.query):this.query;l("sending connect packet with query %s",e),this.packet({type:i.CONNECT,query:e})}else this.packet({type:i.CONNECT})},n.prototype.onclose=function(e){l("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},n.prototype.onpacket=function(e){var t=e.nsp===this.nsp,o=e.type===i.ERROR&&"/"===e.nsp;if(t||o)switch(e.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(e);break;case i.BINARY_EVENT:this.onevent(e);break;case i.ACK:this.onack(e);break;case i.BINARY_ACK:this.onack(e);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",e.data)}},n.prototype.onevent=function(e){var t=e.data||[];l("emitting event %j",t),null!=e.id&&(l("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?f.apply(this,t):this.receiveBuffer.push(t)},n.prototype.ack=function(e){var t=this,o=!1;return function(){if(!o){o=!0;var n=a(arguments);l("sending ack %j",n),t.packet({type:h(n)?i.BINARY_ACK:i.ACK,id:e,data:n})}}},n.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(l("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):l("bad ack %s",e.id)},n.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},n.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)f.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},n.prototype.ondisconnect=function(){l("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},n.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},n.prototype.close=n.prototype.disconnect=function(){return this.connected&&(l("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},n.prototype.compress=function(e){return this.flags.compress=e,this},n.prototype.binary=function(e){return this.flags.binary=e,this}},function(e){function t(e,t){var o=[];t=t||0;for(var n=t||0;n<e.length;n++)o[n-t]=e[n];return o}e.exports=t},function(e){function t(e,t,o){return e.on(t,o),{destroy:function(){e.removeListener(t,o)}}}e.exports=t},function(e){var t=[].slice;e.exports=function(e,o){if("string"==typeof o&&(o=e[o]),"function"!=typeof o)throw new Error("bind() requires a function");var n=t.call(arguments,2);return function(){return o.apply(e,n.concat(t.call(arguments)))}}},function(e){function t(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=t,t.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),o=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-o:e+o}return 0|Math.min(e,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(e){this.ms=e},t.prototype.setMax=function(e){this.max=e},t.prototype.setJitter=function(e){this.jitter=e}}])}),jade=function(e){function t(e){return null!=e}return Array.isArray||(Array.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)}),Object.keys||(Object.keys=function(e){var t=[];for(var o in e)e.hasOwnProperty(o)&&t.push(o);return t}),e.merge=function(e,o){var n=e["class"],i=o["class"];(n||i)&&(n=n||[],i=i||[],Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]),n=n.filter(t),i=i.filter(t),e["class"]=n.concat(i).join(" "));for(var r in o)"class"!=r&&(e[r]=o[r]);return e},e.attrs=function(t,o){var n=[],i=t.terse;delete t.terse;var r=Object.keys(t),a=r.length;if(a){n.push("");for(var s=0;a>s;++s){var u=r[s],l=t[u];"boolean"==typeof l||null==l?l&&(i?n.push(u):n.push(u+'="'+u+'"')):0==u.indexOf("data")&&"string"!=typeof l?n.push(u+"='"+JSON.stringify(l)+"'"):"class"==u&&Array.isArray(l)?n.push(u+'="'+e.escape(l.join(" "))+'"'):o&&o[u]?n.push(u+'="'+e.escape(l)+'"'):n.push(u+'="'+l+'"')}}return n.join(" ")},e.escape=function(e){return String(e).replace(/&(?!(\w+|\#\d+);)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},e.rethrow=function(e,t,o){if(!t)throw e;throw e.path=t,e.message=(t||"Jade")+":"+o+"\n"+e.message,e},e}({}),jade.settings=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="span3 thumbnail"><h5><i class="icon-wrench"></i>Settings</h5><div style="text-align: center; padding-right: 4px; padding-left: 4px; padding-top: 4px"><div class="localsettings"><div class="expando"><div class="input-prepend"><span style="width:21px" title="Public name" rel="tooltip" class="generate-name add-on"><i class="icon-user"></i></span><input id="username" type="text" value="" disabled="disabled"/></div></div><div style="display:none" class="expando set-team"><div class="input-prepend"><span style="width:21px" title="Teams" rel="tooltip" class="add-on"><i class="icon-group"></i></span><select class="input teams"><option value="">Individual</option></select></div></div><div style="display:none" class="expando reset-score"><div class="input-prepend"><span style="width:21px" title="Reset my score" rel="tooltip" class="add-on"><i class="icon-trash"></i></span><button class="btn input score-reset">Reset My Score </button></div></div><div style="display:none" class="expando relinquish-command"><div class="input-prepend"><span style="width:21px" title="Relinquish dominance over this room" rel="tooltip" class="add-on"><i class="icon-eye-close"></i></span><button class="btn input lose-command">Relinquish Command</button></div></div><label class="checkbox"><input type="checkbox" class="movingwindow"/>Points earned in last 20 questions</label><label class="checkbox"><input type="checkbox" class="adhd"/>Enable distraction free mode</label><div class="microwave"><label class="checkbox"><input type="checkbox" checked="checked" class="livechat"/>Show chat messages while typing</label></div><label class="checkbox"><input type="checkbox" class="sounds"/>Play sound on successful buzz</label><div style="display:none;white-space:nowrap;" class="lockvote"><label class="checkbox"><input type="checkbox" class="lock"/>Lock settings <span class=\'electorate\'>0/1 votes</span><i style="padding-left: 5px" class="icon-unlock status_icon"></i></label></div></div><hr/><div class="globalsettings"><div class="expando"><div class="input-prepend"><span style="width:21px" title="Read speed" rel="tooltip" class="add-on"><i class="icon-step-forward"></i></span><input type="range" value="200" min="60" max="600" class="speed"/></div></div><div class="expando"><div class="input-prepend"><span style="width:21px" title="Difficulty/Category" rel="tooltip" class="add-on"><i class="icon-briefcase"></i></span><select style="width: 60px; border-right: 0" class="padd-on difficulties"></select><select style="border-left: 0" class="input categories"></select></div></div><div style="display:none" class="custom-category"></div><label class="checkbox"><input type="checkbox" class="showbonus"/>Show bonus questions</label><label class="checkbox"><input type="checkbox" checked="checked" class="multibuzz"/>Allow players to buzz multiple times</label><label class="checkbox"><input type="checkbox" checked="checked" class="allowskip"/>Allow players to skip questions</label><label style="display: none" class="checkbox"><input type="checkbox" checked="checked" class="allowpause"/>Allow players to pause questions</label><div class="request-access"><button class="btn btn-large"><i class="icon-cog"></i>&nbsp; Request Access</button></div></div></div></div>');return buf.join("")},jade.update=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{})buf.push('<div class="well"><a href="" class="btn btn-primary pull-right">Reload</a>A <strong>new version</strong> of this application has been downloaded. Please reload the application now.</div>');return buf.join("")},window.Modernizr=function(e,t,o){function n(e){p.cssText=e}function i(e,t){return typeof e===t}var r,a,s,u="2.6.1",l={},c=!0,h=t.documentElement,d="modernizr",f=t.createElement(d),p=f.style,m=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),g={},y=[],b=y.slice,v=function(e,o,n,i){var r,a,s,u=t.createElement("div"),l=t.body,c=l?l:t.createElement("body");if(parseInt(n,10))for(;n--;)s=t.createElement("div"),s.id=i?i[n]:d+(n+1),u.appendChild(s);return r=["&#173;",'<style id="s',d,'">',e,"</style>"].join(""),u.id=d,(l?u:c).innerHTML+=r,c.appendChild(u),l||(c.style.background="",h.appendChild(c)),a=o(u,e),l?u.parentNode.removeChild(u):c.parentNode.removeChild(c),!!a},w={}.hasOwnProperty;s=i(w,"undefined")||i(w.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(e,t){return w.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var o=b.call(arguments,1),n=function(){if(this instanceof n){var i=function(){};i.prototype=t.prototype;var r=new i,a=t.apply(r,o.concat(b.call(arguments)));return Object(a)===a?a:r}return t.apply(e,o.concat(b.call(arguments)))};return n}),g.touch=function(){var o;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?o=!0:v(["@media (",m.join("touch-enabled),("),d,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){o=9===e.offsetTop}),o};for(var k in g)s(g,k)&&(a=k.toLowerCase(),l[a]=g[k](),y.push((l[a]?"":"no-")+a));return l.addTest=function(e,t){if("object"==typeof e)for(var n in e)s(e,n)&&l.addTest(n,e[n]);else{if(e=e.toLowerCase(),l[e]!==o)return l;t="function"==typeof t?t():t,c&&(h.className+=" "+(t?"":"no-")+e),l[e]=t}return l},n(""),f=r=null,function(e,t){function o(e,t){var o=e.createElement("p"),n=e.getElementsByTagName("head")[0]||e.documentElement;return o.innerHTML="x<style>"+t+"</style>",n.insertBefore(o.lastChild,n.firstChild)}function n(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function i(e){var t=g[e[p]];return t||(t={},m++,e[p]=m,g[m]=t),t}function r(e,o,n){if(o||(o=t),c)return o.createElement(e);n||(n=i(o));var r;return r=n.cache[e]?n.cache[e].cloneNode():f.test(e)?(n.cache[e]=n.createElem(e)).cloneNode():n.createElem(e),r.canHaveChildren&&!d.test(e)?n.frag.appendChild(r):r}function a(e,o){if(e||(e=t),c)return e.createDocumentFragment();o=o||i(e);for(var r=o.frag.cloneNode(),a=0,s=n(),u=s.length;u>a;a++)r.createElement(s[a]);return r}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(o){return y.shivMethods?r(o,e,t):t.createElem(o)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/\w+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function u(e){e||(e=t);var n=i(e);return y.shivCSS&&!l&&!n.hasCSS&&(n.hasCSS=!!o(e,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),c||s(e,n),e}var l,c,h=e.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i,p="_html5shiv",m=0,g={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",l="hidden"in e,c=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(o){l=!0,c=!0}}();var y={elements:h.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:h.shivCSS!==!1,supportsUnknownElements:c,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:u,createElement:r,createDocumentFragment:a};e.html5=y,u(t)}(this,t),l._version=u,l._prefixes=m,l.testStyles=v,h.className=h.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(c?" js "+y.join(" "):""),l}(this,this.document),function(e,t,o){function n(e){return"[object Function]"==g.call(e)}function i(e){return"string"==typeof e}function r(){}function a(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=y.shift();b=1,e?e.t?p(function(){("c"==e.t?d.injectCss:d.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):b=0}function u(e,o,n,i,r,u,l){function c(t){if(!f&&a(h.readyState)&&(v.r=f=1,!b&&s(),h.onload=h.onreadystatechange=null,t)){"img"!=e&&p(function(){k.removeChild(h)},50);for(var n in E[o])E[o].hasOwnProperty(n)&&E[o][n].onload()}}var l=l||d.errorTimeout,h=t.createElement(e),f=0,g=0,v={t:n,s:o,e:r,a:u,x:l};1===E[o]&&(g=1,E[o]=[]),"object"==e?h.data=o:(h.src=o,h.type=e),h.width=h.height="0",h.onerror=h.onload=h.onreadystatechange=function(){c.call(this,g)},y.splice(i,0,v),"img"!=e&&(g||2===E[o]?(k.insertBefore(h,w?null:m),p(c,l)):E[o].push(h))}function l(e,t,o,n,r){return b=0,t=t||"j",i(e)?u("c"==t?$:_,e,t,this.i++,o,n,r):(y.splice(this.i++,0,e),1==y.length&&s()),this}function c(){var e=d;return e.loader={load:l,i:0},e}var h,d,f=t.documentElement,p=e.setTimeout,m=t.getElementsByTagName("script")[0],g={}.toString,y=[],b=0,v="MozAppearance"in f.style,w=v&&!!t.createRange().compareNode,k=w?f:m.parentNode,f=e.opera&&"[object Opera]"==g.call(e.opera),f=!!t.attachEvent&&!f,_=v?"object":f?"script":"img",$=f?"script":_,C=Array.isArray||function(e){return"[object Array]"==g.call(e)},x=[],E={},T={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};d=function(e){function t(e){var t,o,n,e=e.split("!"),i=x.length,r=e.pop(),a=e.length,r={url:r,origUrl:r,prefixes:e};for(o=0;a>o;o++)n=e[o].split("="),(t=T[n.shift()])&&(r=t(r,n));for(o=0;i>o;o++)r=x[o](r);return r}function a(e,i,r,a,s){var u=t(e),l=u.autoCallback;u.url.split(".").pop().split("?").shift(),u.bypass||(i&&(i=n(i)?i:i[e]||i[a]||i[e.split("/").pop().split("?")[0]]),u.instead?u.instead(e,i,r,a,s):(E[u.url]?u.noexec=!0:E[u.url]=1,r.load(u.url,u.forceCSS||!u.forceJS&&"css"==u.url.split(".").pop().split("?").shift()?"c":o,u.noexec,u.attrs,u.timeout),(n(i)||n(l))&&r.load(function(){c(),i&&i(u.origUrl,s,a),l&&l(u.origUrl,s,a),E[u.url]=2})))}function s(e,t){function o(e,o){if(e){if(i(e))o||(h=function(){var e=[].slice.call(arguments);d.apply(this,e),f()}),a(e,h,t,0,l);else if(Object(e)===e)for(u in s=function(){var t,o=0;for(t in e)e.hasOwnProperty(t)&&o++;return o}(),e)e.hasOwnProperty(u)&&(!o&&!--s&&(n(h)?h=function(){var e=[].slice.call(arguments);d.apply(this,e),f()}:h[u]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),f()}}(d[u])),a(e[u],h,t,u,l))}else!o&&f()}var s,u,l=!!e.test,c=e.load||e.both,h=e.callback||r,d=h,f=e.complete||r;o(l?e.yep:e.nope,!!c),c&&o(c)}var u,l,h=this.yepnope.loader;if(i(e))a(e,0,h,0);else if(C(e))for(u=0;u<e.length;u++)l=e[u],i(l)?a(l,0,h,0):C(l)?d(l):Object(l)===l&&s(l,h);else Object(e)===e&&s(e,h)},d.addPrefix=function(e,t){T[e]=t},d.addFilter=function(e){x.push(e)},d.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",h=function(){t.removeEventListener("DOMContentLoaded",h,0),t.readyState="complete"},0)),e.yepnope=c(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,o,n,i,u,l){var c,h,f=t.createElement("script"),i=i||d.errorTimeout;f.src=e;for(h in n)f.setAttribute(h,n[h]);o=l?s:o||r,f.onreadystatechange=f.onload=function(){!c&&a(f.readyState)&&(c=1,o(),f.onload=f.onreadystatechange=null)},p(function(){c||(c=1,o(1))},i),u?f.onload():m.parentNode.insertBefore(f,m)},e.yepnope.injectCss=function(e,o,n,i,a,u){var l,i=t.createElement("link"),o=u?s:o||r;i.href=e,i.rel="stylesheet",i.type="text/css";for(l in n)i.setAttribute(l,n[l]);a||(m.parentNode.insertBefore(i,m),p(o,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},Modernizr.addTest("csscalc",function(e,t,o){return t="width:",o="calc(10px);",e=document.createElement("div"),e.style.cssText=t+Modernizr._prefixes.join(o+t),!!e.style.length}),!function(e){e(function(){"use strict";e.support.transition=function(){var e=function(){var e,t=document.createElement("bootstrap"),o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(e in o)if(void 0!==t.style[e])return o[e]}();return e&&{end:e}}()})}(window.jQuery),!function(e){"use strict";function t(){e(n).each(function(){o(e(this)).removeClass("open")})}function o(t){var o,n=t.attr("data-target");return n||(n=t.attr("href"),n=n&&/#/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,"")),o=n&&e(n),o&&o.length||(o=t.parent()),o}var n="[data-toggle=dropdown]",i=function(t){var o=e(t).on("click.dropdown.data-api",this.toggle);e("html").on("click.dropdown.data-api",function(){o.parent().removeClass("open")})};i.prototype={constructor:i,toggle:function(){var n,i,r=e(this);if(!r.is(".disabled, :disabled"))return n=o(r),i=n.hasClass("open"),t(),i||n.toggleClass("open"),r.focus(),!1},keydown:function(t){var i,r,a,s,u;if(/(38|40|27)/.test(t.keyCode)&&(i=e(this),t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled"))){if(a=o(i),s=a.hasClass("open"),!s||s&&27==t.keyCode)return 27==t.which&&a.find(n).focus(),i.click();r=e("[role=menu] li:not(.divider):visible a",a),r.length&&(u=r.index(r.filter(":focus")),38==t.keyCode&&u>0&&u--,40==t.keyCode&&u<r.length-1&&u++,~u||(u=0),r.eq(u).focus())}}};var r=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var o=e(this),n=o.data("dropdown");n||o.data("dropdown",n=new i(this)),"string"==typeof t&&n[t].call(o)})},e.fn.dropdown.Constructor=i,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=r,this},e(document).on("click.dropdown.data-api",t).on("click.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.dropdown-menu",function(e){e.stopPropagation()}).on("click.dropdown.data-api",n,i.prototype.toggle).on("keydown.dropdown.data-api",n+", [role=menu]",i.prototype.keydown)}(window.jQuery),!function(e){"use strict";var t=function(t,o){this.options=o,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this,o=e.Event("show");this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(e("body").addClass("modal-open"),this.isShown=!0,this.escape(),this.backdrop(function(){var o=e.support.transition&&t.$element.hasClass("fade");t.$element.parent().length||t.$element.appendTo(document.body),t.$element.show(),o&&t.$element[0].offsetWidth,t.$element.addClass("in").attr("aria-hidden",!1).focus(),t.enforceFocus(),o?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")}))},hide:function(t){t&&t.preventDefault(),t=e.Event("hide"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,e("body").removeClass("modal-open"),this.escape(),e(document).off("focusin.modal"),this.$element.removeClass("in").attr("aria-hidden",!0),e.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},enforceFocus:function(){var t=this;e(document).on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.focus()})},escape:function(){var e=this;this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.modal",function(t){27==t.which&&e.hide()}):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var t=this,o=setTimeout(function(){t.$element.off(e.support.transition.end),t.hideModal()},500);this.$element.one(e.support.transition.end,function(){clearTimeout(o),t.hideModal()})},hideModal:function(){this.$element.hide().trigger("hidden"),this.backdrop()},removeBackdrop:function(){this.$backdrop.remove(),this.$backdrop=null},backdrop:function(t){var o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=e.support.transition&&o;this.$backdrop=e('<div class="modal-backdrop '+o+'" />').appendTo(document.body),"static"!=this.options.backdrop&&this.$backdrop.click(e.proxy(this.hide,this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),n?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(this.removeBackdrop,this)):this.removeBackdrop()):t&&t()}},e.fn.modal=function(o){return this.each(function(){var n=e(this),i=n.data("modal"),r=e.extend({},e.fn.modal.defaults,n.data(),"object"==typeof o&&o);i||n.data("modal",i=new t(this,r)),"string"==typeof o?i[o]():r.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var o=e(this),n=o.attr("href"),i=e(o.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),r=i.data("modal")?"toggle":e.extend({remote:!/#/.test(n)&&n},i.data(),o.data());t.preventDefault(),i.modal(r).one("hide",function(){o.focus()})})})}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("tooltip",e,t)};t.prototype={constructor:t,init:function(t,o,n){var i,r;this.type=t,this.$element=e(o),this.options=this.getOptions(n),this.enabled=!0,"click"==this.options.trigger?this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this)):"manual"!=this.options.trigger&&(i="hover"==this.options.trigger?"mouseenter":"focus",r="hover"==this.options.trigger?"mouseleave":"blur",this.$element.on(i+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,e.proxy(this.leave,this))),this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(t){return t=e.extend({},e.fn[this.type].defaults,t,this.$element.data()),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},enter:function(t){var o=e(t.currentTarget)[this.type](this._options).data(this.type);return o.options.delay&&o.options.delay.show?(clearTimeout(this.timeout),o.hoverState="in",this.timeout=setTimeout(function(){"in"==o.hoverState&&o.show()},o.options.delay.show),void 0):o.show()},leave:function(t){var o=e(t.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),o.options.delay&&o.options.delay.hide?(o.hoverState="out",this.timeout=setTimeout(function(){"out"==o.hoverState&&o.hide()},o.options.delay.hide),void 0):o.hide()},show:function(){var e,t,o,n,i,r,a;if(this.hasContent()&&this.enabled){switch(e=this.tip(),this.setContent(),this.options.animation&&e.addClass("fade"),r="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,t=/in/.test(r),e.remove().css({top:0,left:0,display:"block"}).appendTo(t?this.$element:document.body),o=this.getPosition(t),n=e[0].offsetWidth,i=e[0].offsetHeight,t?r.split(" ")[1]:r){case"bottom":a={top:o.top+o.height,left:o.left+o.width/2-n/2};break;case"top":a={top:o.top-i,left:o.left+o.width/2-n/2};break;case"left":a={top:o.top+o.height/2-i/2,left:o.left-n};break;case"right":a={top:o.top+o.height/2-i/2,left:o.left+o.width}}e.css(a).addClass(r).addClass("in")}},setContent:function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},hide:function(){function t(){var t=setTimeout(function(){o.off(e.support.transition.end).remove()},500);o.one(e.support.transition.end,function(){clearTimeout(t),o.remove()})}var o=this.tip();return o.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?t():o.remove(),this},fixTitle:function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(t){return e.extend({},t?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var e,t=this.$element,o=this.options;return e=t.attr("data-original-title")||("function"==typeof o.title?o.title.call(t[0]):o.title)},tip:function(){return this.$tip=this.$tip||e(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}},e.fn.tooltip=function(o){return this.each(function(){var n=e(this),i=n.data("tooltip"),r="object"==typeof o&&o;i||n.data("tooltip",i=new t(this,r)),"string"==typeof o&&i[o]()})},e.fn.tooltip.Constructor=t,e.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover",title:"",delay:0,html:!0}}(window.jQuery),!function(e){"use strict";var t=function(e,t){this.init("popover",e,t)};t.prototype=e.extend({},e.fn.tooltip.Constructor.prototype,{constructor:t,setContent:function(){var e=this.tip(),t=this.getTitle(),o=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content > *")[this.options.html?"html":"text"](o),e.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var e,t=this.$element,o=this.options;return e=t.attr("data-content")||("function"==typeof o.content?o.content.call(t[0]):o.content)},tip:function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}}),e.fn.popover=function(o){return this.each(function(){var n=e(this),i=n.data("popover"),r="object"==typeof o&&o;i||n.data("popover",i=new t(this,r)),"string"==typeof o&&i[o]()})},e.fn.popover.Constructor=t,e.fn.popover.defaults=e.extend({},e.fn.tooltip.defaults,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery),!function(e){"use strict";var t='[data-dismiss="alert"]',o=function(o){e(o).on("click",t,this.close)};o.prototype.close=function(t){function o(){n.trigger("closed").remove()}var n,i=e(this),r=i.attr("data-target");r||(r=i.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),n=e(r),t&&t.preventDefault(),n.length||(n=i.hasClass("alert")?i:i.parent()),n.trigger(t=e.Event("close")),t.isDefaultPrevented()||(n.removeClass("in"),e.support.transition&&n.hasClass("fade")?n.on(e.support.transition.end,o):n.slideUp("normal",function(){o()}))},e.fn.alert=function(t){return this.each(function(){var n=e(this),i=n.data("alert");i||n.data("alert",i=new o(this)),"string"==typeof t&&i[t].call(n)})},e.fn.alert.Constructor=o,e(function(){e("body").on("click.alert.data-api",t,o.prototype.close)})}(window.jQuery),!function(e){"use strict";var t=function(t,o){this.$element=e(t),this.options=e.extend({},e.fn.button.defaults,o)};t.prototype.setState=function(e){var t="disabled",o=this.$element,n=o.data(),i=o.is("input")?"val":"html";e+="Text",n.resetText||o.data("resetText",o[i]()),o[i](n[e]||this.options[e]),setTimeout(function(){"loadingText"==e?o.addClass(t).attr(t,t):o.removeClass(t).removeAttr(t)},0)},t.prototype.toggle=function(){var e=this.$element.closest('[data-toggle="buttons-radio"]');e&&e.find(".active").removeClass("active"),this.$element.toggleClass("active")},e.fn.button=function(o){return this.each(function(){var n=e(this),i=n.data("button"),r="object"==typeof o&&o;i||n.data("button",i=new t(this,r)),"toggle"==o?i.toggle():o&&i.setState(o)})},e.fn.button.defaults={loadingText:"loading..."},e.fn.button.Constructor=t,e(function(){e("body").on("click.button.data-api","[data-toggle^=button]",function(t){var o=e(t.target);o.hasClass("btn")||(o=o.closest(".btn")),o.button("toggle")})})}(window.jQuery),!function(e){"use strict";var t=function(t,o){this.$element=e(t),this.options=e.extend({},e.fn.typeahead.defaults,o),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.$menu=e(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").attr("data-value");return this.$element.val(this.updater(e)).change(),this.hide()},updater:function(e){return e},show:function(){var t=e.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:t.top+t.height,left:t.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(){var t;return this.query=this.$element.val(),!this.query||this.query.length<this.options.minLength?this.shown?this.hide():this:(t=e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source,t?this.process(t):this)},process:function(t){var o=this;return t=e.grep(t,function(e){return o.matcher(e)}),t=this.sorter(t),t.length?this.render(t.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(e){return~e.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,o=[],n=[],i=[];t=e.shift();)t.toLowerCase().indexOf(this.query.toLowerCase())?~t.indexOf(this.query)?n.push(t):i.push(t):o.push(t);return o.concat(n,i)},highlighter:function(e){var t=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return e.replace(new RegExp("("+t+")","ig"),function(e,t){return"<strong>"+t+"</strong>"})},render:function(t){var o=this;return t=e(t).map(function(t,n){return t=e(o.options.item).attr("data-value",n),t.find("a").html(o.highlighter(n)),t[0]
}),t.first().addClass("active"),this.$menu.html(t),this},next:function(){var t=this.$menu.find(".active").removeClass("active"),o=t.next();o.length||(o=e(this.$menu.find("li")[0])),o.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),t=e.prev();t.length||(t=this.$menu.find("li").last()),t.addClass("active")},listen:function(){this.$element.on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("keyup",e.proxy(this.keyup,this)),(e.browser.chrome||e.browser.webkit||e.browser.msie)&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this))},move:function(e){if(this.shown){switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:e.preventDefault(),this.prev();break;case 40:e.preventDefault(),this.next()}e.stopPropagation()}},keydown:function(t){this.suppressKeyPressRepeat=!~e.inArray(t.keyCode,[40,38,9,13,27]),this.move(t)},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}e.stopPropagation(),e.preventDefault()},blur:function(){var e=this;setTimeout(function(){e.hide()},150)},click:function(e){e.stopPropagation(),e.preventDefault(),this.select()},mouseenter:function(t){this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")}},e.fn.typeahead=function(o){return this.each(function(){var n=e(this),i=n.data("typeahead"),r="object"==typeof o&&o;i||n.data("typeahead",i=new t(this,r)),"string"==typeof o&&i[o]()})},e.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1},e.fn.typeahead.Constructor=t,e(function(){e("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var o=e(this);o.data("typeahead")||(t.preventDefault(),o.typeahead(o.data()))})})}(window.jQuery);var e,t,o;o=function(){var e,t,n,i,r,a,s,u,l;return r=1e3,e=5,n=60,t=60*n,i=["January","February","March","April","May","June","July","August","September","October","November","December"],a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],u=function(e){var t,o,n,i,r,a;return a=e.getMinutes(),r=e.getHours(),t=r>12?"pm":"am",o=0===r||12===r?"12":""+r%12,n=10>a?"0"+a:""+a,i=""+o+":"+n+t},s=function(e){return i[e.getMonth()]},l=function(e){return a[e.getDay()]},o=function(o){var i,a,c,h,d,f,p,m,g,y,b,v,w,k,_,$,C,x,E;return d=new Date,f=(d.getTime()-o.getTime())/r,h=new Date(d.getFullYear()+1,0,1),a=new Date(d.getFullYear(),d.getMonth(),d.getDate()+(7-d.getDay())),C=new Date(d.getFullYear(),d.getMonth(),d.getDate()+1),g=new Date(d.getFullYear(),d.getMonth(),d.getDate()+2),_=new Date(d.getFullYear(),d.getMonth(),d.getDate()),E=new Date(d.getFullYear(),d.getMonth(),d.getDate()-1),b=new Date(d.getFullYear(),d.getMonth(),d.getDate()-d.getDay()),w=new Date(d.getFullYear(),0,1),c=(d.getTime()-h.getTime())/r,i=(d.getTime()-a.getTime())/r,m=(d.getTime()-g.getTime())/r,$=(d.getTime()-C.getTime())/r,k=(d.getTime()-_.getTime())/r,x=(d.getTime()-E.getTime())/r,y=(d.getTime()-b.getTime())/r,v=(d.getTime()-w.getTime())/r,p=f>=0?e>f?"A few seconds ago":n>f?""+Math.floor(f)+" seconds ago":2*n>f?"About a minute ago":t>f?""+Math.floor(f/n)+" minutes ago":2*t>f?"About an hour ago":k>f?""+Math.floor(f/t)+" hours ago":x>f?"Yesterday at "+u(o):y>f?""+l(o)+" at "+u(o):v>f?""+s(o)+" "+o.getDate()+" at "+u(o):""+s(o)+" "+o.getDate()+", "+o.getFullYear()+" at "+u(o):f>-e?"In a few seconds":f>-n?"In "+Math.floor(-f)+" seconds":f>2*-n?"In about a minute":f>-t?"In "+Math.floor(-f/n)+" minutes":f>2*-t?"In about an hour":f>$?"In "+Math.floor(-f/t)+" hours":f>m?"Tomorrow at "+u(o):f>i?""+l(o)+" at "+u(o):f>c?""+s(o)+" "+o.getDate()+" at "+u(o):""+s(o)+" "+o.getDate()+", "+o.getFullYear()+" at "+u(o)}}(),e=function(e){var t;return t=new Date,t.setTime(e),o(t)},t=function(e){var t;return t=new Date,t.setTime(e),t.getHours()%12+":"+("0"+t.getMinutes()).substr(-2,2)+(t.getHours()>12?"pm":"am")},function(e,t,o){"function"==typeof define&&define.amd?define(["jquery"],function(n){return o(n,e,t),n.mobile}):o(e.jQuery,e,t)}(this,document,function(e,t,o){!function(e){var t={touch:"ontouchend"in o};e.mobile=e.mobile||{},e.mobile.support=e.mobile.support||{},e.extend(e.support,t),e.extend(e.mobile.support,t)}(e),function(e,t,o,n){function i(e){for(;e&&"undefined"!=typeof e.originalEvent;)e=e.originalEvent;return e}function r(t,o){var r,a,s,u,l,c,h,d,f,p=t.type;if(t=e.Event(t),t.type=o,r=t.originalEvent,a=e.event.props,p.search(/^(mouse|click)/)>-1&&(a=A),r)for(h=a.length,u;h;)u=a[--h],t[u]=r[u];if(p.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),-1!==p.search(/^touch/)&&(s=i(r),p=s.touches,l=s.changedTouches,c=p&&p.length?p[0]:l&&l.length?l[0]:n))for(d=0,f=T.length;f>d;d++)u=T[d],t[u]=c[u];return t}function a(t){for(var o,n,i={};t;){o=e.data(t,C);for(n in o)o[n]&&(i[n]=i.hasVirtualBinding=!0);t=t.parentNode}return i}function s(t,o){for(var n;t;){if(n=e.data(t,C),n&&(!o||n[o]))return t;t=t.parentNode}return null}function u(){N=!1}function l(){N=!0}function c(){P=0,q.length=0,M=!1,l()}function h(){u()}function d(){f(),S=setTimeout(function(){S=0,c()},e.vmouse.resetTimerDuration)}function f(){S&&(clearTimeout(S),S=0)}function p(t,o,n){var i;return(n&&n[t]||!n&&s(o.target,t))&&(i=r(o,t),e(o.target).trigger(i)),i}function m(t){var o=e.data(t.target,x);if(!(M||P&&P===o)){var n=p("v"+t.type,t);n&&(n.isDefaultPrevented()&&t.preventDefault(),n.isPropagationStopped()&&t.stopPropagation(),n.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function g(t){var o,n,r=i(t).touches;if(r&&1===r.length&&(o=t.target,n=a(o),n.hasVirtualBinding)){P=B++,e.data(o,x,P),f(),h(),j=!1;var s=i(t).touches[0];O=s.pageX,F=s.pageY,p("vmouseover",t,n),p("vmousedown",t,n)}}function y(e){N||(j||p("vmousecancel",e,a(e.target)),j=!0,d())}function b(t){if(!N){var o=i(t).touches[0],n=j,r=e.vmouse.moveDistanceThreshold,s=a(t.target);j=j||Math.abs(o.pageX-O)>r||Math.abs(o.pageY-F)>r,j&&!n&&p("vmousecancel",t,s),p("vmousemove",t,s),d()}}function v(e){if(!N){l();var t,o=a(e.target);if(p("vmouseup",e,o),!j){var n=p("vclick",e,o);n&&n.isDefaultPrevented()&&(t=i(e).changedTouches[0],q.push({touchID:P,x:t.clientX,y:t.clientY}),M=!0)}p("vmouseout",e,o),j=!1,d()}}function w(t){var o,n=e.data(t,C);if(n)for(o in n)if(n[o])return!0;return!1}function k(){}function _(t){var o=t.substr(1);return{setup:function(){w(this)||e.data(this,C,{});var n=e.data(this,C);n[t]=!0,z[t]=(z[t]||0)+1,1===z[t]&&R.bind(o,m),e(this).bind(o,k),I&&(z.touchstart=(z.touchstart||0)+1,1===z.touchstart&&R.bind("touchstart",g).bind("touchend",v).bind("touchmove",b).bind("scroll",y))},teardown:function(){--z[t],z[t]||R.unbind(o,m),I&&(--z.touchstart,z.touchstart||R.unbind("touchstart",g).unbind("touchmove",b).unbind("touchend",v).unbind("scroll",y));var n=e(this),i=e.data(this,C);i&&(i[t]=!1),n.unbind(o,k),w(this)||n.removeData(C)}}}var $,C="virtualMouseBindings",x="virtualTouchID",E="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),T="clientX clientY pageX pageY screenX screenY".split(" "),D=e.event.mouseHooks?e.event.mouseHooks.props:[],A=e.event.props.concat(D),z={},S=0,O=0,F=0,j=!1,q=[],M=!1,N=!1,I="addEventListener"in o,R=e(o),B=1,P=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var L=0;L<E.length;L++)e.event.special[E[L]]=_(E[L]);I&&o.addEventListener("click",function(t){var o,n,i,r,a,s,u=q.length,l=t.target;if(u)for(o=t.clientX,n=t.clientY,$=e.vmouse.clickDistanceThreshold,i=l;i;){for(r=0;u>r;r++)if(a=q[r],s=0,i===l&&Math.abs(a.x-o)<$&&Math.abs(a.y-n)<$||e.data(i,x)===a.touchID)return t.preventDefault(),t.stopPropagation(),void 0;i=i.parentNode}},!0)}(e,t,o),function(e,t,n){function i(t,o,n){var i=n.type;n.type=o,e.event.handle.call(t,n),n.type=i}e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,o){e.fn[o]=function(e){return e?this.bind(o,e):this.trigger(o)},e.attrFn&&(e.attrFn[o]=!0)});var r=e.mobile.support.touch,a="touchmove scroll",s=r?"touchstart":"mousedown",u=r?"touchend":"mouseup",l=r?"touchmove":"mousemove";e.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){o=t,i(r,o?"scrollstart":"scrollstop",e)}var o,n,r=this,s=e(r);s.bind(a,function(i){e.event.special.scrollstart.enabled&&(o||t(i,!0),clearTimeout(n),n=setTimeout(function(){t(i,!1)},50))})}},e.event.special.tap={tapholdThreshold:750,setup:function(){var t=this,n=e(t);n.bind("vmousedown",function(r){function a(){clearTimeout(l)}function s(){a(),n.unbind("vclick",u).unbind("vmouseup",a),e(o).unbind("vmousecancel",s)}function u(e){s(),c===e.target&&i(t,"tap",e)}if(r.which&&1!==r.which)return!1;var l,c=r.target;r.originalEvent,n.bind("vmouseup",a).bind("vclick",u),e(o).bind("vmousecancel",s),l=setTimeout(function(){i(t,"taphold",e.Event("taphold",{target:c}))},e.event.special.tap.tapholdThreshold)})}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,setup:function(){var t=this,o=e(t);o.bind(s,function(t){function i(t){if(s){var o=t.originalEvent.touches?t.originalEvent.touches[0]:t;r={time:(new Date).getTime(),coords:[o.pageX,o.pageY]},Math.abs(s.coords[0]-r.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault()}}var r,a=t.originalEvent.touches?t.originalEvent.touches[0]:t,s={time:(new Date).getTime(),coords:[a.pageX,a.pageY],origin:e(t.target)};o.bind(l,i).one(u,function(){o.unbind(l,i),s&&r&&r.time-s.time<e.event.special.swipe.durationThreshold&&Math.abs(s.coords[0]-r.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(s.coords[1]-r.coords[1])<e.event.special.swipe.verticalDistanceThreshold&&s.origin.trigger("swipe").trigger(s.coords[0]>r.coords[0]?"swipeleft":"swiperight"),s=r=n})})}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(t,o){e.event.special[t]={setup:function(){e(this).bind(o,e.noop)}}})}(e,this)});var i=window.bootbox||function(e,t){function o(e,t){return null==t&&(t=n),"string"==typeof h[t][e]?h[t][e]:t!=i?o(e,i):e}var n="en",i="en",r=!0,a="static",s="javascript:;",u="",l={},c={};c.setLocale=function(e){for(var t in h)if(t==e)return n=e,void 0;throw new Error("Invalid locale: "+e)},c.addLocale=function(e,t){"undefined"==typeof h[e]&&(h[e]={});for(var o in t)h[e][o]=t[o]},c.setIcons=function(e){l=e,("object"!=typeof l||null==l)&&(l={})},c.alert=function(){var e="",t=o("OK"),n=null;switch(arguments.length){case 1:e=arguments[0];break;case 2:e=arguments[0],"function"==typeof arguments[1]?n=arguments[1]:t=arguments[1];break;case 3:e=arguments[0],t=arguments[1],n=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return c.dialog(e,{label:t,icon:l.OK,callback:n},{onEscape:n||!0})},c.confirm=function(){var e="",t=o("CANCEL"),n=o("CONFIRM"),i=null;switch(arguments.length){case 1:e=arguments[0];break;case 2:e=arguments[0],"function"==typeof arguments[1]?i=arguments[1]:t=arguments[1];break;case 3:e=arguments[0],t=arguments[1],"function"==typeof arguments[2]?i=arguments[2]:n=arguments[2];break;case 4:e=arguments[0],t=arguments[1],n=arguments[2],i=arguments[3];break;default:throw new Error("Incorrect number of arguments: expected 1-4")}var r=function(){"function"==typeof i&&i(!1)},a=function(){"function"==typeof i&&i(!0)};return c.dialog(e,[{label:t,icon:l.CANCEL,callback:r},{label:n,icon:l.CONFIRM,callback:a}],{onEscape:r})},c.prompt=function(){var e="",n=o("CANCEL"),i=o("CONFIRM"),r=null,a="";switch(arguments.length){case 1:e=arguments[0];break;case 2:e=arguments[0],"function"==typeof arguments[1]?r=arguments[1]:n=arguments[1];break;case 3:e=arguments[0],n=arguments[1],"function"==typeof arguments[2]?r=arguments[2]:i=arguments[2];break;case 4:e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3];break;case 5:e=arguments[0],n=arguments[1],i=arguments[2],r=arguments[3],a=arguments[4];break;default:throw new Error("Incorrect number of arguments: expected 1-5")}var s=e,u=t("<form></form>");u.append("<input autocomplete=off type=text value='"+a+"' />");var h=function(){"function"==typeof r&&r(null)},d=function(){"function"==typeof r&&r(u.find("input[type=text]").val())},f=c.dialog(u,[{label:n,icon:l.CANCEL,callback:h},{label:i,icon:l.CONFIRM,callback:d}],{header:s,show:!1,onEscape:h});return f.on("shown",function(){u.find("input[type=text]").focus(),u.on("submit",function(e){e.preventDefault(),f.find(".btn-primary").click()})}),f.modal("show"),f},c.dialog=function(o,n,i){var l="",c=[],i=i||{};null==n?n=[]:"undefined"==typeof n.length&&(n=[n]);for(var h=n.length;h--;){var d=null,f=null,p=null,m="",g=null;if("undefined"==typeof n[h].label&&"undefined"==typeof n[h]["class"]&&"undefined"==typeof n[h].callback){var y=0,b=null;for(var v in n[h])if(b=v,++y>1)break;1==y&&"function"==typeof n[h][v]&&(n[h].label=b,n[h].callback=n[h][v])}"function"==typeof n[h].callback&&(g=n[h].callback),n[h]["class"]?p=n[h]["class"]:h==n.length-1&&n.length<=2&&(p="btn-primary"),d=n[h].label?n[h].label:"Option "+(h+1),n[h].icon&&(m="<i class='"+n[h].icon+"'></i> "),f=n[h].href?n[h].href:s,l="<a data-handler='"+h+"' class='btn "+p+"' href='"+f+"'>"+m+d+"</a>"+l,c[h]=g}var w=["<div class='bootbox modal' tabindex='-1' style='overflow:hidden;'>"];if(i.header){var k="";("undefined"==typeof i.headerCloseButton||i.headerCloseButton)&&(k="<a href='"+s+"' class='close'>&times;</a>"),w.push("<div class='modal-header'>"+k+"<h3>"+i.header+"</h3></div>")}w.push("<div class='modal-body'></div>"),l&&w.push("<div class='modal-footer'>"+l+"</div>"),w.push("</div>");var _=t(w.join("\n")),$="undefined"==typeof i.animate?r:i.animate;$&&_.addClass("fade");var C="undefined"==typeof i.classes?u:i.classes;return C&&_.addClass(C),_.find(".modal-body").html(o),_.on("hidden",function(){_.remove()}),_.on("keyup.dismiss.modal",function(e){27==e.which&&i.onEscape&&("function"==typeof i.onEscape&&i.onEscape(),_.modal("hide"))}),_.on("shown",function(){_.find("a.btn-primary:first").focus()}),_.on("click",".modal-footer a, a.close",function(e){var o=t(this).data("handler"),i=c[o],r=null;("undefined"==typeof o||"undefined"==typeof n[o].href)&&(e.preventDefault(),"function"==typeof i&&(r=i()),r!==!1&&_.modal("hide"))}),t("body").append(_),_.modal({backdrop:"undefined"==typeof i.backdrop?a:i.backdrop,keyboard:!1,show:!1}),_.on("show",function(){t(e).off("focusin.modal")}),("undefined"==typeof i.show||i.show===!0)&&_.modal("show"),_},c.modal=function(){var e,o,n,i={onEscape:null,keyboard:!0,backdrop:a};switch(arguments.length){case 1:e=arguments[0];break;case 2:e=arguments[0],"object"==typeof arguments[1]?n=arguments[1]:o=arguments[1];break;case 3:e=arguments[0],o=arguments[1],n=arguments[2];break;default:throw new Error("Incorrect number of arguments: expected 1-3")}return i.header=o,n="object"==typeof n?t.extend(i,n):i,c.dialog(e,[],n)},c.hideAll=function(){t(".bootbox").modal("hide")},c.animate=function(e){r=e},c.backdrop=function(e){a=e},c.classes=function(e){u=e};var h={en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"}};return c}(document,window.jQuery);window.bootbox=i,String.prototype.toTitleCase=function(){var e=/^(a|an|and|as|at|but|by|en|for|if|in|of|on|or|the|to|vs?\.?|via)$/i;return this.replace(/([^\W_]+[^\s-]*) */g,function(t,o,n,i){return n>0&&n+o.length!==i.length&&o.search(e)>-1&&":"!==i.charAt(n-2)&&i.charAt(n-1).search(/[^\s-]/)<0?t.toLowerCase():o.substr(1).search(/[A-Z]|\../)>-1?t:t.charAt(0).toUpperCase()+t.substr(1)})};var n,r,a=[].slice;window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(function(){return e(+new Date)},1e3/60)}),Date.now||(Date.now=function(){return(new Date).valueOf()}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),window.clone_shallow=function(e){var t,o;o={};for(t in e)o[t]=e[t];return o},RegExp.quote=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},jQuery.fn.disable=function(e){return e=!!e,$(this).each(function(){return $(this).prop("disabled")!==e?$(this).prop("disabled",e):void 0})},function(){var e,t,o,n,i,r,a,s,u,l,c;for(n=null!=(u=window.location.search)?u.substr(1):void 0,r=n.split("&"),o=function(){var o,n,a,s;for(s=[],o=0,n=r.length;n>o;o++)t=r[o],s.push((a=t.split("="),e=a[0],i=a[1],a));return s}(),window.location.query={},c=[],a=0,s=o.length;s>a;a++)l=o[a],e=l[0],i=l[1],c.push(window.location.query[e]=i);return c}(),jQuery.cookie=function(e,t,o){var n,i,r,a,s,u,l,c,h,d;if("undefined"!=typeof t)return o=o||{},null===t&&(t="",o.expires=-1),u="",o.expires&&("number"==typeof o.expires||o.expires.toUTCString)&&("number"==typeof o.expires?(a=new Date,a.setTime(a.getTime()+1e3*60*60*24*o.expires)):a=o.expires,u="; expires="+a.toUTCString()),l=o.path?"; path="+o.path:"",s=o.domain?"; domain="+o.domain:"",c=o.secure?"; secure="+o.secure:"",document.cookie=[e,"=",encodeURIComponent(t),u,l,s,c].join("");if(i=null,document.cookie&&""!==document.cookie)for(r=document.cookie.split(";"),h=0,d=r.length;d>h;h++)if(n=r[h],n=jQuery.trim(n),n.substring(0,e.length+1)===""+e+"="){i=decodeURIComponent(n.substring(e.length+1));break}return i},jQuery.fn.capQueue=function(){var e;return e=$(this).queue("fx"),e&&e.splice(1,e.length),$(this)},jQuery.fn.firework=function(e){var t,o,n,i,r,a,s,u,l,c,h,d,f,p;for(f=this.position(),l=f.top,i=f.left,i+=jQuery(window).width()*Math.random(),l+=jQuery(window).height()*Math.random(),this.dequeue(),p=[],n=d=0;50>d;n=++d)t=6.294*Math.random(),u=Math.min(100,150*Math.random()),c=u*Math.cos(t),h=u*Math.sin(t),r=2*Math.random(),a=5,o=Math.random()*a,s=jQuery("<div>").css({position:"fixed","background-color":e,width:a,height:a,"border-radius":a,top:l,left:i}),"#fff"===e&&s.css("box-shadow","0px 0px 5px #000"),p.push(s.appendTo("body").animate({left:"+="+c*r,top:"+="+h*r,width:o,height:o},{duration:1e3*r,complete:function(){return $(this).remove()}}));return p},jQuery.fn.fireworks=function(e,t){var o,n,i,r,a,s=this;for(null==e&&(e=5),o=0,a=[],i=r=0;e>=0?e>r:r>e;i=e>=0?++r:--r)n=0===i?500:2e3*Math.random(),a.push(this.delay(n).queue(function(){var e;return e=t?t(o):"#"+Math.random().toString(16).slice(2,8),s.firework(e),o++}));return a},$(window).resize(function(){return $(".expando").each(function(){var e,t,o,n,i,r,a,s;for(e=0,s=$(this).find(".add-on, .padd-on"),r=0,a=s.length;a>r;r++)t=s[r],e+=$(t).outerWidth();return i=$(this).width(),o=$(this).find("input, .input"),n=o.hasClass("input")?0:o.outerWidth()-o.width(),Modernizr.csscalc?(o.css("width","-webkit-calc(100% - "+(n+e)+"px)"),o.css("width","-moz-calc(100% - "+(n+e)+"px)"),o.css("width","-o-calc(100% - "+(n+e)+"px)"),o.css("width","calc(100% - "+(n+e)+"px)")):o.width(i-n-e)})}),$(window).resize(),setTimeout(function(){return $(window).resize()},762),setTimeout(function(){return $(window).resize()},2718),setTimeout(function(){return $(window).resize()},6022),function(){var e,t,o;return t=new Date,t.setFullYear(t.getFullYear()+1),t.setHours(0),t.setMonth(0),t.setMinutes(0),t.setSeconds(0),t.setDate(1),o=t-Date.now(),2147483647>o&&setTimeout(function(){return $("body").fireworks(25)},o),t=new Date,t.setHours(0),t.setMonth(6),t.setDate(4),t.setMinutes(0),t.setSeconds(0),o=t-Date.now(),2147483647>o&&o>0&&setTimeout(function(){return $("body").fireworks(25)},o),e=new Date,e.setHours(16),e.setMinutes(20),e.setSeconds(0),e.setMonth(3),e.setDate(20),o=e-Date.now(),2147483647>o&&o>0&&setTimeout(function(){return Lt("pass the weed, man")},o),e=new Date,e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMonth(8),e.setDate(5),o=e-Date.now(),2147483647>o&&o>0?setTimeout(function(){return N($("<div>").addClass("alert alert-info").html("Today is protobowl developer <b>Ben Vest</b>'s birthday. Send him an email at <code>vestben@gmail.com</code> or something."))},o):void 0}(),r=function(e){var t,o;if(null!=e?e.split:void 0)return o=e.split("."),t=function(){var e,t,n,i,r,s,u,l;for(r=1<=arguments.length?a.call(arguments,0):[],s=0,l=r.length;l>s;s++){for(n=r[s],i=n.split("."),t=0,e=u=0;4>=u;e=++u)"x"!==i[e]&&i[e]!==o[e]&&t++;if(0===t)return!0}return!1},t("129.65.x.x","207.62.x.x","198.188.x.x")?$("a.brand strong").text("Poly"):void 0},n=function(){var e,t,o;return e=new Date,24!==(o=e.getDate())&&25!==o||11!==e.getMonth()?1===e.getMonth()&&0===e.getDay()&&e.getDate()<=7?$("a.brand strong").text("Super"):1===e.getMonth()&&24===e.getDate()&&2017===e.getFullYear()?$("a.brand strong").text("Spiciest Meme"):2===e.getMonth()&&16===e.getDate()?$("a.brand .motto").text("Happy √10 day!"):2===e.getMonth()&&15===e.getDate()?$("a.brand strong").text("Dead Caesar"):3===e.getMonth()&&22===e.getDate()?($("body").addClass("earthday"),$("a.brand .motto").text("growing one thing and growing it well")):9===e.getMonth()&&3===e.getDate()?$("a.brand .motto").text("“On October 3rd, he asked me what day it was. It's October 3rd.”"):4===e.getMonth()&&25===e.getDate()?($("a.brand strong").text("Towel"),$("a.brand .motto").text("A towel is about the most massively useful thing an interstellar hitchhiker can have.")):7===e.getMonth()&&28===e.getDate()?$("a.brand .motto").html("on August 28, 2012, protobowl was first <a href='http://hsquizbowl.org/forums/viewtopic.php?f=123&t=13478'>announced</a>"):5===e.getMonth()&&30===e.getDate()?$("a.brand .motto").html("protobowl's precursor, <a href='https://github.com/polarcuke/its-ac-attack'>its-ac-attack</a> was started June 30, 2012"):6===e.getMonth()&&20===e.getDate()?$("a.brand .motto").text("the first line of protobowl code was written July 20, 2012"):6===e.getMonth()&&4===e.getDate()?($("body").addClass("murrica"),$("a.brand .motto").text("Happy "+(e.getFullYear()-1776)+"th Birthday, America!").click(function(e){return $("body").fireworks(3,function(e){return["#9d0101","#fff","#447ba9"][e]}),e.preventDefault()})):8===e.getMonth()&&19===e.getDate()?($("a.brand strong").text("Protaaarrr"),$("a.brand .motto").text("Ahoy, me hearties!")):10===e.getMonth()&&4===e.getDay()&&e.getDate()>21?($("a.brand strong").text("Turkey"),$("a.brand .motto").text("doing one thing and doing it on thanksgiving"),$(".expand-timer").text("Oven Timer"),$(".chatbtn")[0].childNodes[1].nodeValue="Gobble",$(".buzzbtn")[0].childNodes[1].nodeValue="Squawk",$(".leaderboard thead th").eq(1).text("Pilgrims")):3===e.getMonth()&&1===e.getDate()?($("a.brand").html('<u><b>Quizbowl DB</b></u> <em style="font-size:small">Welcome to Quizbowl DB, the best way to get better at quizbowl!</em>'),$("body").addClass("aprilfools")):9===e.getMonth()&&31===e.getDate()?($("body").addClass("halloween"),$("a.brand strong").text("Spooky"),$("a.brand .motto").text("Happy Halloween!"),setTimeout(function(){return $("a.brand .motto").text("Happy Halloween! Boo!"),$(".buzzbtn")[0].childNodes[1].nodeValue="Boo!"},3e3+7e3*Math.random())):(t=new Date,t.setDate(e.getDate()+1),t.setHours(0),t.setMinutes(0),t.setSeconds(0),setTimeout(n,Math.max(100,t-Date.now()))):($("body").addClass("christmas"),$("a.brand .motto").text("doing one thing and doing it during the holidays"))},n(),("undefined"==typeof console||null===console)&&(window.console={log:function(){return null},warn:function(){return null},debug:function(){return null},time:function(){return null},timeEnd:function(){return null},dir:function(){return null},assert:function(){return null},trace:function(){return null},error:function(){return null}}),Array.prototype.map||(Array.prototype.map=function(e,t){var o,n,i,r,a,s,u;if(i=void 0,o=void 0,r=void 0,"undefined"==typeof this||null===this)throw new TypeError(" this is null or not defined");if(n=Object(this),s=n.length>>>0,"function"!=typeof e)throw new TypeError(e+" is not a function");for(t&&(i=t),o=new Array(s),r=0;s>r;)a=void 0,u=void 0,r in n&&(a=n[r],u=e.call(i,a,r,n),o[r]=u),r++;return o});var s,u,l,h,c;s=null,u=null,l=function(e){var t,o,n,i;e?jQuery.cookie("protoauth",e):"undefined"!=typeof e&&jQuery.cookie("protoauth","");try{i=jQuery.cookie("protoauth").split("&"),n=i[0],t=i[1],u=JSON.parse(decodeURIComponent(t))}catch(r){o=r,u=null}return $("body").toggleClass("authenticated",!!u),$("#userinfo").is(":hidden")||!!u===$("#user").is(":hidden")?$("#userinfo").fadeOut("normal",function(){return u?($("#signin").hide(),$(".user-name").text(u.email),$("#user").show(),$("#userinfo").fadeIn()):($("#signin").show(),$("#user").hide(),$("#userinfo").fadeIn())}):void 0},l(),$(document).ready(function(){var e;return("undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config.auth:void 0)?"undefined"!=typeof navigator&&null!==navigator?null!=(e=navigator.id)?e.watch({loggedInUser:null!=u?u.email:void 0,onlogin:function(e){return s=e,ao()&&ho?go.link({assertion:s,audience:location.protocol+"//"+location.host+"/"}):void 0},onlogout:function(){return s=null,u&&(Z({verb:"logging out of the current authenticated session"}),c()),l(null)}}):void 0:void 0:void 0}),h=function(e){var t,o;return s=null,t=function(){return Z({verb:"logging in and beginning a new authenticated session"}),"function"==typeof l&&l(e.cookie),c()},"okay"!==(null!=e?e.status:void 0)?(Z({verb:"server rejected login request: "+(null!=e?e.reason:void 0)}),"undefined"!=typeof navigator&&null!==navigator?null!=(o=navigator.id)?o.logout():void 0:void 0):e.cookie?(null!=e?e.exists:void 0)||u||go.score()<100?(u||go.accelerate_cleanup(),t()):i.dialog("<h4>Would you like to transfer your current score to your authenticated account?</h4> <p>This will allow you to play as the same user on multiple computers and allow your score to persist beyond cookie clears. While your score may still be deleted after a period of inactivity in popular rooms, you will be last in line for eviction.<p> <em>Note that if you log out of your current session, you will not be able to play as the current user without logging back in.</em>",[{label:"Don't Transfer","class":"btn",callback:function(){return go.accelerate_cleanup(),t(),!0}},{label:"Transfer to "+e.email,"class":"btn-primary",callback:function(){return go.transfer_account(e.cookie),t(),!0}}]):void 0},c=function(){return xo?(xo.hide_disconnect=!0,xo.socket.disconnect(),_o.users={},xo.socket.reconnect(),xo.hide_disconnect=!1):void 0},$("a[href='#signin']").click(function(e){var t;return"undefined"!=typeof navigator&&null!==navigator&&null!=(t=navigator.id)&&t.request(),e.preventDefault()}),$("a[href='#logout']").click(function(e){var t;return"undefined"!=typeof navigator&&null!==navigator&&null!=(t=navigator.id)&&t.logout(),e.preventDefault()});var d,f=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1},a=[].slice;d=function(){function e(e,t){this.id=t,this.room=e,this.corrects={},this.wrongs={},this.prompts=0,this.earlyseen=0,this.seen=0,this.streak=0,this.streak_record=0,this.negstreak=0,this.negstreak_record=0,this.history=[],this.time_spent=0,this.last_action=this.room.serverTime(),this.last_session=this.room.serverTime(),this.created=this.room.serverTime(),this.idle=!1,this.times_buzzed=0,this.team="",this.banned=0,this.auth=null,this.moderator=!1,this.bubble=0,this.prefs={typing:!0},this.room.dystopia&&(this.prefs.distraction=!0),this.lock=!1,this.muwave=!1,this.__recent_actions=[],this.__rate_limited=0}return e.prototype.link=function(){return this.room.log("QuizPlayer.link(name) not implemented")},e.prototype.emit=function(){return this.room.log("QuizPlayer.emit(name, data) not implemented")},e.prototype.modlog=function(){return null},e.prototype.touch=function(e){var t,o;return this.idle=!1,t=this.room.serverTime(),e||(o=t-this.last_action,6e5>o&&(this.time_spent+=o)),this.last_action=t,this.room.touch(),this.room.check_timeout()},e.prototype.active=function(){return this.online()&&this.room.serverTime()-this.last_action<6e5&&!this.idle},e.prototype.online=function(){return!0},e.prototype.level=function(){var e,t;return e=this.room.acl,"_"===this.id[0]?e.ninja:this.moderator?e.moderator:(null!=(t=this.elect)?t.term:void 0)>this.room.serverTime()?e.elected:this.room.locked()?this.score()>=50?e.fifty:this.score()>0?e.positive:e.baseline:e.unlocked},e.prototype.authorized=function(e){return null==e&&(e=this.room.escalate),"string"==typeof e&&(e=this.room.acl[e]),this.level()>=e},e.prototype.score=function(){var e,t,o,n,i,r;n=0,i=this.room.scoring;for(e in i)r=i[e],o=r[0],t=r[1],n+=(this.corrects[e]||0)*o+(this.wrongs[e]||0)*t;return n},e.prototype.metrics=function(){var e,t,o,n,i,r;return t=.001,n=this.room.scoring,e=function(e){var t,o;o=0;for(t in n)o+=e[t]||0;return o},o={score:this.score(),seen:this.seen,correct:e(this.corrects),wrong:e(this.wrongs)},o.guesses=o.correct+o.wrong,o.precision=o.correct/(o.guesses+t),o.recall=o.correct/(o.seen+t),o.f1=2*o.precision*o.recall/(o.precision+o.recall+t),(null!=(i=this.room)?null!=(r=i.scoring)?r.interrupt:void 0:void 0)&&(o.interrupts=(this.wrongs.interrupt||0)+(this.wrongs.early||0),o.early=this.corrects.early||0),o},e.prototype.reset_score=function(){var e;return e=this.metrics(),this.verb("was reset from "+this.score()+" points ("+e.correct+" correct, "+e.wrong+" wrong, "+e.guesses+" guesses)"),this.negstreak_record=this.negstreak=this.streak_record=this.streak=this.earlyseen=this.seen=0,this.wrongs={},this.corrects={},this.history=[],this.sync(!0)},e.prototype.bookmark=function(e){var t,o;return o=e.value,t=e.id,0},e.prototype.ban=function(){return 1},e.prototype.rate_limited=function(){var e,t,o,n,i,r,a,s,u,l,c,h,d;if(l=function(){var e,t;e=this.room.users,t=[];for(o in e)s=e[o],"_"!==o[0]&&s.active()&&t.push(o);return t}.call(this),e=856,l.length<=2&&(e=612),r=316,u=10,t=this.room.serverTime(),this.__recent_actions=this.__recent_actions.slice(-u),this.__recent_actions.length===u){for(i=0,d=this.__recent_actions,c=0,h=d.length;h>c;c++)a=d[c],i+=a;if(n=t-i/u,u*r/2>n&&this.throttle(),u*e/2>n)return!0}},e.prototype.throttle=function(){var e;return e=this.room.serverTime()+5e3,e-this.__rate_limited>762&&(this.emit("throttle",this.__rate_limited),this.__recent_actions.push(this.room.serverTime())),this.__rate_limited=e},e.prototype.rate_limit=function(){return this.__recent_actions.push(this.room.serverTime()),this.rate_limited()?this.create_tribunal():void 0},e.prototype.reprimand=function(e){var t,o,n,i;return o=e.user,t=e.reason,(t=this.check_reprimand(o))?(this.notify(t),void 0):this.reprimand_embargo>this.room.serverTime()?(this.notify("can not reprimand anyone for "+Math.ceil((this.reprimand_embargo-this.room.serverTime())/1e3)+" seconds"),void 0):(this.authorized(this.room.acl.moderator)||(this.reprimand_embargo=this.room.serverTime()+6e4,this.sync()),null!=(n=this.room.users[o])&&n.emit("reprimand",{trigger:this.id,time:this.room.serverTime(),reason:t}),null!=(i=this.room.users[o])&&(i.__reprimanded=Date.now()),this.notify("issued a reprimand to !@"+o))},e.prototype.gestapo=function(e){var t,o,n,i;if("string"==typeof e&&this.room.dystopia){for(i=[/\bni+gg+e+r\b/i,/\bn\s*i\s*g\s*g\s*e\s*r\b/i,/\bnigga\b/i,/\bbitch\b/i,/\bwhore\b/i],o=0,n=i.length;n>o;o++)if(t=i[o],e.match(t))return this.ban(3e5),this.sync(!0),!0;return!1}},e.prototype.nominate=function(){var e,t,o,n,i=this;return this.touch(),this.room.escalate>this.room.acl.unlocked?void 0:this.elect_embargo&&this.elect_embargo>this.room.serverTime()?(this.notify("can not run for reelection for another "+Math.ceil((this.elect_embargo-this.room.serverTime())/6e4)+" minutes"),void 0):this.elect?void 0:(e=this.room.serverTime(),n=function(){var e,n;
e=this.room.users,n=[];for(t in e)o=e[t],"_"!==t[0]&&o.active()&&!o.prefs.distraction&&n.push(t);return n}.call(this),this.__elect_timeout=setTimeout(function(){return i.verb("got romneyed",!0),i.elect_embargo=i.room.serverTime()+24e4,i.elect=null,i.sync(!0)},6e4),this.elect={votes:[],against:[],time:e,witnesses:n},this.vote_election({user:this.id,position:"elect"}))},e.prototype.create_tribunal=function(e){var t,o,n,i,r,a,s=this;if(null==e&&(e=!1),this.touch(),!this.tribunal){if(t=this.room.serverTime(),i=function(){var e,t;e=this.room.users,t=[];for(o in e)n=e[o],"_"!==o[0]&&n.active()&&!n.prefs.distraction&&t.push(o);return t}.call(this),i.length<=1)return;return this.room.users[null!=(r=this.tribunal)?r.initiator:void 0]&&!this.room.users[null!=(a=this.tribunal)?a.initiator:void 0].authorized("moderator")&&(this.room.users[this.tribunal.initiator].tribunal_embargo=this.room.serverTime()+6e4),this.__tribunal_timeout=setTimeout(function(){var e,t;return s.room.users[null!=(e=s.tribunal)?e.initiator:void 0]&&!s.room.users[null!=(t=s.tribunal)?t.initiator:void 0].authorized("moderator")&&(s.room.users[s.tribunal.initiator].tribunal_embargo=s.room.serverTime()+24e4,s.room.users[s.tribunal.initiator].sync()),s.verb("survived the tribunal",!0),s.tribunal=null,s.sync(!0)},6e4),this.tribunal={votes:[],against:[],time:t,witnesses:i,term:0,initiator:e},this.sync(!0)}},e.prototype.check_reprimand=function(){var e;return this.authorized("elected")?null:(e=(this.room.serverTime()-this.last_session)/1e3,600>e?"has not been online for long enough to reprimand users":this.score()<=20?"score is too low to reprimand others":null)},e.prototype.check_tribunal=function(e){var t,o,n;return this.authorized("elected")?null:this.room.admin_online()?"can not create tribunal when admin is online":this.score()<=20?"score is too low to launch tribunal":this.room.active_count()>2?(t=(this.room.serverTime()-this.last_session)/1e3,600>t?"has not been online for long enough to start a tribunal":3e5>(o=Date.now()-((null!=(n=this.room.users[e])?n.__reprimanded:void 0)||0))&&o>1e4?e===this.id?"is somewhat of a masochist":this.tribunal_embargo&&this.tribunal_embargo>this.room.serverTime()?"can not trigger a ban tribunal for another "+Math.ceil((this.tribunal_embargo-this.room.serverTime())/6e4)+" minutes":this.room.users[e].authorized("moderator")?"cannot fell a god with a mortal sword":null:"can not start tribunal before !@"+e+" has been formally reprimanded"):"too few active players to run tribunal"},e.prototype.trigger_tribunal=function(e){var t,o,n;return this.touch(),e&&(null!=(o=this.room)?o.users[e]:void 0)?(t=this.check_tribunal(e))?(this.notify(t),void 0):(this.secret_verb(e,"created a ban tribunal for !@"+e),null!=(n=this.room.users[e])?n.create_tribunal(this.id):void 0):void 0},e.prototype.ban_user=function(e){var t,o,n,i;return this.authorized("moderator")?((!(null!=(t=this.room.users[e])?t.banned:void 0)||this.room.serverTime()>(null!=(o=this.room.users[e])?o.banned:void 0))&&this.verb("banned !@"+e+" from /"+this.room.name,!0),this.modlog("ban","banned @"+e+" ("+!(null!=(n=this.room.users[e])?n.name:void 0)+") from /"+this.room.name),null!=(i=this.room.users[e])?i.ban(9e5):void 0):void 0},e.prototype.vote_election=function(e){var t,o,n,i,r,a,s,u,l,c,h,d,p,m,g,y,b,v;if(l=e.user,r=e.position,this.touch(),o=null!=(p=this.room.users[l])?p.elect:void 0){if(!o.term){if(c=o.votes,t=o.against,d=o.witnesses,m=this.id,f.call(d,m)<0)return;if(g=this.id,f.call(c,g)>=0||(y=this.id,f.call(t,y)>=0))return;return"elect"===r?c.push(this.id):"deny"===r?t.push(this.id):this.verb("voted from a diebold machine"),c.length>d.length/2+t.length&&(a=6e4,d=function(){var e,t;e=this.room.users,t=[];for(n in e)s=e[n],"_"!==n[0]&&s.active()&&t.push(n);return t}.call(this),this.room.users[l].elect={impeach:[],witnesses:d,term:this.room.serverTime()+a},this.room.users[l].inaugurate()),u=d.length-t.length-c.length,c.length+u<=d.length/2+t.length&&(this.room.users[l].verb("was not elected",!0),this.room.users[l].elect_embargo=this.room.serverTime()+6e5,this.room.users[l].impeach()),this.room.users[l].sync(!0)}if(o.term>this.room.serverTime()){if(i=o.impeach,d=o.witnesses,b=this.id,f.call(d,b)<0)return;if(v=this.id,f.call(i,v)>=0)return;if("impeach"===r)return i.push(this.id),h=Math.floor(d.length/2+1)-i.length,0>=h?(this.room.users[l].verb("was impeached from office",!0),this.room.users[l].impeach()):this.room.users[l].sync(!0)}}},e.prototype.inaugurate=function(){var e,t=this;if(null!=(e=this.elect)?e.term:void 0)return clearTimeout(this.__elect_timeout),this.__elect_timeout=setTimeout(function(){return t.verb("is no longer commander in chief",!0),t.impeach()},this.elect.term-this.room.serverTime())},e.prototype.impeach=function(){return this.elect=null,clearTimeout(this.__elect_timeout),this.sync(!0)},e.prototype.finish_term=function(){var e;if(null!=(e=this.elect)?e.term:void 0)return this.verb("has finished tenure in office",!0),this.impeach()},e.prototype.vote_tribunal=function(e){var t,o,n,i,r,a,s,u,l,c,h,d,p;if(r=e.user,o=e.position,n=null!=(u=this.room.users[r])?u.tribunal:void 0){if(a=n.votes,t=n.against,s=n.witnesses,l=this.id,f.call(s,l)<0)return;if(c=this.id,f.call(a,c)>=0||(h=this.id,f.call(t,h)>=0))return;return"ban"===o?(a.push(this.id),this.secret_verb(r,"voted to ban !@"+r)):"free"===o?(t.push(this.id),this.secret_verb(r,"voted to free !@"+r)):this.secret_verb(r,"voted with a hanging chad"),a.length>(s.length-1)/2+t.length&&(this.modlog("tribunal","user was banned by vote @"+r),this.room.users[r].secret_verb(r,"got voted off the island"),clearTimeout(this.room.users[r].__tribunal_timeout),this.room.users[r].tribunal=null,this.room.users[r].ban(9e5)),i=s.length-t.length-a.length-1,a.length+i<=(s.length-1)/2+t.length&&(this.room.users[null!=(d=this.room.users[r])?null!=(p=d.tribunal)?p.initiator:void 0:void 0]&&(this.room.users[this.room.users[r].tribunal.initiator].tribunal_embargo=this.room.serverTime()+48e4),this.modlog("tribunal","user was freed @"+r),this.room.users[r].verb("was freed because of a hung jury",!0),this.room.users[r].tribunal=null,clearTimeout(this.room.users[r].__tribunal_timeout)),this.room.users[r].sync(!0)}},e.prototype.secret_verb=function(e,t){var o,n,i,r,a;n={user:this.id,verb:t,time:this.room.serverTime()},r=this.room.users,a=[];for(o in r)i=r[o],o!==e?a.push(i.emit("log",n)):a.push(void 0);return a},e.prototype.verb=function(e,t){return"_"===this.id.toString()[0]?this.notify(e):(t||this.rate_limit(),this.room.escalate>=this.room.acl.moderator&&this.authorized()&&!t&&this.modlog("verb",e),this.room.emit("log",{user:this.id,verb:e,time:this.room.serverTime()}))},e.prototype.notify=function(e){return this.emit("log",{user:this.id,verb:e,time:this.room.serverTime(),notify:!0})},e.prototype.disconnect_all=function(){return this.room.log("QuizPlayer::disconnect_all() not implemented")},e.prototype.disconnected=function(){var e;return this.touch(),0===this.sockets.length&&(e=(this.room.serverTime()-this.last_session)/1e3,e>90?this.verb("left the room (logged on "+Math.round(e/60)+" minutes ago)"):e>1?this.verb("left the room (logged on "+Math.round(e)+" seconds ago)"):this.verb("left the room")),this.sync(!0)},e.prototype.echo=function(e,t){return e.avg&&e.std&&e.n&&(this.__latency=[e.avg,e.std,e.n]),t(this.room.serverTime())},e.prototype.buzz=function(e,t){return this.touch(),this.room.qid===e&&this.room.buzz(this.id,t)?this.rate_limit():void 0},e.prototype.guess=function(e){return this.touch(),this.room.guess(this.id,e),this.gestapo(null!=e?e.text:void 0)},e.prototype.command=function(e,t){var o,n,i=this;return"auth"===e?this._check_moderator_pw?this._check_moderator_pw(null!=(o=t[0])?o.trim():void 0,function(e){var t,o,n;return t=null!=(o=i.room)?null!=(n=o.name)?n.toLowerCase():void 0:void 0,f.call((null!=e?e.jurisdiction:void 0)||[],t)>=0?i._apotheify(e.name):i.notify("is not authorized for this room")}):this.notify("privilege escalation not implemented"):"ragequit"===e||"qq"===e||"corgi"===e||"super"===e||"quit"===e||"dog"===e||"cute"===e?this.emit("redirect","http://i.imgur.com/4Dx75Bq.jpg"):"deauth"===e||"unauth"===e||"resign"===e||"leave"===e||"quit"===e||"nixon"===e?this.cincinnatus():"rename"===e||"name"===e?this.set_name(null!=(n=t[0])?n.trim():void 0):this.notify("no command named `"+e+"` exists")},e.prototype.chat=function(e){var t,o,n,i,r,s,u,l,c,h,d,f,p,m,g;if(h=e.text,n=e.done,i=e.first,c=e.session,this.touch(),"string"==typeof h&&(this.gestapo(h)&&(h="****"),this.authorized(this.room.mute))){if("@$>"===h.substr(0,3)&&n)return p=h.substr(3).trim().split(" "),u=p[0],o=2<=p.length?a.call(p,1):[],this.command(u,o),void 0;if(h=h.slice(0,1e4),this.dystopia&&(h=h.slice(0,100)),r=this.id,"_"===r[0]&&(r="__"+this.name.replace(/\s+/g,"_")),l={text:h,session:c,user:r,first:i,done:n,time:this.room.serverTime()},i){t={};for(s in l)f=l[s],t[s]=f;t.text="(typing)"}if(this.room.serverTime()<this.bubble)return this.emit("chat",l),void 0;if(!n&&"(typing)"!==h){m=this.room.users,g=[];for(r in m)d=m[r],d.prefs.typing&&!d.muwave?g.push(d.emit("chat",l)):i?g.push(d.emit("chat",t)):g.push(void 0);return g}return this.rate_limit(),this.room.emit("chat",l),this.authorized("moderator")&&"(typing)"!==h?this.modlog("chat",h):void 0}},e.prototype.skip=function(){return this.touch(),this.room.attempt||this.room.no_skip?void 0:(this.room.new_question(),this.verb("skipped a question"))},e.prototype.next=function(){return this.touch(),this.room.next()},e.prototype.finish=function(){return this.touch(),this.attempt||this.room.no_skip||this.room.time()>=this.room.end_time||this.room.time_freeze?void 0:(this.verb("skipped to the end of a question"),this.room.finish(),this.room.sync())},e.prototype.preempt=function(){return this.touch()},e.prototype.pause=function(){return this.touch(),this.room.no_pause||this.room.time_freeze?void 0:!this.room.attempt&&this.room.time()<this.room.end_time?(this.rate_limit(),this.verb("paused the game"),this.room.freeze(),this.room.sync()):void 0},e.prototype.unpause=function(){var e;return this.touch(),this.room.time_freeze?(this.room.question?this.room.attempt||(e=Math.round((this.room.offsetTime()-this.room.time_freeze)/1e3),e>2?this.verb("resumed the game (paused for "+e+" seconds}"):this.verb("resumed the game"),this.room.unfreeze()):(this.room.new_question(),this.room.unfreeze()),this.room.sync()):void 0},e.prototype.transfer_account=function(){return this.room.log("QuizPlayer.transfer_account(cookie) not implemented")},e.prototype.accelerate_cleanup=function(){return this.score()<=20?this.room.delete_user(this.id):void 0},e.prototype.rtc_signal=function(e){var t;return null!=(t=this.room.users[e.target])?t.emit("rtc",{message:e,source:this.id}):void 0},e.prototype.set_distribution=function(e){var t,o,n,i,r=this;if(this.touch(),this.authorized()&&e){i=[],n=[];for(t in e)o=e[t],0===this.room.distribution[t]&&o>0&&i.push(t),this.room.distribution[t]>0&&0===o&&n.push(t);return this.room.distribution=e,this.room.sync(4),this.room.get_size(function(e){return i.length>0&&r.verb("enabled "+i.join(", ")+" ("+e+" questions)"),n.length>0?r.verb("disabled "+n.join(", ")+" ("+e+" questions)"):void 0})}},e.prototype.set_difficulty=function(e){var t=this;return this.touch(),this.authorized()?(this.room.difficulty=e,this.room.sync(4),this.room.get_size(function(o){return t.verb("set difficulty to "+(e||"everything")+" ("+o+" questions)"),0===o&&t.room.category?t.set_category(""):void 0})):void 0},e.prototype.set_category=function(e){var t=this;return this.touch(),this.authorized()?(this.room.category=e,e||this.room.reset_distribution(),"custom"===e?this.room.sync(4):this.room.sync(1),this.room.get_size(function(o){return"custom"===e?t.verb("enabled a custom category distribution ("+o+" questions)"):t.verb("set category to "+(e.toLowerCase()||"potpourri")+" ("+o+" questions)")})):void 0},e.prototype.set_max_buzz=function(e){return this.touch(),this.authorized()?(this.room.max_buzz!==e&&(e?1===e?this.verb("restricted players and teams to a single buzz per question"):e>1&&this.verb("restricted players and teams to "+e+" buzzes per question"):this.verb("allowed players to buzz multiple times")),this.room.max_buzz=e,this.room.sync(1)):void 0},e.prototype.set_skip=function(e){return this.touch(),this.authorized()?(this.room.no_skip=!e,this.room.sync(1),this.room.no_skip?this.verb("disabled question skipping"):this.verb("enabled question skipping")):void 0},e.prototype.set_pause=function(e){return this.touch(),this.authorized()?(this.unpause(),e?this.verb("enabled pausing questions"):this.verb("disabled pausing questions"),this.room.no_pause=!e,this.room.sync(1)):void 0},e.prototype.set_bonus=function(e){return this.touch(),this.authorized()?(this.room.show_bonus=!!e,this.room.show_bonus?this.verb("enabled showing bonus questions"):this.verb("disabled showing bonus questions"),this.room.sync(1)):void 0},e.prototype.set_speed=function(e){return this.touch(),!this.authorized()||isNaN(e)||0>=e?void 0:(this.room.set_speed(e),this.room.sync(1))},e.prototype.set_duration=function(e){return this.touch(),!this.authorized("ninja")||isNaN(e)||0>=e?void 0:(this.room.answer_duration=e,this.room.set_speed(this.room.rate),this.room.sync(1))},e.prototype.set_prompt_duration=function(e){return this.touch(),!this.authorized("ninja")||isNaN(e)||0>=e?void 0:(this.room.prompt_duration=e,this.room.sync(1))},e.prototype.set_attempt_duration=function(e){return this.touch(),!this.authorized("ninja")||isNaN(e)||0>=e?void 0:(this.room.attempt_duration=e,this.room.sync(1))},e.prototype.set_scoring=function(e){return this.touch(),this.authorized("ninja")?(this.verb("changed scoring matrix"),this.room.scoring=e,this.room.sync(4)):void 0},e.prototype.set_semi=function(e){return this.touch(),this.authorized("ninja")?(e?this.verb("enabled semi-transparent readouts"):this.verb("disabled semi-transparent readouts"),this.room.semi=!!e,this.room.sync(1)):void 0},e.prototype.set_type=function(e){var t=this;return this.touch(),this.authorized("ninja")?"string"!=typeof e?this.notify("error `"+state+"` is not string"):e?(this.room.type=e,this.room.category="",this.room.difficulty="",this.room.sync(4),this.room.get_size(function(o){return t.verb("changed the question type to "+e+" ("+o+" questions)")})):void 0:void 0},e.prototype.set_escalate=function(e){return this.touch(),this.authorized("ninja")?"number"!=typeof e?this.notify("error `"+e+"` is not number"):(this.room.escalate=e,this.room.sync(2),this.verb("changed minimum escalation permission level to `"+e+"`")):void 0},e.prototype.set_mute=function(e){return this.touch(),this.authorized("ninja")?"number"!=typeof e?this.notify("error `"+e+"` is not number"):(this.room.mute=e,this.room.sync(1)):void 0},e.prototype.set_topic=function(e){return this.touch(),this.authorized("ninja")?"string"!=typeof e?this.notify("error `"+state+"` is not string"):(this.room.topic=e,this.room.sync(4)):void 0},e.prototype.set_dystopia=function(e){return this.touch(),this.authorized("ninja")?(this.room.dystopia=e,this.room.sync(4),this.verb("set dystopia mode to "+e)):void 0},e.prototype.pref=function(e,t){return this.touch(),"string"==typeof e&&"toString"!==e&&"toLocaleString"!==e&&"valueOf"!==e&&"hasOwnProperty"!==e&&"isPrototypeOf"!==e&&"propertyIsEnumerable"!==e&&"constructor"!==e?"_"!==e[0]?(this.prefs[e]=t,this.sync(!0)):void 0:void 0},e.prototype.set_team=function(e){return this.touch(),e?this.verb("switched to team "+e):e!==this.name&&this.verb("is playing as an individual"),this.team=e?e.slice(0,50):e,this.sync(!0)},e.prototype.set_idle=function(e){return this.idle=!!e},e.prototype.set_lock=function(e){return this.lock=!!e,this.touch(),this.sync(!0)},e.prototype.set_name=function(e){var t;return this.touch(),this.moderator?void 0:(e+="",this.gestapo(e),e.trim().length>0?(t=100,this.room.dystopia&&(t=30),this.name=e.trim().slice(0,t).replace(/\u202e|\u2606|\u2605|\u269d/g,""),this.sync(!0)):void 0)},e.prototype.report_question=function(){return this.verb("QuizPlayer::report_question({id, tags}) not implemented")},e.prototype.tag_question=function(){return this.verb("QuizPlayer::tag_question({id, tags}) not implemented")},e.prototype.change_bold=function(){return this.verb("QuizPlayer::change_bold({id, answer}) not implemented")},e.prototype.report_answer=function(){return this.verb("QuizPlayer::report_answer(data) not implemented")},e.prototype.check_public=function(){return this.verb("QuizPlayer::check_public() not implemented")},e.prototype._apotheify=function(e){return this.moderator?void 0:(this.mortal_nomen=this.name,this.set_name(e),this.admin_begin=Date.now(),this.modlog("mod","now a moderator (nee "+this.mortal_nomen+")"),this.verb("is now a moderator of this room"),this.moderator=!0,this.room.sync(2))},e.prototype.cincinnatus=function(){return this.moderator?(this.modlog("mod","no longer a moderator (served for "+((Date.now()-this.admin_begin)/1e3/60).toFixed(1)+" minutes)"),this.verb("is no longer a moderator of this room"),this.moderator=!1,this.admin_name="",this.admin_begin=0,this.mortal_nomen&&this.set_name(this.mortal_nomen),this.room.sync(2)):void 0},e.prototype.serialize=function(){var e,t,o,n;o={},t=["sockets","room","times_buzzed","moderator"];for(e in this)f.call(t,e)<0&&"function"!=(n=typeof this[e])&&"_"!==e[1]&&(o[e]=this[e]);return o},e.prototype.deserialize=function(e){var t,o,n;o=["tribunal","elect","times_buzzed","moderator"];for(t in e)n=e[t],"_"!==t[1]&&f.call(o,t)<0&&(this[t]=n);return this.correct||this.interrupts||this.early||this.guesses?(this.verb("was upgraded to the new scoring system"),this.corrects.normal=this.correct,this.wrongs.normal=this.guesses-this.correct,delete this.correct,this.corrects.early=this.early,this.wrongs.early=0,delete this.early,this.corrects.interrupt=0,this.wrongs.interrupt=this.interrupts,delete this.interrupts,delete this.guesses,this.sync(!0)):void 0},e.prototype.update=function(){return 1},e.prototype.sync=function(e){return null==e&&(e=!1),e&&"_"!==this.id[0]?this.room.emit("sync",this.room.sync(this)):this.emit("sync",this.room.sync(this))},e}(),"undefined"!=typeof exports&&null!==exports&&(exports.QuizPlayer=d);var m,p,y,f=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1};y={category:"$0x40000",difficulty:"segmentation fault",num:"NaN",tournament:"Guru Meditation Cup",question:"This type of event occurs when the queried database returns an invalid question and is frequently indicative of a set of constraints which yields a null set. Certain manifestations of this kind of event lead to significant monetary loss and often result in large public relations campaigns to recover from the damaged brand valuation. This type of event is most common with computer software and hardware, and one way to diagnose this type of event when it happens on the bootstrapping phase of a computer operating system is by looking for the POST information. Kernel varieties of this event which are unrecoverable are referred to as namesake panics in the BSD/Mach hybrid microkernel which powers Mac OS X. The infamous Disk Operating System variety of this type of event is known for its primary color backdrop and continues to plague many of the contemporary descendents of DOS with code names such as Whistler, Longhorn and Chidori. For 10 points, name this event which happened right now.",answer:"error",year:1970,round:"0x080483ba"},p={category:"Mission Accomplished",difficulty:"null",num:"undefined",tournament:"magic smoke",question:"This question has not yet been written.",answer:"failure",year:2003,round:"1"},m=function(){function e(e){null==e&&(e="temporary"),this.name=e,this.type="qb",this.realm=null,this.answer_duration=5e3,this.attempt_duration=8e3,this.prompt_duration=1e4,this.time_offset=0,this.sync_offset=0,this.start_offset=0,this.last_action=0,this.time_spent=0,this.seen=0,this.end_time=0,this.begin_time=0,this.question="",this.value=null,this.answer="",this.info={},this.qid=null,this.timing=[],this.cumulative=[],this.rate=60,this.__timeout={},this.distribution=null,this.freeze(),this.users={},this.difficulty="",this.category="",this.max_buzz=null,this.attempt=null,this.no_skip=!1,this.show_bonus=!1,this.semi=!1,this.no_pause=!1,this.dystopia=0,this.created=this.serverTime(),this.scoring={normal:[10,0],early:[20,-5],interrupt:[10,-5]},this.acl={baseline:100,positive:110,fifty:120,unlocked:200,elected:230,moderator:300,admin:310,ninja:400},this.mute=this.acl.baseline,this.escalate=this.acl.unlocked}return e.prototype.touch=function(){var e,t;return e=this.serverTime(),t=e-this.last_action,18e4>t&&(this.time_spent+=t),this.last_action=e},e.prototype.log=function(e){return this.emit("log",{verb:e})},e.prototype.locked=function(){var e,t,o,n,i,r;if(this.escalate&&this.escalate>this.acl.unlocked)return!0;t=0,o=0,r=this.users;for(e in r)i=r[e],i.active()&&i.active()&&(t++,i.lock&&o++);return n=Math.floor(t/2+1),2>=t?!1:o>=n?!0:!1},e.prototype.admin_online=function(){var e,t,o;o=this.users;for(e in o)if(t=o[e],t.active()&&t.authorized("moderator"))return!0;return!1},e.prototype.active_count=function(){var e,t,o,n;e=0,n=this.users;for(t in n)o=n[t],o.active()&&e++;return e},e.prototype.get_parameters=function(e,t,o){return this.emit("log",{verb:"NOT IMPLEMENTED (async get params)"}),o(["HS","MS"],["Science","Trash"])},e.prototype.count_questions=function(){return this.log("NOT IMPLEMENTED (question counting)")},e.prototype.get_size=function(e,t,o,n){return null==t&&(t=this.type),null==o&&(o=this.difficulty),null==n&&(n=this.category),this.count_questions(t,o,"custom"===n?this.distribution:n,function(t){return e(t)})},e.prototype.get_question=function(e){var t=this;return setTimeout(function(){return"__error_bonus"===t.next_id?e(p):e(y)},10),this.log("NOT IMPLEMENTED (async get question)")},e.prototype.emit=function(){return console.log("room.emit(name, data) not implemented")},e.prototype.reset_distribution=function(){var e,t,o,n=this;return e={},o=function(t){var o,n,i,r,a,s;a={},i=0,n=0,s=0;for(o in e)r=e[o],a[o]=Math.round(r/t),n+=a[o],s+=r,i+=Math.abs(a[o]*t-r);return[a,i/s+n/20]},t=function(){var t,n,i,r,a,s,u,l;a=1/0;for(n in e)s=e[n],a>s&&s>1&&(a=s);return r=a,l=o(r),u=l[0],i=l[1],t=l[2],u},this.get_parameters(this.type,this.difficulty,function(o,i){var r;return r=function(){var o;return o=i.shift(),o?n.count_questions(n.type,n.difficulty,o,function(t){return e[o]=t,r()}):n.distribution=t()},r()})},e.prototype.time=function(){return this.time_freeze?this.time_freeze:this.offsetTime()},e.prototype.offsetTime=function(){return this.serverTime()-this.time_offset},e.prototype.serverTime=function(){return new Date-this.sync_offset},e.prototype.set_time=function(e){return this.time_offset=this.serverTime()-e},e.prototype.freeze=function(){return this.time_freeze=this.time()},e.prototype.unfreeze=function(){return this.time_freeze?(this.set_time(this.time_freeze),this.time_freeze=0):void 0},e.prototype.timeout=function(e,t){return this.clear_timeout(),this.__timeout=setTimeout(t,e)},e.prototype.clear_timeout=function(){return clearTimeout(this.__timeout)},e.prototype.check_timeout=function(){return this.attempt&&this.serverTime()>this.attempt.realTime+this.attempt.duration?(this.clear_timeout(),this.end_buzz(this.attempt.session)):void 0},e.prototype.new_question=function(){var e=this;return this.generating_question=this.serverTime(),this.get_question(function(t){var o,n,i,r,a,s,u,l;t&&t.question&&t.answer||(t=y),delete e.generating_question,e.generated_time=e.serverTime(),e.attempt=null,e.clear_timeout(),e.next_id=t.next||null,e.info={category:t.category,difficulty:t.difficulty,tournament:t.tournament,num:t.num,year:t.year,date:t.date,group:t.group,tags:t.tags,round:t.round},e.value=t.value||null,e.question=t.question.replace(/FTP/g,"For 10 points").replace(/^\[.*?\]/,"").replace(/\n/g," ").replace(/\s+/g," "),e.answer=t.answer.replace(/\<\w\w\>/g,"").replace(/\[\w\w\]/g,""),e.qid=(null!=t?null!=(u=t._id)?u.toString():void 0:void 0)||(null!=t?t.qid:void 0)||(null!=t?t.id:void 0)||"question_id",e.begin_time=e.time()+e.start_offset,r="undefined"!=typeof Ho&&null!==Ho?Ho:require("./lib/syllable").syllables,e.timing=function(){var e,t,o,n;for(o=this.question.split(" "),n=[],e=0,t=o.length;t>e;e++)s=o[e],i=+r(s)||0,s.split(".").length>1&&(i+=s.lenth>2?4:2),s.split(",").length>1&&(i+=2),n.push(1+i);return n}.call(e),e.set_speed(e.rate),o=e.question.indexOf("*")>5,e.seen++,l=e.users;for(n in l)a=l[n],a.times_buzzed=0,a.active()&&(a.seen++,o&&a.earlyseen++),a.history.push(a.score()),a.history=a.history.slice(-60);return e.journal(),e.sync(3)})},e.prototype.set_speed=function(e){var t,o,n,i,r,a,s;if(e)return t=function(e,t){var o,n,i,r,a,s;for(n=0,a=[5].concat(e).slice(0,-1),s=[],i=0,r=a.length;r>i;i++)o=a[i],s.push(n+=Math.round(o*t));return s},a=this.time(),this.cumulative=t(this.timing,this.rate),i=a-this.begin_time,n=this.cumulative[this.cumulative.length-1],o=i/n,s=0,o>1&&(s=i-n,o=1),this.rate=e,this.cumulative=t(this.timing,this.rate),r=this.cumulative[this.cumulative.length-1],this.begin_time=Math.round(a-r*o-s),this.end_time=Math.round(this.begin_time+r+this.answer_duration),isNaN(this.begin_time)&&(this.begin_time=0),isNaN(this.end_time)?this.end_time=0:void 0},e.prototype.finish=function(){return this.emit("finish_question",this.time()),this.set_time(this.end_time)},e.prototype.next=function(){if(!(this.attempt||this.time()<=this.end_time)){if(this.generating_question&&this.serverTime()-this.generating_question>2e3)return delete this.generating_question,void 0;if(!this.generating_question)return this.unfreeze(),this.new_question()}},e.prototype.check_answer=function(){return Math.random()>.8?"prompt":Math.random()>.3},e.prototype.end_buzz=function(e){var t,o,n,i,r,a,s,u,l,c,h,d,f,p,m=this;if((null!=(h=this.attempt)?h.session:void 0)===e){if(l=this.users[null!=(d=this.attempt)?d.user:void 0],!this.attempt||!l)return this.attempt=null,this.sync(),void 0;if(this.attempt.prompt?(this.attempt.done=!0,this.attempt.correct=this.check_answer(this.attempt.text,this.answer,this.question),"prompt"===this.attempt.correct&&(this.attempt.correct=!1),this.sync()):(this.clear_timeout(),this.attempt.done=!0,this.attempt.correct=this.check_answer(this.attempt.text,this.answer,this.question),o=!1,"prompt"===this.attempt.correct&&(o=!0,this.attempt.correct=!1),o===!0&&(this.attempt.correct="prompt",this.sync(),this.attempt.prompt=!0,this.attempt.done=!1,this.attempt.realTime=this.serverTime(),this.attempt.start=this.time(),this.attempt.text=this.attempt.text.trim()+" ",this.attempt.duration=this.prompt_duration,this.timeout(this.attempt.duration,function(){return m.end_buzz(e)}),l.prompts++),this.sync()),this.attempt.done){if(this.unfreeze(),c=this.value,null===c&&(c="normal",this.attempt.interrupt&&(c="interrupt"),this.attempt.early&&(c="early")),c in this.scoring||this.log("Warning: entry `"+c+"` does not exist in the scoring matrix and will not be counted. Please contact info@protobowl.com to resolve this issue."),this.attempt.correct){l.streak++,l.streak_record=Math.max(l.streak,l.streak_record),f=this.users;for(n in f)u=f[n],n!==this.attempt.user&&(u.streak=0);l.negstreak=0,("number"!=typeof l.corrects[c]||isNaN(l.corrects[c]))&&(l.corrects[c]=0),l.corrects[c]++,this.finish()}else{l.streak=0,l.negstreak++,l.negstreak_record=Math.max(l.negstreak,l.negstreak_record),("number"!=typeof l.wrongs[c]||isNaN(l.wrongs[c]))&&(l.wrongs[c]=0),l.wrongs[c]++,t=0,i=0,a={},p=this.users;for(n in p)u=p[n],"_"!==n[0]&&u.active()&&(a[u.team||n]=a[u.team||n]||0,a[u.team||n]+=u.times_buzzed);for(r in a)s=a[r],s>=this.max_buzz&&this.max_buzz&&t++,i++;this.max_buzz&&t>=i&&this.finish()}return this.journal(),this.attempt=null,this.sync(2)}}},e.prototype.buzz=function(e,t){var o,n,i,r,a,s,u,l=this;if(a=0,!(e in this.users))return!1;s=this.users;for(n in s)i=s[n],(i.team||n)===(this.users[e].team||e)&&(a+=i.times_buzzed);if(this.max_buzz&&this.users[e].times_buzzed>=this.max_buzz)t&&t("THE BUZZES ARE TOO DAMN HIGH"),this.attempt||this.emit("log",{user:e,verb:"has already buzzed"});else if(this.max_buzz&&a>=this.max_buzz)t&&t("THE BUZZES ARE TOO DAMN HIGH"),this.emit("log",{user:e,verb:"is in a team which has already buzzed"});else if(!(null!=(u=this.scoring)?u.interrupt:void 0)&&this.time()<=this.end_time-this.answer_duration)this.emit("log",{user:e,verb:"attempted an illegal interrupt"}),t&&t("THE GAME");else{if(!this.attempt&&this.time()<=this.end_time)return t&&t("http://www.whosawesome.com/"),r=Math.random().toString(36).slice(2),o=this.question.replace(/[^ \*]/g,"").indexOf("*"),this.attempt={user:e,realTime:this.serverTime(),start:this.time(),duration:this.attempt_duration,session:r,text:"",early:-1!==o&&this.time()<this.begin_time+this.cumulative[o],interrupt:this.time()<this.end_time-this.answer_duration,done:!1},this.users[e].times_buzzed++,this.freeze(),this.sync(2),this.timeout(this.attempt.duration,function(){return l.end_buzz(r)}),!0;this.attempt?(this.emit("log",{user:e,verb:"lost the buzzer race"}),t&&t("THE GAME")):(this.emit("log",{user:e,verb:"attempted an invalid buzz"}),t&&t("THE GAME"))}return!1},e.prototype.guess=function(e,t){var o;return(null!=(o=this.attempt)?o.user:void 0)===e?(this.attempt.text=t.text.slice(0,200),t.done?this.end_buzz(this.attempt.session):this.sync(-1)):void 0},e.prototype.sync=function(e){var t,o,n,i,r,a,s,u,l,c,h,d,p,m,g,y,b,v,w=this;for(null==e&&(e=0),n={real_time:this.serverTime()},l=["time_offset","time_freeze","attempt"],c=0,p=l.length;p>c;c++)t=l[c],n[t]=this[t];if(o=["cumulative","users","sync_offset","generating_question"],r=["question","answer","timing","info","generated_time"],a=["realm","created","topic","acl","scoring"],u=["sockets","room"],e.id){s={};for(t in e)f.call(u,t)<0&&"function"!=(y=typeof e[t])&&"_"!==t[0]&&(s[t]=e[t]);return s.online_state=e.online(),n.users=[s],n}if(e>=1)for(t in this)"function"!=typeof this[t]&&f.call(o,t)<0&&f.call(r,t)<0&&f.call(a,t)<0&&"_"!==t[0]&&(n[t]=this[t]);if(e>=2&&(n.users=function(){var e,o;o=[];for(i in this.users)if("_"!==i[0]){s={};for(t in this.users[i])f.call(u,t)<0&&"function"!=(e=typeof this.users[i][t])&&"_"!==t[0]&&(s[t]=this.users[i][t]);s.online_state=this.users[i].online(),o.push(s)}return o}.call(this)),e>=3)for(h=0,m=r.length;m>h;h++)t=r[h],n[t]=this[t];if(e>=4){for(d=0,g=a.length;g>d;d++)t=a[d],n[t]=this[t];return this.distribution||this.reset_distribution(),this.get_parameters(this.type,this.difficulty,function(e,t){var o,i,r,a,s,u;if(n.difficulties=e,n.categories=t,w.difficulty&&(s=w.difficulty,f.call(e,s)<0)&&(w.difficulty=""),w.category&&"custom"!==w.category&&(u=w.category,f.call(t,u)<0&&(w.category="")),w.distribution){for(r=0,a=t.length;a>r;r++)o=t[r],w.distribution[o]=w.distribution[o]||0;for(i in w.distribution)f.call(t,i)<0&&delete w.distribution[i];n.distribution=w.distribution}return w.emit("sync",n)}),this.journal()}if(0>e){b=this.users,v=[];for(i in b)s=b[i],s.muwave||v.push(s.emit("sync",n));return v}return this.emit("sync",n)},e.prototype.journal=function(){return 0},e.prototype.delete_user=function(e){return this.users[e]?("_"!==e[0]&&this.emit("delete_user",e),this.users[e]=null,delete this.users[e]):!1},e.prototype.serialize=function(){var e,t,o,n,i,r;o={},t=["users","attempt","generating_question","acl","_id","_ip_ban"];for(e in this)f.call(t,e)<0&&"function"!=(r=typeof this[e])&&"_"!==e[1]&&(o[e]=this[e]);return o.users=function(){var e,t;e=this.users,t=[];for(n in e)i=e[n],t.push(i.serialize());return t}.call(this),o},e}(),"undefined"!=typeof exports&&null!==exports&&(exports.QuizRoom=m);var g=null,b=null,w=null,v=null,k=null,_=null;if(navigator.mozGetUserMedia)k="firefox",_=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10),g=mozRTCPeerConnection,RTCSessionDescription=mozRTCSessionDescription,RTCIceCandidate=mozRTCIceCandidate,b=navigator.mozGetUserMedia.bind(navigator),createIceServer=function(e,t,o){var n=null,i=e.split(":");
if(0===i[0].indexOf("stun"))n={url:e};else if(0===i[0].indexOf("turn"))if(27>_){var r=e.split("?");0===r[1].indexOf("transport=udp")&&(n={url:r[0],credential:o,username:t})}else n={url:e,credential:o,username:t};return n},w=function(e,t){e.mozSrcObject=t,e.play()},v=function(e,t){e.mozSrcObject=t.mozSrcObject,e.play()},MediaStream.prototype.getVideoTracks=function(){return[]},MediaStream.prototype.getAudioTracks=function(){return[]};else if(navigator.webkitGetUserMedia){k="chrome";try{_=parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10)}catch(E){}createIceServer=function(e,t,o){var n=null,i=e.split(":");return 0===i[0].indexOf("stun")?n={url:e}:0===i[0].indexOf("turn")&&(n={url:e,credential:o,username:t}),n},g=webkitRTCPeerConnection,b=navigator.webkitGetUserMedia.bind(navigator),w=function(e,t){"undefined"!=typeof e.srcObject?e.srcObject=t:"undefined"!=typeof e.mozSrcObject?e.mozSrcObject=t:"undefined"!=typeof e.src?e.src=URL.createObjectURL(t):console.log("Error attaching stream to element.")},v=function(e,t){e.src=t.src}}var x,A,D,T,O,S,I,z;S=null,z={},$(".webrtc").change(function(){var e,t;if($(".webrtc")[0].checked)O();else if(S){S.stop();for(t in z)e=z[t],e.close();S=null,z={},go.verb("disabled audio chat")}return S?void 0:go.pref("webrtc",!1)}),(window.mozRTCPeerConnection||window.webkitRTCPeerConnection||window.RTCPeerConnection)&&($(".webrtc")[0].checked=!1,$(".checkrtc").slideDown()),A=function(){var e,t,o,n;o=_o.users,n=[];for(e in o)t=o[e],t.prefs.webrtc&&e!==go.id&&(e in z||D(e),n.push(console.log(e,t)));return n},I=function(e,t){var o,n,i,r,a,s,u,l,c;return s=t.session,o=t.candidate,l=t.type,e in z||x(e),r=z[e],"candidate"===l?(console.log("importing ice can",o),o=new RTCIceCandidate(o),r.addIceCandidate(o)):(n=function(e){return console.log("set remote error",e)},i=function(e){return console.log("reply eerrror",e)},("offer"===(c=s.type)||"answer"===c)&&(u=function(){return console.log("set remote woot")},r.setRemoteDescription(new RTCSessionDescription(s),u,n)),"offer"===s.type&&(a=function(t){return r.setLocalDescription(t),go.rtc_signal({target:e,session:t})},r.createAnswer(a,i)),console.log("rtc signal",s,"from",e))},T=function(){var e,t;e=[{url:"stun:stun.l.google.com:19302"}],"firefox"===k&&22>=_||function(){var o,n,i;for(i=[],o=0,n=e.length;n>o;o++)t=e[o],"turn:"===t.url.substr(0,5)&&i.push(1);return i}().length>=1},x=function(e){var t,o,n;return o={iceServers:[{url:"stun:stun.l.google.com:19302"}]},n={optional:[{DtlsSrtpKeyAgreement:!0}]},t=new g(o,n),t.onicecandidate=function(t){var o;if(t.candidate)return o=t.candidate,console.log("icecan",o),go.rtc_signal({target:e,type:"candidate",candidate:{sdpMLineIndex:o.sdpMLineIndex,candidate:o.candidate}})},t.onaddstream=function(e){var t;return console.log("stream add",e.stream),t=document.createElement("audio"),t.autoplay=!0,document.body.appendChild(t),w(t,e.stream)},t.onremovestream=function(){return console.log("remote removed stream")},t.onsignalingstatechange=function(){return console.log("sig cahnge")},t.oniceconnectionstatechange=function(){return console.log("ice state change")},t.addStream(S),z[e]=t},D=function(e){var t,o,n;return o=x(e),n=function(t){return o.setLocalDescription(t),console.log("sess desc",t),go.rtc_signal({target:e,session:t})},t=function(e){return console.log("error creating offer",e)},o.createOffer(n,t)},O=function(){var e,t,o;o=function(e){return S=e,go.pref("webrtc",!0),go.verb("enabled audio chat"),A()},t=function(e){return console.log(e),Z({verb:"error acquiring audio signal from browser"})};try{return b({audio:!0,video:!1},o,t)}catch(n){return e=n,t(e)}};var j,F,N,M,q,R,L,U,H,B,P,Y,W,G,K,Q,J,V,X,Z,f=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1};j=["lobby","msquizbowl","hsquizbowl","college","science","literature","history","art","philosophy","trash","jeopardy/lobby","scibowl/lobby"],H=function(e,t,o){var n;return null==o&&(o=5e3),n=$("<div>").addClass("alert").hide(),n.append($("<button>",{"data-dismiss":"alert",type:"button"}).html("&times;").addClass("close")),n.append($("<strong>").text(e)),n.append(" "),n.append(t),setTimeout(function(){return n.slideDown()},10),setTimeout(function(){return n.slideUp().queue(function(){return $(this).dequeue(),$(this).remove()})},o),n},F=function(e,t){var o,n;return null==t&&(t="undefined"!=typeof sync&&null!==sync?sync.name:void 0),$(".bundle .ruling").tooltip("destroy"),n=$(".room-"+(t||"").replace(/[^a-z0-9]/g,"")),0===n.length&&(n=$("#history .bundle.active")),o=n.eq(0).find(".annotations"),0===o.length&&(o=$("#history .annotations").eq(0)),e.prependTo(o),e.hasClass("annoying")&&go.prefs.distraction||e.css("display","none").slideDown(),e},N=function(e){return $(".bundle .ruling").tooltip("destroy"),0!==$("#history .bundle.active .sticky").length?e.css("display","none").prependTo($("#history .bundle.active .sticky")):e.css("display","none").prependTo($("#history .sticky:first")),e.slideDown(),e},X=function(e,t){var o,n,i,r,a,s,u,l;return a="undefined"!=typeof _o&&null!==_o?_o.users[e]:void 0,r=$(document.createElement("span")).data("id",e),"__"===e.slice(0,2)?r.text(e.slice(2).replace(/_/g," ")):(i=(null!=a?a.name:void 0)||"[name missing]",s=_o.name,f.call(j,s)>=0&&"undefined"!=typeof qo&&null!==qo&&(i=qo(i)),r.text(i)),n=function(e){return r.prepend("<i class='icon-"+e+" user-prefix'></i>")},"__"===e.slice(0,2)&&(/ninja/.test(e)?n("magic"):n("bullhorn")),(null!=a?a.banned:void 0)&&a.banned>_o.serverTime()&&a.id!==go.id&&n("ban-circle"),(null!=a?a.authorized("moderator"):void 0)&&n("star-empty"),(null!=a?null!=(u=a.prefs)?u.webrtc:void 0:void 0)&&n("microphone"),(null!=a?null!=(l=a.prefs)?l.distraction:void 0:void 0)&&(n("eye-close"),r.attr("title","This user has enabled distraction-free mode.")),(null!=a?a.auth:void 0)&&r.addClass("auth"),(null!=a?a._suffix:void 0)&&(r.append(" "),r.append($('<span style="color: rgb(150, 150, 150)">').text(a._suffix))),o="userhash-"+V(r.attr("class")+r.html()).replace(/[^a-z0-9]/g,""),r.addClass("username user-"+e),t&&$(".user-"+e+":not(."+o+")").replaceWith(function(){return r.clone()}),r},V=function(e){return e.split("").map(function(e){var t;try{return encodeURIComponent(e)}catch(o){return t=o,""}}).join("")},Q=function(e){var t,o,n;return e||($(".tooltip").remove(),$(".banham").each(function(){return Q($(this))})),e&&(o=e.hasClass("full"),n=e.data("uid"),"_"!==n[0]&&ao()&&(e.html(""),_o.users[n]))?(t="",n===go.id?(t="identity",e.append($("<span>",{title:"This post can be used against you",rel:"tooltip"}).addClass("pull-right banhammer").append($("<i>").addClass("icon-legal")))):null===go.check_reprimand(n)&&(t="reprimand"),null===go.check_tribunal(n)&&(t="tribunal"),o||go.authorized("moderator")||""===t&&e.append($("<span>").addClass("pull-right banhammer").append($("<i>").addClass("icon-legal"))),("reprimand"===t||o)&&e.append($("<a>",{href:"#",title:"Reprimand this user",rel:"tooltip","data-id":n}).addClass("label label-info pull-right banhammer reprimand").append($("<i>").addClass("icon-thumbs-down"))),("tribunal"===t||o)&&e.append($("<a>",{href:"#",title:"Initiate ban tribunal for this user",rel:"tooltip","data-id":n}).addClass("label label-warning pull-right banhammer make-tribunal").append($("<i>").addClass("icon-legal"))),o||go.authorized("moderator")?e.append($("<a>",{href:"#",title:"Instantly ban this user for 10 minutes",rel:"tooltip","data-id":n}).addClass("label label-important pull-right banhammer instaban").append($("<i>").addClass("icon-ban-circle"))):void 0):void 0},M=function(e,t){var o;return null==t&&(t=!1),o=$("<span>").addClass("banham banham-"+e).attr("data-uid",e),"boolean"==typeof t&&t===!0&&o.addClass("full"),"string"==typeof t&&t&&o.attr("data-reason",t),Q(o),o},B=function(e){var t,o,n,i,r,a,s,u,l,c,h,d,p,m,g,y,b,v,w,k,_,C,x;return b=e.session,v=e.text,w=e.user,a=e.done,i=e.correct,l=e.interrupt,s=e.early,p=e.prompt,u=""+w+"-"+b+"-"+(p?"prompt":"guess"),$("#"+u).length>0?c=$("#"+u):(c=$("<p>").attr("id",u).addClass("guess"),p?(m=$("<a>").addClass("label prompt label-info").text("Prompt"),c.append(" "),c.append(m)):(h=$("<span>").addClass("label").text("Buzz"),s||(l?h.addClass("label-important"):h.addClass("label-info")),c.append(h)),c.append(" "),c.append(X(w)),c.append(document.createTextNode(" ")),$("<span>").addClass("comment").appendTo(c),y=$("<a>").addClass("label ruling").hide().attr("href","#").attr("title","Click to Report").data("placement","right"),c.append(" "),c.append(y),t=$("#history .bundle:first .annotations"),0===t.length&&(t=$("#history .annotations:first")),c.css("display","none").prependTo(t),c.slideDown()),k=_o.name,f.call(j,k)>=0&&"undefined"!=typeof qo&&null!==qo&&(v=qo(v)),a?""===v?c.find(".comment").html("<em>(blank)</em>"):c.find(".comment").text(v):go.muwave?c.find(".comment").html('<em style="color:gray">(typing...)</em>'):c.find(".comment").text(v),a&&(y=c.find(".ruling").css("display","none"),r="","prompt"===i?(y.addClass("label-info").text("Prompt"),r="prompt"):i?(r="correct",y.addClass("label-success").text("Correct"),(null!=(_=_o.users[w])?_.streak:void 0)>3&&_o.active_count()>2&&c.prepend(M(w)),w===go.id&&(d=go.score(),n=function(){var e,t,o,i,r;return o=go.score(),o===d?(setTimeout(n,100),void 0):(e=1e3,t=Math.round(d/e)*e,0!==t?t>0&&t>d&&o>=t&&(null!=(i=_o.scoring)?null!=(r=i.normal)?r[0]:void 0:void 0)<20?($("body").fireworks(Math.min(60,10*(t/e))),H("Congratulations","You have over "+t+" points! Here's some fireworks.").addClass("alert-success").insertAfter(y.parents(".bundle").find(".annotations"))):void 0:void 0)},n())):(r="wrong",y.addClass("label-warning").text("Wrong"),(((null!=(C=_o.users[w])?C.negstreak:void 0)>3||(null!=(x=_o.users[w])?x.score():void 0)<0)&&_o.active_count()>2||("function"==typeof No?No(v):void 0))&&c.prepend(M(w,"bad language")),w===go.id&&go.id in _o.users&&(d=go.score())),y.fadeIn().css("display","inline"),o=_o.answer,g=_o.qid,y.click(function(){return go.report_answer({guess:v,answer:o,ruling:r,qid:g}),H("Reported Answer","You have successfully told me that my algorithm sucks. Thanks, I'll fix it eventually. ").addClass("alert-success").insertAfter(y.parents(".bundle").find(".annotations")),!1}),"guess"===Tt&&Pt("")),c},L=function(e){var o,n,i,r,a,s,u,l,c,h,d,p,m,g,y,b,v,w,k,_,C,x,E,T,D;c=e.session,m=e.text,v=e.user,i=e.done,g=e.time,c||(c="auto-"+Math.random().toString(36).slice(3)),s=v+"-"+c,$("#"+s).length>0?u=$("#"+s):(u=$("<p>").attr("id",s).addClass("chat annoying"),u.append($("<span>").addClass("author").append(X(v).attr("title",t(g)))),u.append($("<span>").addClass("timecolon").append(" ("+t(g)+"): ")),u.append(document.createTextNode(" ")),$("<span>").addClass("comment").appendTo(u),F(u,null!=(k=_o.users[v])?null!=(_=k.room)?_.name:void 0:void 0)),w=[],b=/\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,r=m.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(^|\s+)(\/[a-z0-9\-]+\/?[a-z0-9\-]*)(\s+|$)/g,function(e,t,o,n){return t+("<a href='"+o+"'>"+o+"</a>")+n}).replace(b,function(e){var t;return t=e,/:\//.test(e)||(t="http://"+e),/\.(jpe?g|gif|png)$/i.test(e)?"<a href='"+t+"' class='show_image' target='_blank'>"+e+"</a> (click to show) 				<div style='display:none;overflow:hidden' class='chat_image'>					<img src='"+t+"' alt='"+e+"'>				</div>":"<a href='"+t+"' target='_blank'>"+e+"</a>"}).replace(/!@([a-z0-9]+)/g,function(e,t){return w.push(t),X(t).wrap("<span>").parent().addClass("recipient").clone().wrap("<div>").parent().html()}),p={},C=_o.users;for(a in C)y=C[a],p[y.team||"individuals"]=1;d=[];for(h in p)r=r.replace(new RegExp("\\*@("+RegExp.quote(h)+")","g"),function(e,t){return d.push(t),$("<span>").text(t).addClass("team-recipient").wrap("<div>").parent().html()});return i?(u.removeClass("buffer"),x=go.team||"individuals",l=f.call(d,x)>=0||(E=go.id,f.call(w,E)>=0)||"_"===go.id[0]||v===go.id,o="@"!==m[0]||l,l&&u.removeClass("annoying"),""!==m&&o?("@"===m.slice(0,1)&&(d.length>0?u.prepend('<i class="icon-group"></i> '):u.prepend('<i class="icon-user"></i> ')),n="function"==typeof No?No(m):void 0,T=_o.name,f.call(j,T)>=0&&"undefined"!=typeof qo&&null!==qo&&(r=qo(r)),u.find(".comment").html(r),v in _o.users&&(n?u.prepend(M(v,"bad language")):m.length>70&&u.prepend(M(v,"spamming")))):(u.find(".comment").html("<em>(no message)</em>"),u.slideUp("normal",function(){return u.remove()}))):$(".livechat")[0].checked&&"(typing)"!==m?(u.removeClass("buffer"),D=_o.name,f.call(j,D)>=0&&"undefined"!=typeof qo&&null!==qo&&(r=qo(r)),u.find(".comment").html(r)):(u.addClass("buffer"),u.find(".comment").text(" is typing...")),u.toggleClass("typing",!i),u.data("last_update",g)},J=function(e){var t,o,n,i;return n=e.time,i=e.trigger,o=e.reason,setTimeout(function(){return $(".bundle .ruling").tooltip("destroy")},100),t=$("<p>").addClass("log"),t.prepend('<i class="icon-thumbs-down"></i> '),"_"!==(null!=i?i[0]:void 0)&&_o.users[i]?(t.append(X(i)),t.append(" has issued you a warning for "),o?t.append(o):t.append("your behavior"),t.append(" ")):(t.append("your behavior has been reprimanded"),o&&(t.append(" for "),t.append(o))),F(t)},q=function(e){var o,n,i,r,a;return a=e.user,i=e.qid,r=e.time,o=e.answer,setTimeout(function(){return $(".bundle .ruling").tooltip("destroy")},100),n=$("<p>").addClass("log"),n.append(X(a).attr("title",t(r))),n.append(" changed the answer line to "),n.append(o.replace(/\{/g,"<strong>").replace(/\}/g,"</strong>")),$(".bundle.qid-"+i+" .annotations").prepend(n.hide()),n.slideDown()},Z=function(e){var o,n,i,r,a,s,u,l;return s=e.user,u=e.verb,a=e.time,i=e.notify,setTimeout(function(){return $(".bundle .ruling").tooltip("destroy")},100),l="verb-"+s+"-"+u.replace(/[^a-z]/gi," ").split(" ").slice(0,2).join("-"),n=$("<p>").addClass("log annoying"),n.addClass(l),s?(s!==go.id||/skip|pause|resume/.test(u)||n.removeClass("annoying"),i&&n.prepend('<i class="icon-user"></i> '),n.append(X(s).attr("title",t(a))),n.append(" "+u.replace(/!@([a-z0-9]+)/g,function(e,t){return X(t).clone().wrap("<div>").parent().html()}))):n.append(u),(/paused the/.test(u)||/skipped/.test(u)||/category/.test(u)||/difficulty/.test(u)||/ban tribunal/.test(u)||"_"===go.id[0])&&n.prepend(M(s,"spamming")),o=$(".bundle.active .verb-"+s+"-left-the"),"joined"===u.split(" ")[0]&&o.length>0?(o.slideUp("normal",function(){return $(this).remove()}),Z({user:s,verb:"reloaded the page",time:a}),void 0):(r=$(".bundle.active ."+l),r.length>0?(n.data("count",r.data("count")+1),n.hide(),n.prepend($('<span style="margin-right:5px">').addClass("badge").text(n.data("count")+"x")),r.slideUp("normal",function(){return $(this).remove()}),F(n)):(n.data("count",1),F(n)))},P=function(e){var t;return t=$("<pre>"),t.append(e),$("#history").prepend(t.hide().slideDown())},K=function(){return F($('<iframe width="420" height="315" src="http://www.youtube.com/embed/6bMLrA_0O5I?rel=0" frameborder="0" allowfullscreen></iframe>'))},W=function(){var e,t;return t=$("<span>").html('<b>Like Protobowl?</b> Consider liking us on <a href="https://www.facebook.com/protobowl">Facebook</a>. '),e=$('<iframe src="https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2Fprotobowl&amp;send=false&amp;layout=button_count&amp;width=450&amp;show_faces=false&amp;font&amp;colorscheme=light&amp;action=like&amp;height=21&amp;appId=111694105666039" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:150px; height:21px;" allowTransparency="true"></iframe>'),$("body").append(e.css("vertical-align","bottom").hide()),setTimeout(function(){return F($("<p>").append(t).append(e.show()))},1e3)},G=function(){var e;return e=Ft()?$("<span>").html('<b>Add Protobowl to Home Screen!</b> Click the "Share" button and select "Add to Home Screen" to install Protobowl as an app.'):$("<span>").html("<b>Try Protobowl for Mobile!</b> Protobowl now has enhanced support for mobile web browsers. Just navigate to https://protobowl.com/ from your Android or iPhone device."),setTimeout(function(){return F($("<p>").append(e))},1e3)},Y=function(){var e;return e=$("<span>").html('<b>Help improve Protobowl!</b> If you see a question which is miscategorized, please suggest a fix with the "Edit" link in the header of any completed question.'),setTimeout(function(){return F($("<p>").append(e))},1e3)},R=function(e){var t,o,n,i,r,a,s,u,l,c,h,d,p,m;return n=e.id,u=e.tribunal,l=u.votes,s=u.time,h=u.witnesses,t=u.against,i=u.initiator,d=go.id,f.call(h,d)<0&&"_"!==go.id[0]||(c=Math.floor((h.length-1)/2+1)-l.length+t.length,r=$("<div>").addClass("alert").addClass("troll-"+n),i&&"_"===i[0]&&(i=""),n===go.id)?void 0:(r.append($("<strong>").append("Is ").append(X(n)).append(" trolling? ")),i?(r.append(X(i)),r.append(" has created a ban tribunal for "),r.append(X(n)),r.append(". ")):(r.append("Protobowl has detected abnormally high rates of activity from "),r.append(X(n)),r.append(". ")),r.append("<br>"),o=$("<button>").addClass("btn btn-small").text("Ban this user"),r.append(o),r.append(" "),a=$("<button>").addClass("btn btn-small").text("Don't ban"),r.append(a),r.append(" <strong> Currently "+l.length+" of "+(h.length-1)+" users have voted</strong> ("+c+" more votes needed)"),o.click(function(){return go.vote_tribunal({user:n,position:"ban"})}),a.click(function(){return go.vote_tribunal({user:n,position:"free"})}),o.add(a).disable((p=go.id,f.call(l,p)>=0||(m=go.id,f.call(t,m)>=0))),$(".troll-"+n).length>0&&$(".troll-"+n).parents(".active").length>0?$(".troll-"+n).replaceWith(r):($(".troll-"+n).slideUp("normal",function(){return $(this).remove()}),N(r)))},U=function(e){var t,o,n,i,r,a,s,u,l,c,h,d,p,m,g,y,b,v,w;if(i=e.id,o=e.elect,s=$("<div>").addClass("alert alert-info").addClass("elect-"+i),o.term){if(p=o.witnesses,r=o.impeach,g=go.id,f.call(p,g)<0&&"_"!==go.id[0])return;if(d=Math.floor((p.length-1)/2+1)-r.length,_o.serverTime()>o.term)return $(".elect-"+i).slideUp("normal",function(){return $(this).remove()}),void 0;i===go.id?(c=function(){var e;return e=Math.round(Math.max(0,go.elect.term-_o.serverTime())/1e3),$(".term-timeout").text(e),e>0?setTimeout(c,1e3):void 0},s.html("You have access to the settings for <b>the next <span class='term-timeout'>60</span> seconds</b>. \n"),c(),n=$("<button>").addClass("btn btn-small").text("Done"),n.click(function(){return go.finish_term()}),s.append(n)):(a=$("<button>").addClass("btn btn-small").text("Impeach"),a.click(function(){return go.vote_election({user:i,position:"impeach"})}),s.append(a.disable((y=go.id,f.call(r,y)>=0))),s.append(" <strong> "+r.length+" of "+(p.length-1)+" users have voted to impeach </strong>"),s.append(X(i).css("font-weight","bold")),s.append(" ("+d+" more votes needed)"))}else{if(h=o.votes,l=o.time,p=o.witnesses,t=o.against,b=go.id,f.call(p,b)<0&&"_"!==go.id[0])return;d=Math.floor(p.length/2+1)-h.length+t.length,i===go.id?s.append(" <strong>"+h.length+" of "+p.length+" users have voted</strong> ("+d+" more votes are needed)"):(s.append($("<strong>").append("Is ").append(X(i)).append(" trustworthy? ")),s.append("Grant control over the room settings if you believe the motives of "),s.append(X(i)),s.append(" are pure. Elected terms are 1 minute. <br>"),m=$("<button>").addClass("btn btn-small").text("Grant access"),s.append(m),s.append(" "),u=$("<button>").addClass("btn btn-small").text("Deny"),s.append(u),s.append(" <strong> "+h.length+" of "+p.length+" users have voted</strong> ("+d+" more votes needed)"),m.click(function(){return go.vote_election({user:i,position:"elect"})}),u.click(function(){return go.vote_election({user:i,position:"deny"})}),m.add(u).disable((v=go.id,f.call(h,v)>=0||(w=go.id,f.call(t,w)>=0))))}return $(".elect-"+i).length>0?$(".elect-"+i).replaceWith(s):F(s)};var et,tt,ot,it,nt,rt,at,st,ut,lt,ht,ct,dt,ft,mt,pt,yt,gt,bt,wt,vt,kt,$t,_t,Ct,Et,xt,At,Dt,f=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1},a=[].slice;$t=function(){var e,t,o,n,i,r,a,s,u,l,c,h;if($(".custom-category").empty(),_o.distribution){i=0,l=_o.distribution;for(e in l)r=l[e],i+=r;for(c=_o.categories,h=[],s=0,u=c.length;u>s;s++)e=c[s],t=$("<div>").addClass("category-item").appendTo(".custom-category").data("value",e),$("<span>").addClass("name").text(e).appendTo(t),n=$("<div>").addClass("btn-group pull-right dist-picker").appendTo(t),$("<button>").addClass("btn btn-small decrease disabled").append($("<i>").addClass("icon-minus")).appendTo(n),$("<button>").addClass("btn btn-small increase disabled").append($("<i>").addClass("icon-plus")).appendTo(n),$("<a>").attr("href","#").addClass("percentage pull-right").appendTo(t),a=$(t).data("value"),o=_o.distribution[a]/i,$(t).find(".percentage").html(""+Math.round(100*o)+"% &nbsp;").attr("title",_o.distribution[a]+" shares"),$(t).find(".increase").removeClass("disabled"),o>0&&i>1?$(t).find(".decrease").removeClass("disabled"):($(t).find(".decrease").addClass("disabled"),$(t).find(".name").css("font-weight","normal")),o>0?h.push($(t).find(".name").css("font-weight","bold")):h.push(void 0);return h}},ct=function(e){var t,o;if(_o.distribution)return t=$(this).parents(".category-item"),o=clone_shallow(_o.distribution),o[e]++,go.set_distribution(o)},lt=function(e){var t,o,n,i,r;if(_o.distribution){n=0,r=_o.distribution;for(t in r)i=r[t],n+=i;return o=clone_shallow(_o.distribution),o[e]>0&&n>1?(o[e]--,go.set_distribution(o)):void 0}},$(".category-item .percentage").live("click",function(e){var t,o,n,i,r,a,s,u,l,c;if(_o.distribution){e.preventDefault(),i=$(this).parents(".category-item"),n=$(i).data("value"),s=0,c=_o.distribution;for(o in c)l=c[o],s+=l;if(t=window.prompt("Enter new percentage value for "+n,Math.round(100*_o.distribution[n]/s)),a=parseInt(t,10)/100,!isNaN(a)&&a>=0&&1>=a){if(r=clone_shallow(_o.distribution),r[n]=Math.round(s*a),a>0){u=s-r[n];for(o in r)l=r[o],o!==n&&(r[o]=Math.round(l/s*u))}return go.set_distribution(r)}return alert("invalid value"+t)}}),$(".dist-picker .increase").live("mousedown",function(){var e;return e=$(this).parents(".category-item"),ct($(e).data("value"))}),$(".dist-picker .decrease").live("mousedown",function(){var e;return e=$(this).parents(".category-item"),lt($(e).data("value"))}),gt=function(){var e,t,o,n,i,r,a,s;for($(".difficulties option").remove(),$(".difficulties")[0].options.add(new Option("Any","")),a=_o.difficulties,o=0,i=a.length;i>o;o++)t=a[o],$(".difficulties")[0].options.add(new Option(t,t));for($(".categories option").remove(),$(".categories")[0].options.add(new Option("Everything","")),$(".categories")[0].options.add(new Option("Custom","custom")),s=_o.categories,n=0,r=s.length;r>n;n++)e=s[n],$(".categories")[0].options.add(new Option(e,e));return $t(),_o.topic?($(".topic .thumbnail").html(_o.topic),$(".topic").slideDown()):$(".topic").slideUp()},vt=function(){var e,t,o;if("custom"===_o.category?($t(),$(".custom-category").slideDown()):$(".custom-category").slideUp(),$(".categories").val(_o.category),$(".difficulties").val(_o.difficulty),$(".multibuzz").prop("checked",!_o.max_buzz),$(".allowskip").prop("checked",!_o.no_skip),$(".allowpause").prop("checked",!_o.no_pause),$(".adhd").prop("checked",!!go.prefs.distraction),$("body").toggleClass("distraction",!!go.prefs.distraction),$("body").toggleClass("noir",!!go.prefs.noir),$(".settings").is(":hidden")&&($(".settings").slideDown(),$(window).resize()),$(".bundle.active").toggleClass("semi",_o.semi),go.id in _o.users&&"prefs"in _o.users[go.id]&&(!$(".timer-widget").data("hidden")!=!go.prefs.timer_hide&&(go.prefs.timer_hide?($(".timer-widget").data("hidden",!0),$(".timer, .progress").slideUp().queue(function(){return $(this).css("opacity","").dequeue(),$(".expand-timer").fadeIn()})):($(".timer-widget").data("hidden",!1),$(".expand-timer").fadeOut(),$(".timer, .progress").slideDown().animate({opacity:.7}).queue(function(){return $(this).css("opacity","").dequeue()}))),$(".livechat").prop("checked",!!go.prefs.typing),$(".sounds").prop("checked",!!go.prefs.sounds),$(".movingwindow").prop("checked",!!go.prefs.movingwindow),$(".dorkmode").prop("checked",!!go.prefs.noir),$(".lock").prop("checked",!!go.lock),$(".teams").val(go.team),$(".microwave").toggle(!go.muwave),go.metrics().guesses>0?$(".reset-score").slideDown():$(".reset-score").slideUp(),go.authorized("moderator")&&!go.authorized("admin")?($(".relinquish-command").slideDown(),$(".set-name").slideUp()):($(".relinquish-command").slideUp(),$(".set-name").slideDown()),e=function(){var e;e=[];for(t in _o.users)e.push(1);return e}().length,e>1?$(".set-team").slideDown():$(".set-team").slideUp()),go.id&&"_"===go.id[0]&&($("a.brand").prop("href","/stalkermode"),$("div.navbar-inner").css("background","rgb(224, 235, 225)"),$(".motto").text("omg did you know im a ninja?")),_o.attempt&&B(_o.attempt),o=Math.round(12e3/_o.rate),(!$(".speed").data("last_update")||new Date-$(".speed").data("last_update")>1337)&&Math.abs($(".speed").val()-o)>1&&$(".speed").val(o),_o.attempt&&_o.attempt.user===go.id){if(_o.attempt.prompt){if("prompt"!==Tt)return Pt("prompt"),$(".prompt_input").val(_o.attempt.text).focus()}else if("guess"!==Tt)return Pt("guess")}else if("guess"===Tt||"prompt"===Tt)return Pt("")},dt=0,bt=function(){var e,t,o;if(!((!_o.time_freeze||_o.attempt)&&_o.time()<_o.end_time&&(requestAnimationFrame(bt),new Date-dt<50)))return dt=+new Date,_o.question?(0!==$(".start-page").length&&$(".start-page").slideUp("normal",function(){return $(this).remove()}),e=$("#history .bundle:first").data("info"),((null!=e?e.generated_time:void 0)!==("undefined"!=typeof _o&&null!==_o?_o.generated_time:void 0)||("undefined"!=typeof _o&&null!==_o?_o.question:void 0)!==(null!=e?e.question:void 0))&&(tt(),lo(_o.qid,function(e){return ji(e)}))):0===$(".start-page").length&&(t=$("<div>").addClass("start-page").hide().prependTo("#history"),o=$("<div>").addClass("well").appendTo(t),$("<button>").addClass("btn btn-success btn-large").text("Start the Question").appendTo(o).click(function(){return go.next()}),t.slideDown()),xt(),wt()},wt=function(){var e,t,o,n,i,r,a,s,u,l,c,h,d,f;return _o.end_time&&_o.begin_time?$(".timer").removeClass("disabled"):$(".timer").addClass("disabled"),d=Math.max(_o.begin_time,_o.time()),ao()||("undefined"!=typeof xo&&null!==xo?xo.hide_disconnect:void 0)?$(".offline-badge").capQueue().fadeOut():$(".offline-badge").capQueue().fadeIn(),$(".chatbtn").disable(!go.authorized(_o.mute)),_o.time_freeze?($(".buzzbtn").disable(!0),_o.attempt?($(".label.pause").hide(),$(".label.buzz").capQueue().fadeIn()):($(".label.pause").capQueue().fadeIn(),$(".label.buzz").hide(),$(".pausebtn").hasClass("btn-warning")&&($(".pausebtn .resume").show(),$(".pausebtn .pause").hide(),$(".pausebtn").addClass("btn-success").removeClass("btn-warning")))):($(".label.pause").capQueue().fadeOut(),$(".label.buzz").capQueue().fadeOut(),$(".pausebtn").hasClass("btn-success")&&($(".pausebtn .resume").hide(),$(".pausebtn .pause").show(),$(".pausebtn").addClass("btn-warning").removeClass("btn-success"))),d>=_o.end_time&&!_o.time_freeze?$(".label.finished").capQueue().fadeIn():$(".label.finished").capQueue().fadeOut(),d>=_o.end_time?($(".nextbtn").show(),$(".skipbtn").hide()):($(".nextbtn").hide(),$(".skipbtn").show()),$(".timer").toggleClass("buzz",!!_o.attempt),$(".primary-bar").toggleClass("bar-warning",!(!_o.time_freeze||_o.attempt)),$(".primary-bar").toggleClass("bar-danger",!!_o.attempt),$(".progress").toggleClass("active",!!_o.attempt),_o.attempt?(o=_o.serverTime()-_o.attempt.realTime,a=_o.attempt.duration-o,u=o/_o.attempt.duration,$(".pausebtn, .buzzbtn, .skipbtn, .nextbtn").disable(!0)):(a=_o.end_time-d,o=d-_o.begin_time,u=o/(_o.end_time-_o.begin_time),$(".skipbtn, .nextbtn").disable(!1),$(".pausebtn").disable(0>a||_o.no_pause),_o.time_freeze||(!(null!=(f=_o.scoring)?f.interrupt:void 0)&&d<_o.end_time-_o.answer_duration?$(".buzzbtn").disable(!0):$(".buzzbtn").disable(0>a||100>o)),0>a&&($(".bundle.active").addClass("revealed"),At(),l=$(".bundle.active").find(".ruling"),l.data("shown_tooltip")||(l.data("shown_tooltip",!0),t=$(".bundle.active").find(".ruling").first().tooltip({trigger:"manual"}),t.tooltip("show")))),_o.no_skip&&$(".skipbtn").disable(!0),$(".timer-widget").data("hidden")?void 0:(_o.attempt||_o.time_freeze?($(".progress .primary-bar").width(100*u+"%"),$(".progress .aux-bar").width("0%"),$(".mobile-timer").addClass("time-freeze"),$(".mobile-timer").css("transform","translate3d("+Math.round(-100*(1-u))+"%,0,0)")):(i=100*(1-_o.answer_duration/(_o.end_time-_o.begin_time)),$(".progress .primary-bar").width(Math.min(100*u,i)+"%"),$(".progress .aux-bar").width(Math.min(100-i,Math.max(0,100*u-i))+"%"),$(".mobile-timer").removeClass("time-freeze"),100*u>i&&1>u?(n=Math.min(1,Math.max(0,(u-i/100)/(1-i/100))),$(".mobile-timer").css("transform","translate3d("+Math.round(-100*(1-n))+"%,0,0)")):$(".mobile-timer").css("transform","translate3d(-100%, 0, 0)")),a=Math.max(0,a),h="",0>a&&(h="+"),c=Math.abs(a)/1e3,isNaN(c)?($(".timer .face").text("00:00"),$(".timer .fraction").text(".0")):(e=(c%1).toFixed(1).slice(1),$(".timer .fraction").text(e),r=c/60,s=function(e){var t;for(t=Math.floor(e).toString();t.length<2;)t="0"+t;return t},$(".timer .face").text(h+s(r)+":"+s(c%60))))},ht=function(e){var t,o;return e?(o=0,o=e.members?oo(function(){var o,n,i,r;for(i=e.members,r=[],o=0,n=i.length;n>o;o++)t=i[o],r.push(ht(t));return r}()):go.prefs.movingwindow?e.score()-[0].concat(e.history).slice(-go.prefs.movingwindow)[0]:e.score(),1335===o?1337:o):0},_t=function(){var e,t,o,n,i,r;o=0,t=0,r=_o.users;for(e in r)i=r[e],i.active()&&i.active()&&(t++,i.lock&&o++);return n=Math.floor(t/2+1),2>=t||_o.escalate>=_o.acl.moderator?$(".lockvote").slideUp():($(".lockvote").slideDown(),n>o?$(".lockvote .electorate").text(""+(n-o)+" needed"):$(".lockvote .electorate").text(""+o+"/"+t+" votes")),$(".lockvote .status_icon").removeClass("icon-lock icon-unlock icon-flag"),$(".request-access button").disable(!!go.elect),$(".globalsettings").toggleClass("escalate",!(_o.escalate>_o.acl.unlocked)),go.authorized()?(_o.locked()?$(".lockvote .status_icon").addClass("icon-flag"):$(".lockvote .status_icon").addClass("icon-unlock"),$(".globalsettings").removeClass("locked"),$(".globalsettings .checkbox, .globalsettings .expando").find("select, input").disable(!1)):($(".lockvote .status_icon").addClass("icon-lock"),$(".globalsettings").addClass("locked"),$(".globalsettings .checkbox, .globalsettings .expando").find("select, input").disable(!0))},kt=function(){var e,t,o,n,i,r,a,s,u,l,c,h,d,p,m,g,y,b,v,w,k,_,C,x,E,T,D,A,z,S,O,F,j,q,M,N,I,B,P,L,H,Y,W,K,G,Q,J,V;if(_o.users){z={},A="",v={},H=_o.users;for(c in H)O=H[c],w=(O.name||"").replace(/[^\w]/g,""),v[w]||(v[w]=[]),v[w].push(c);for(b in v)if(h=v[b],h.length>1)for(x=h.sort(function(e,t){return _o.users[e].last_session-_o.users[t].last_session}),k=q=0,Y=x.length;Y>=0?Y>q:q>Y;k=Y>=0?++q:--q)_o.users[x[k]]._suffix="#"+(k+1);else delete _o.users[h[0]]._suffix;W=_o.users;for(c in W)O=W[c],O.team&&("t-"+O.team in z||(z["t-"+O.team]=[]),z["t-"+O.team].push(O.id),A+=O.team+O.id),X(O.id,!0),O.tribunal?R(O):($(".troll-"+O.id).slideUp("normal",function(){return $(this).remove()}),O.elect?U(O):$(".elect-"+O.id).slideUp("normal",function(){return $(this).remove()}));if(_t(),$(".teams").data("teamhash")!==A){$(".teams").data("teamhash",A),$(".teams").empty(),$(".teams")[0].options.add(new Option("Individual",""));for(T in z)g=z[T],T=T.slice(2),$(".teams")[0].options.add(new Option(""+T+" ("+g.length+")",T));$(".teams")[0].options.add(new Option("Create Team","__create")),go.id in _o.users&&$(".teams").val(_o.users[go.id].team)}if(d=$(".leaderboard tbody"),u=function(e){var t;return t=e.created||e.members[0].created,ht(e)+(_o.serverTime()-t)/1e15},s=function(){var e,t;e=_o.users,t=[];for(c in e)O=e[c],t.push(O);return t}(),F=s.length,D=0,$(".teams").val()||"__"===go.id.slice(0,2)){s=function(){var e;e=[];for(T in z)g=z[T],T=T.slice(2),o={room:_o},D++,o.members=function(){var e,t,o;
for(o=[],e=0,t=g.length;t>e;e++)m=g[e],o.push(_o.users[m]);return o}(),o.metrics=function(){var e,t,n,i,r,a,s,u,l,c;for(e={},l=o.members,r=0,s=l.length;s>r;r++)for(n=l[r],c=n.metrics(),i=a=0,u=c.length;u>a;i=++a)t=c[i],e[t]||(e[t]=0),e[t]+=i;return e},o.name=T,o.id="team-"+escape(T).toLowerCase().replace(/[^a-z0-9]/g,""),e.push(o);return e}(),K=_o.users;for(c in K)O=K[c],O.team||s.push(O)}for(s=s.sort(function(e,t){return u(t)-u(e)}),_=1,p=null,j=M=0,B=s.length;B>M;j=++M)O=s[j],s[j-1]&&ht(O)<ht(s[j-1])&&_++,O.rank=_,O.position=j,!p&&(G=_o.users[go.id],f.call(O.members||[O],G)>=0)&&(p=O);for(d.find(".refreshed").removeClass("refreshed"),r=function(e,t){var o,n,i,a,s,l,c,h,p,g,y,v,w;if(null==t&&(t=!1),e){if(i=$(".row-"+e.id),s=i.length>0?i.first().empty():$("<tr>").addClass("row-"+e.id),s.addClass("refreshed").data("entity",e).appendTo(d).click(function(){return 1}),n=$("<span>").addClass("badge pull-right").text(ht(e)),g=_o.users[go.id],f.call(e.members||[e],g)>=0)n.addClass("badge-info").prop("title","You");else{for(a=0,o=0,y=e.members||[e],l=0,h=y.length;h>l;l++)m=y[l],m.online()&&(m.active()?o++:a++);o>0?n.addClass("badge-success").prop("title","Online"):a>0&&n.addClass("badge-warning").prop("title","Idle")}if(t?(s.addClass("subordinate"),$("<td>").addClass("rank").appendTo(s)):$("<td>").addClass("rank").append(e.rank).appendTo(s),$("<td>").addClass("score").append(n).appendTo(s),b=$("<td>").appendTo(s),$("<td>").addClass("negs").text(e.metrics().interrupts).appendTo(s),e.members){for(b.append($("<span>").text(e.name).css("font-weight","bold")).append(" ("+e.members.length+")"),v=e.members.sort(function(e,t){return u(t)-u(e)}),w=[],c=0,p=v.length;p>c;c++)e=v[c],w.push(r(e,!0));return w}return b.append($("<span>").append(X(e.id)))}},t=3,e=2,a=null,C=0,S=t+2*e,l=N=0;t>=0?t>N:N>t;l=t>=0?++N:--N)l<s.length&&(r(s[l]),C++);if(s.length>t&&(a=$("<tr>").addClass("ellipsis refreshed").appendTo(d)),p&&p.position>=t+2*e&&!go.prefs.leaderboard)for(n=Math.min(s.length,p.position+e)-(p.position-e),l=I=Q=p.position-e,J=p.position+e;J>=Q?J>I:I>J;l=J>=Q?++I:--I)l>=0&&l<s.length&&(r(s[l]),C++);else{for(l=P=t;S>=t?S>P:P>S;l=S>=t?++P:--P)l>=0&&l<s.length&&(r(s[l]),C++);if(go.prefs.leaderboard)for(l=L=S,V=s.length;V>=S?V>L:L>V;l=V>=S?++L:--L)r(s[l])}return d.find("tr:not(.refreshed)").remove(),a&&(E="(<b>"+(s.length-C)+"</b> hidden)",go.prefs.leaderboard&&(E="(hide <b>"+(s.length-C)+"</b>)"),y=$("<span>").css("position","relative").html(" <span class='badge badge-success'>"+_o.active_count()+"</span> active <span class='badge'>"+F+"</span> users"),i=$("<td colspan=4>").appendTo(a).append($("<span>").html(E)).append(" ").append(y)),F>1&&(ao()||("undefined"!=typeof xo&&null!==xo?xo.hide_disconnect:void 0))?$(".leaderboard").is(":hidden")&&($(".leaderboard").slideDown(),$(".singleuser").slideUp()):_o.users[go.id]&&($(".singleuser .stats").empty().append(nt(_o.users[go.id],!!$(".singleuser").data("full"))),$(".singleuser").is(":hidden")&&($(".leaderboard").slideUp(),$(".singleuser").slideDown())),ot()}},ft=0,ot=function(){var e,t,o,n;if(ao()&&!Eo&&!go.muwave){e=0,n=_o.users;for(t in n)o=n[t],o.online()&&_o.serverTime()-o.last_action<6e5&&e++;if(1===e){if(Date.now()-ft<6e4)return;return ft=Date.now(),go.check_public("",function(e){var t,o,n,i,r;r=[];for(t in e)n=e[t],n>0&&t!==_o.name&&r.push(t);return r.sort(function(t,o){return e[o]-e[t]}),r.length>0?(i=function(){var n,i,a;for(a=[],n=0,i=r.length;i>n;n++)t=r[n],o=t.replace(/\/lobby$/g,""),a.push(o.link("/"+t)+("&nbsp;("+e[t]+") "));return a}(),$(".foreveralone .roomlist").html(i.join(" or ")),$(".foreveralone").slideDown()):$(".foreveralone").slideUp()})}return $(".foreveralone").slideUp()}},nt=function(e,t){return e.members?rt(e,t):at(e,t)},at=function(t,o){var n,i,r,s,u,l,c;return l=$("<div>").addClass("pseudotable"),u=function(e,t){return $("<div>").addClass("pseudorow").appendTo(l).append($("<span>").addClass("left").text(e)).append($("<span>").addClass("right").append(t))},n=function(){var e;return e=1<=arguments.length?a.call(arguments,0):[],u.apply(null,e).addClass("full").toggle(o)},s=function(e,t){return" <span class='mini-stat' title='"+e+"'> / "+t+"</span>"},r=t.metrics(),u("Score",$("<span>").addClass("badge").text(ht(t))),u("Correct",r.correct+s("Current Streak",t.streak)+s("Streak Record",t.streak_record)),("undefined"!=typeof _o&&null!==_o?null!=(c=_o.scoring)?c.interrupt:void 0:void 0)?(u("Interrupts",r.interrupts+s("Current Streak",t.negstreak)+s("Streak Record",t.negstreak_record)),n("Early",r.early+s("Powermarked Seen",t.earlyseen))):u("Incorrect",r.wrong+s("Current Streak",t.negstreak)+s("Streak Record",t.negstreak_record)),u("Seen",t.seen+s("Guesses",r.guesses)),t.team&&u("Team",t.team),t.admin_name&&u("Auth",t.admin_name),n("ID",t.id.slice(0,10)),n("Last Seen","<span style='font-size:x-small'>"+e(t.last_action)+"</span>"),o&&t.id!==go.id&&go.authorized("moderator")&&(i=$("<span>"),i.append(M(t.id,!0)),u("Admin",i)),l},rt=function(e,t){var o,n,i;return n=$("<div>").addClass("pseudotable"),o=function(e,t){return $("<div>").addClass("pseudorow").appendTo(n).append($("<span>").addClass("left").text(e)).append($("<span>").addClass("right").append(t))},o("Score",$("<span>").addClass("badge").text(ht(e))),o("Correct",oo(function(){var t,o,n,r;for(n=e.members,r=[],t=0,o=n.length;o>t;t++)i=n[t],r.push(i.metrics().correct);return r}())),_o.interrupts&&(o("Interrupts",oo(function(){var t,o,n,r;for(n=e.members,r=[],t=0,o=n.length;o>t;t++)i=n[t],r.push(i.metrics().interrupts);return r}())),t&&o("Early",oo(function(){var t,o,n,r;for(n=e.members,r=[],t=0,o=n.length;o>t;t++)i=n[t],r.push(i.metrics().early);return r}()))),o("Guesses",oo(function(){var t,o,n,r;for(n=e.members,r=[],t=0,o=n.length;o>t;t++)i=n[t],r.push(i.metrics().guesses);return r}())),o("Members",e.members.length),n},it=function(){return st(jQuery.extend(jQuery.extend(!0,{},_o.info),{qid:_o.qid,question:_o.question,generated_time:_o.generated_time,answer:_o.answer}))},tt=function(){var e,t,o,n,i,r,a;if(_o.question&&_o.generated_time){if(t=15,Ft()&&(t=3),$(".bundle .ruling").tooltip("destroy"),$("#history .bundle").slice(t).find(".annotations").slideUp("normal",function(){return $(this).remove()}),$("#history .bundle").slice(t).slideUp("normal",function(){return $(this).is(".bookmarked")?($("#bookmarks").prepend($(this).slideDown()),$("#bookmarks .bundle").length?$("#whale").slideDown():void 0):$(this).remove()}),i=$("#history .bundle").first(),$(".bundle").removeClass("active"),i.find(".breadcrumb").click(function(){return 1}),e=it().width($("#history").width()),e.addClass("active"),$("#history").prepend(e.hide()),Et(),$(".chat.typing").each(function(){var t,o;return t=$(this),_o.serverTime()-t.data("last_update")>2e4?(t.removeClass("typing"),void 0):(o=t.clone().insertBefore(t),t.appendTo(e.find(".annotations")),o.slideUp("normal",function(){return $(this).remove()}))}),e.slideDown("normal").queue(function(){return e.width("auto"),$(this).dequeue()}),i.find(".readout").length>0){for(n=i.find(".readout .well>span"),r=0,a=n.length;a>r;r++)o=n[r],$(o).data("text")&&(o.childNodes[0].nodeValue=$(o).data("text"));i.find(".readout .well").append(n.contents()),n.remove(),i.find(".readout")[0].normalize(),i.queue(function(){return i.find(".readout").slideUp("normal"),$(this).dequeue()})}return At()}},ut=function(e){var t,o,n,i,r,a,s,u,l,c,h,d,f,p,m,g,y,b,v,w,k,_,C,x,E,T,D,A,z,S,O,F,j,q,M,N,I,R,B,P,L,U;for(l=$("<div>").addClass("alert alert-block alert-info report-form"),l.append($("<button>",{"data-dismiss":"alert",type:"button"}).html("&times;").addClass("close")),c=$("<form>"),c.addClass("form-horizontal").appendTo(l),v=$("<div>").addClass("control-group").appendTo(c),v.append($("<label>").addClass("control-label").text("Description")),a=$("<div>").addClass("controls").appendTo(v),R=["Wrong category","Incorrectly bolded","Change tags","Broken question"],A=0,F=R.length;F>A;A++)m=R[A],a.append($("<label>").addClass("radio").append($("<input type=radio name=description>").val(m.split(" ")[1].toLowerCase())).append(m));for(C=$("<button>",{type:"submit"}).addClass("btn btn-primary").text("Submit"),c.find(":radio").change(function(){return"category"===c.find(":radio:checked").val()?(s.slideDown(),$(i).trigger("change")):s.slideUp(),"bolded"===c.find(":radio:checked").val()?(t.slideDown(),C.disable(h())):t.slideUp(),"question"===c.find(":radio:checked").val()?(r.slideDown(),C.disable(!1)):r.slideUp(),"tags"===c.find(":radio:checked").val()?(T.slideDown(),C.disable(!1)):T.slideUp()}),T=$("<div>").addClass("control-group").appendTo(c).hide(),T.append($("<label>").addClass("control-label").text("Tags")),E=$("<select>"),T.append($("<div>").addClass("controls").append(E)),x={Science:["Biology","Chemistry","Physics","Math","Geology","Astronomy"],History:["American","Ancient","European","World"],"Fine Arts":["Art","Music","Other"],Literature:["American","European","Language Arts","World"],"Social Science":["Anthropology","Economics","Geography","Psychology"],Trash:["Film","Sports","Games","TV","Music"]},E.append(new Option("None","")),B=x[e.category]||[],z=0,j=B.length;j>z;z++)n=B[z],E.append(new Option(n));for(s=$("<div>").addClass("control-group").appendTo(c),s.append($("<label>").addClass("control-label").text("Category")),r=$("<div>").addClass("control-group").appendTo(c).hide(),r.append($("<label>").addClass("control-label").text("Comment")),y=$("<input type=text>").attr("placeholder","What needs to be fixed"),r.append($("<div>").addClass("controls").append(y)),t=$("<div>").addClass("control-group").appendTo(c).hide(),t.append($("<label>").addClass("control-label").text("Answer")),p=$("<ul>").addClass("nav nav-pills emboldinator"),t.append($("<div>").addClass("controls").append(p)),k=e.answer.replace(/([\{\}\[\]\(\)\-])/g,"`$1`").replace(/\ +/g," ` ").replace(/\ +/g," ").split("`"),u=!1,g=[],S=0,q=k.length;q>S;S++)w=k[S],"{"===w?u=!0:"}"===w?u=!1:w&&g.push([u,w]);for(h=function(){var t;return t=b(),console.log(t),t===e.answer?!0:-1===t.indexOf("{")?!0:!1},b=function(){return p.find("li a").map(function(){var e,t,o;return $(this).hasClass("bold")?(o=$(this).text(),t=o.match(/^\s*/)[0],e=o.match(/\s*$/)[0],""+t+"{"+o.trim()+"}"+e):$(this).text()}).toArray().join("~").replace(/~/g,"").replace(/\s+/g," ").replace(/\}\s*\{/g," ").replace(/\s([\]\)])/g,"$1").replace(/([\[\(])\s/g,"$1")},O=0,M=g.length;M>O;O++)P=g[O],f=P[0],D=P[1],d=$("<a>").toggleClass("bold",f).appendTo($("<li>").appendTo(p)).text(D).attr("href","#"),"["===(L=D.trim())||"]"===L||";"===L||","===L||"("===L||")"===L||'"'===L||""===L||"”"===L||"“"===L||"-"===L?(" "===D&&d.hide(),d.removeClass("bold").addClass("unboldable").click(function(){return!1})):d.click(function(){var e;return $(this).toggleClass("bold"),e=b(),C.disable(h()),!1});for(i=$("<select>"),s.append($("<div>").addClass("controls").append(i)),U=_o.categories,I=0,N=U.length;N>I;I++)n=U[I],i.append(new Option(n));return $(i).change(function(){return C.disable(i.val()===e.category)}),i.val(e.category),$(i).change(),_=$("<div>").addClass("control-group").appendTo(c),o=$("<button>").addClass("btn").text("Cancel").click(function(e){return l.slideUp("normal",function(){return $(this).remove()}),e.stopPropagation(),e.preventDefault()}),$("<div>").addClass("controls").appendTo(_).append(C).append(" ").append(o),$(c).submit(function(){var t;return t=c.find(":radio:checked").val(),"bolded"===t?go.change_bold({id:e.qid,answer:b()}):"tags"===t?""===$(E).val()?go.tag_question({id:e.qid,tags:[]}):go.tag_question({id:e.qid,tags:[$(E).val()]}):("category"===t&&(e.fixed_category=i.val()),e.describe=t,e.type=_o.type,e.comment=y.val(),go.report_question(e)),H("Reported Question","Protobowl has a new answer checking algorithm (finally!), it takes into account which words are bolded in the answer line to determine what to accept, prompt or reject. Please hit Edit and revise the bolding.").addClass("alert-success").insertAfter(l.parent().find(".annotations")),l.slideUp("normal",function(){return $(this).remove()}),!1}),a.find("input:radio")[0].checked=!0,l},st=function(e){var t,o,n,i,r,a,s,u,l,c,h,d,f;if(n=$("<div>").addClass("bundle").addClass("qid-"+e.qid),n.toggleClass("semi",_o.semi),n.data("info",e),o=$("<ul>"),u=$("<a>",{href:"#",rel:"tooltip",title:"Bookmark this question"}).addClass("bookmark").click(function(t){return t.stopPropagation(),t.preventDefault(),t.shiftKey?lo(e.qid,function(t){return Co(e.qid,t.bookmarked+1)}):n.hasClass("bookmarked")?Co(e.qid,0):Co(e.qid,1)}),"function"==typeof no&&no(e.qid),u.addClass("icon-star-empty"),o.append($("<li>").addClass("pull-right").append(u)),i=function(e){var t;return o.find("li:not(.pull-right)").last().append($("<span>").addClass("divider").text("/")),t=$("<li>").text(e).appendTo(o)},e.tournament&&e.date?i(e.date):e.tournament&&e.year?i(e.year+" "+e.tournament):e.year?i(e.year):e.tournament&&i(e.tournament),i(e.difficulty),i(e.category),e.group&&i(e.group).css("font-weight","bold"),e.tags)for(f=e.tags,h=0,d=f.length;d>h;h++)l=f[h],i(l);return o.find("li").last().append($("<span>").addClass("divider hidden-phone hidden-offline edit-button").text("/")),o.append($("<li>").addClass("clickable hidden-phone hidden-offline edit-button").text("Edit").click(function(t){return n.find(".report-form").length>0||ut(e).insertBefore(n.find(".annotations")).hide().slideDown(),t.stopPropagation(),t.preventDefault()})),t=$("<li>").addClass("pull-right answer"),r=$("<li>").addClass("pull-right answer"),a=Ct(e.answer),-1===(e.answer+"").indexOf("{")?(t.text(e.answer).css("font-weight","bold"),r.text(a).css("font-weight","bold")):(t.html(e.answer.replace(/\{/g,'<span class="bold">').replace(/\}/g,"</span>")),r.html(a.replace(/\{/g,'<span class="bold">').replace(/\}/g,"</span>"))),r.data("actual_answer",t),o.append(r),s=$("<div>").addClass("readout"),c=$("<div>").addClass("well").appendTo(s),c.append($("<span>").addClass("unread").text(e.question)),n.append($("<ul>").addClass("breadcrumb").append(o)).append(s).append($("<div>").addClass("sticky")).append($("<div>").addClass("annotations"))},At=function(){return $(".bundle").not(".active").add(".bundle.revealed").find(".answer").not(".done").replaceWith(function(){return $(this).data("actual_answer").addClass("done")})},pt=null,yt=-1,xt=function(){var e,t,o,n,i,r,a;if(_o.question&&_o.timing&&pt){for(n=_o.time()-_o.begin_time,t=Math.max(0,yt),e=t;n>_o.cumulative[e];)e++;if(t>e)for(i=r=e;t>=e?t>r:r>t;i=t>=e?++r:--r)pt[i].className="unread";for(i=a=t;e>=t?e>a:a>e;i=e>=t?++a:--a)pt[i].className="",o=$(pt[i]).data("text"),o&&(pt[i].childNodes[0].nodeValue=o);return yt=e-1}},Dt={},mt={},et=function(){var e,t,o,n,i,r,a;for(o=$("<div>").addClass("well"),t=$("<div>").css("overflow","hidden").css("width",0).css("height",0).appendTo("body").append(o),i=$("<span>").appendTo(o),e=a=33;126>a;e=++a)n=String.fromCharCode(e),i.text(n),r=i.width(),Dt[r]=n,mt[n]=r;return t.remove()},Ct=function(e){var t,o;return mt.x>0||et(),o=function(){var o,n,i;for(i=[],o=0,n=e.length;n>o;o++)t=e[o],t in mt?i.push(Dt[mt[t]]):i.push(t);return i}(),o.join("")},Et=function(){var e,t,o,n,i,r,a,s,u,l,c,h,d,p,m,g,y;if(_o.question&&_o.timing&&(d=_o.question.split(" "),o=_o.question.replace(/[^ \*]/g,"").indexOf("*"),e=$("#history .bundle.active"),l=e.data("starts")||[],c=e.data("stops")||[],u=e.find(".readout .well"),0!==u.length)){for(u.data("spots",l.join(",")),t=u.children(),i=[],r=e.data("finish_point"),a=p=0,g=d.length;g>=0?g>p:p>g;a=g>=0?++p:--p)n=$("<span>").addClass("unread"),-1!==d[a].indexOf("*")?n.append(" <span class='inline-icon'><span class='asterisk'>"+d[a]+"</span><i class='label icon-white icon-asterisk'></i></span> "):(h=d[a],n.data("text",h+" "),_o.semi?n.append(h+" "):n.append(Ct(h)+" ")),f.call(l,a)>=0?(s="label-important",a===d.length-1&&(s="label-info"),-1!==o&&o>a&&(s="label"),n.append(" <span class='inline-icon'><i class='label icon-white icon-bell  "+s+"'></i></span> ")):f.call(c,a)>=0?n.append(" <span class='inline-icon'><i class='label icon-white icon-pause label-warning'></i></span> "):r&&a===r&&n.append(" <span class='inline-icon'><i class='label icon-white icon-forward label-info'></i></span> "),i.push(n);for(a=m=0,y=d.length;y>=0?y>m:m>y;a=y>=0?++m:--m)t.eq(a).html()===i[a].html()?t.eq(a).addClass("unread"):t.eq(a).length>0?t.eq(a).replaceWith(i[a]):u.append(i[a]);return pt=u[0].childNodes,yt=-1,xt()}};var Tt,Ot,St,It,zt,jt,Ft,Nt,Mt,qt,Rt,Lt,Ut,Ht,Bt,Pt,Yt,Wt,f=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1};$("#username").keyup(function(e){var t,o;return 13===e.keyCode&&$(this).blur(),t=$(this).val(),t.length>0?(go.set_name(t),o="username"+(("undefined"!=typeof u&&null!==u?u.email:void 0)||""),localStorage[o]=t):void 0}),$(".generate-name").click(function(){return"undefined"!=typeof Bo&&null!==Bo?($("#username").val(Bo()),$("#username").keyup().focus()):void 0}),jQuery(".bundle .breadcrumb").live("click",function(){var e;return $(this).is(jQuery("#history .bundle .breadcrumb").first())?void 0:(e=$(this).parent().find(".readout"),e.width($("#history").width()).slideToggle("normal",function(){return e.width("auto")}))}),$(".new-room").mouseover(function(){return"undefined"!=typeof Po&&null!==Po?$(".new-room").attr("href",Po()):void 0}),Tt="",Pt=function(e){return e!==Tt&&Tt&&$(".prompt_input, .guess_input, .chat_input").blur(),Tt=e,$(".actionbar").toggle(""===e),$(".chat_form").toggle("chat"===e),$(".guess_form").toggle("guess"===e),$(".prompt_form").toggle("prompt"===e),$(".mobile-actionbar").toggleClass("enabled",""===e),$("body").toggleClass("prompting",""!==e),$(window).resize()},$(window).resize(function(){return go&&Ft()!==go.prefs.mobile?go.pref("mobile",Ft()):void 0}),$(".chatbtn").click(function(){if($(".actionbar button").blur(),go.prefs.distraction){if($(".distraction-notice").length)return;return H("Distraction Free Mode is Enabled","Chat messages and other messages which are not necessarily important have been disabled. Disable this mode from the settings widget in order to send or receive chat messages.").addClass("alert-error distraction-notice").insertAfter(".buttonbar"),void 0}return $(".chat_input").val(""),Mt()}),Mt=function(e){if("@$> "===e)$(".chat_input").val(e);else if(!go.authorized(_o.mute)||go.prefs.distraction)return;return"chat"!==Tt&&(Pt("chat"),$(".chat_input").data("input_session",Math.random().toString(36).slice(3)).data("begin_time",+new Date)),$(".chat_input").keyup().focus()},Bt=[0],Ut=0,Ht=function(){var e,t,o,n,i,r,a;if("localhost"===location.hostname||"_"===go.id[0]||("undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config.development:void 0))return!1;if(!ao())return!1;for(i=7,t=+new Date,o=[],n=!1,r=0,a=Bt.length;a>r;r++)e=Bt[r],5e3>t-e&&o.push(e);return o.length>=i&&(n=!0),Ut>t&&(n=!0),Bt=o.slice(-10),Bt.push(t),n&&(Ut=t+5e3,H("Rate Limited","You been rate limited for doing too many things in the past five seconds. ").addClass("alert-error").insertAfter(".bundle.active .annotations")),n},Yt=function(){return $(".actionbar button").blur(),Ht()?void 0:go.skip()},Nt=function(){return $(".actionbar button").blur(),_o.time()>=_o.end_time&&!_o.attempt?go.next():void 0},$(".skipbtn").click(Yt),$(".nextbtn").click(Nt),$(".buzzbtn").click(function(){var e;return $(".actionbar button").blur(),$(".buzzbtn").prop("disabled")||Ht()?void 0:(Pt("guess"),$(".guess_input").val("").addClass("disabled").focus(),e=+new Date,$(".sounds")[0].checked&&!$(".sounds").data("ding_sound")&&$(".sounds").data("ding_sound",new Audio("/sound/ding.wav")),go.buzz(_o.qid,function(t){if("http://www.whosawesome.com/"===t){if($(".guess_input").removeClass("disabled"),$(".sounds")[0].checked&&$(".sounds").data("ding_sound").play(),window._gaq)return _gaq.push(["_trackEvent","Game","Response Latency","Buzz Accepted",new Date-e])}else if(Pt(""),window._gaq)return _gaq.push(["_trackEvent","Game","Response Latency","Buzz Rejected",new Date-e])}))}),$(".reset-score .btn").click(function(){return go.score()>50?i.confirm("Are you sure you want to reset your score?",function(e){return e?go.reset_score():void 0}):go.reset_score()}),$(".lose-command").click(function(){return go.cincinnatus()}),$(".pausebtn").click(function(){return $(".actionbar button").blur(),Ht()?void 0:_o.time_freeze?go.unpause():go.pause()}),$(".chat_input").keydown(function(e){var t,o;return 47!==(t=e.keyCode)&&111!==t&&191!==t||0!==$(this).val().length||e.shiftKey||e.preventDefault(),27===(o=e.keyCode)?($(".chat_input").val(""),$(".chat_form").submit()):void 0}),$("input").keydown(function(e){return e.stopPropagation(),$(this).hasClass("disabled")?e.preventDefault():void 0});try{$(".chat_input").typeahead({source:function(){return jt(this.query)},matcher:function(e){return"@"===this.query[0]&&0===e.toLowerCase().indexOf(this.query.toLowerCase())}})}catch(Gt){}jt=function(e){var t,o,n,i,r,a,s,u,l,c,h,d,p;a="@"+e.slice(1).split(",").slice(0,-1).join(","),t=function(){var t,o,n,i;for(n=e.slice(1).split(",").slice(0,-1),i=[],t=0,o=n.length;o>t;t++)r=n[t],i.push($.trim(r));return i}(),a.length>1&&(a+=", "),i=["individuals"],c=_o.users;for(o in c)s=c[o],h=s.name,f.call(i,h)<0&&i.push(s.name),s.team&&(d=s.team,f.call(i,d)<0)&&i.push(s.team);for(p=[],u=0,l=i.length;l>u;u++)n=i[u],f.call(t,n)<0&&p.push(""+a+n);return p},St=function(e){var t,o,n,i,r,a,s,u,l;a="@",t=!0,o={},u=_o.users;for(n in u)l=u[n],r=l.name,s=l.team,o[r]="!@"+n+", ",s||(s="individuals"),o[s]="*@"+s+", ";for(;t===!0;){t=!1,e=e.replace(/^[@\s,]*/g,"");for(r in o)if(i=o[r],e.slice(0,r.length)===r){a+=i,e=e.slice(r.length),t=!0;break}}for(r in o)if(i=o[r],e.slice(0,r.length)===r&&e.length>0){a+=i,e=e.slice(r.length);break}return[a.replace(/[\s,]*$/g,""),e]},qt=!1,Rt="",zt="",Lt=function(e){var t,o,n;return t=0,o=Math.random().toString(36).slice(2),n=function(){return++t<=e.length?(L({text:e.slice(0,t),session:o,user:"__protobot",done:t===e.length,time:_o.serverTime()}),setTimeout(n,1e4/(80+50*Math.random()))):void 0},n()},Ot=function(e,t){var o,n,i,r,a,s;return e=e.slice(0,1e3),("lobby"===(s=_o.name)||"b"===s)&&(e=e.slice(0,140)),e.length<15&&/protobot/i.test(e)&&!/you/i.test(e)&&!qt?(qt=!0,Rt=$(".chat_input").data("input_session"),Lt("I'm lonely too. Plz talk to meeeee")):qt&&(i=function(e){return e[Math.floor(e.length*Math.random())]},t&&/stahp|stop|not lonely/i.test(e)?(Lt("Protobot disengaged. Prepare to languish in your solitude."),qt=!1):"undefined"!=typeof omeglebot_replies&&null!==omeglebot_replies&&Rt!==$(".chat_input").data("input_session")&&(e.replace(/[^a-z]/g,"")in omeglebot_replies&&Math.random()>.3?(Lt(i(omeglebot_replies[e.replace(/[^a-z]/g,"")])),Rt=$(".chat_input").data("input_session")):t&&(Math.random()<.1&&_o.active_count()>1?Lt('Looks like some other people exist. Just say "stahp" if you want me to die in a hole, or if you want to stop sounding schizophrenic.'):(a=i(Object.keys(omeglebot_replies)),a=i(omeglebot_replies[a]),Lt(a))))),"@"===e.slice(0,1)&&"@$>"!==e.slice(0,3)&&(r=St(e),"@"===r[0]?e="@"+r[1]:(n=e.trim().slice(0,e.trim().length-r[1].trim().length).trim(),n!=="@"+(go.team||"individuals")&&(zt=n+" "),e=r.join(" "))),o=!1,$(".chat_input").data("cached_session")!==$(".chat_input").data("input_session")&&($(".chat_input").data("cached_session",$(".chat_input").data("input_session")),o=!0),go.chat({text:e,session:$(".chat_input").data("input_session"),first:o,done:t})},$(".chat_input").keyup(function(e){var t;if(13!==e.keyCode)return t=$(".chat_input").val(),$(".livechat")[0].checked&&!go.muwave&&"@"!==t.slice(0,1)?($(".chat_input").data("sent_typing",""),Ot(t,!1)):$(".chat_input").data("sent_typing")!==$(".chat_input").data("input_session")?("@$>"!==t.slice(0,3)&&Ot("(typing)",!1),$(".chat_input").data("sent_typing",$(".chat_input").data("input_session"))):void 0}),$(".chat_input,.prompt_input,.guess_input").focusout(function(){var e;return Ft()?(e=$(this.form),setTimeout(function(){return""!==Tt?e.submit():void 0},10)):void 0}),$(".chat_form").submit(function(e){var t;return Pt(""),Ot($(".chat_input").val(),!0),e.preventDefault(),t=new Date-$(".chat_input").data("begin_time"),window._gaq?_gaq.push(["_trackEvent","Chat","Typing Time","Posted Message",t]):void 0}),$(".guess_input").keyup(function(e){return 13!==e.keyCode?go.guess({text:$(".guess_input").val().slice(0,100),done:!1}):void 0}),$(".guess_form").submit(function(e){return Pt(""),go.guess({text:$(".guess_input").val().slice(0,100),done:!0}),e.preventDefault()}),$(".prompt_input").keyup(function(e){return 13!==e.keyCode?go.guess({text:$(".prompt_input").val().slice(0,140),done:!1}):void 0}),$(".prompt_form").submit(function(e){return Pt(""),go.guess({text:$(".prompt_input").val().slice(0,140),done:!0}),e.preventDefault()}),$(".textbar-submit").click(function(){return $(this).parents("form").submit()}),It=!0,$("body").keyup(function(e){var t;return 83===(t=e.keyCode)?It=!0:void 0}),$("body").keydown(function(e){var t,o,n,i,r,a,s,u,l,c,h,d,f,p;return"chat"===Tt?$(".chat_input").focus():"guess"===Tt?$(".guess_input").focus():(50===e.keyCode&&e.shiftKey&&($(".chatbtn").first().click(),$(".chat_input").focus()),190===e.keyCode&&(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)&&(e.preventDefault(),Mt("@$> ")),$(document.activeElement).is(":input")||e.shiftKey||e.ctrlKey||e.metaKey?void 0:(32===e.keyCode?(e.preventDefault(),1===$(".start-page").length?$(".nextbtn").first().click():$(".buzzbtn").first().click()):83===(t=e.keyCode)?It&&(It=!1,Yt()):78===(o=e.keyCode)||74===o?Nt():72===(s=e.keyCode)?$("#bookmarks .pager .previous a").click():76===(u=e.keyCode)?$("#bookmarks .pager .next a").click():75===(l=e.keyCode)?$(".bundle:not(.active):first .readout").slideToggle():80===(c=e.keyCode)||82===c?$(".pausebtn").click():47===(h=e.keyCode)||111===h||191===h||13===h?(e.preventDefault(),$(".chatbtn").first().click()):87===(d=e.keyCode)||222===d?(e.preventDefault(),$(".chat_input").val(zt||"@"),Mt()):84===(f=e.keyCode)?(e.preventDefault(),$(".chat_input").val("@"+(go.team||"individuals")+" "),Mt()):70===(p=e.keyCode)?go.finish():66===(n=e.keyCode)&&$(".bundle.active .bookmark").click(),("localhost"===location.hostname||"_"===(null!=(i=go.id)?i[0]:void 0)||"dev"in location.query)&&(68===(r=e.keyCode)?(go.buzz(_o.qid),go.guess({text:_o.answer.replace(/(\(|\[).*/,"").replace(/\{|\}/g,""),done:!0})):69===(a=e.keyCode)&&(go.buzz(_o.qid),go.guess({text:"",done:!0}))),("undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config.development:void 0)?console.log(e.keyCode):void 0))}),$(".speed").change(function(){var e;return $(".speed").not(this).val($(this).val()),$(".speed").data("last_update",+new Date),e=12e3/Math.round($(this).val()),+$(".speed").val()>$(".speed").prop("max")-10?go.set_speed(.1):go.set_speed(e)}),$(".categories").change(function(){return go.set_category($(".categories").val())}),$(".difficulties").change(function(){return go.set_difficulty($(".difficulties").val())}),$("#make_button").click(function(){return"__create"===$("#team_input").val()&&($("#team_input").val("Boxxy"),K()),go.set_team($("#team_input").val()),$("#team_modal").data("set_team",!0).modal("hide"),$("#team_input").blur()}),$("#team_modal").on("hidden",function(){return $("#team_modal").data("set_team")?void 0:go.set_team(go.team)}),$("#team_modal").on("shown",function(){return $("#team_input").focus()}),$("#team_modal form").submit(function(e){return e.preventDefault(),$("#make_button").click()}),$(".teams").change(function(){return"__create"===$(".teams").val()?$("#team_modal").modal("show").data("set_team",!1).find("input").val(go.team):go.set_team($(".teams").val())}),$(".multibuzz").change(function(){return go.set_max_buzz($(".multibuzz")[0].checked?null:1)}),$(".allowskip").change(function(){return go.set_skip($(".allowskip")[0].checked)}),$(".allowpause").change(function(){return go.set_pause($(".allowpause")[0].checked)}),$(".showbonus").change(function(){return go.set_bonus($(".showbonus")[0].checked)}),$(".livechat").change(function(){return go.pref("typing",$(".livechat")[0].checked)}),$(".lock").change(function(){return go.set_lock($(".lock")[0].checked)}),$(".adhd").change(function(){return go.prefs.distraction=$(".adhd")[0].checked,go.pref("distraction",go.prefs.distraction),go.prefs.distraction?($("p.annoying").removeClass("annoying").slideUp("normal",function(){return $(this).addClass("annoying")}),$("body").addClass("distraction"),go.prefs.timer_hide?void 0:setTimeout(function(){return $(".timer-widget").addClass("pulse"),setTimeout(function(){return $(".timer-widget").removeClass("pulse")},1500)},500)):($("body").removeClass("distraction"),$("p.annoying").hide().slideDown())}),$(".request-access").click(function(){return go.nominate()}),Wt=!1,$(".dorkmode").change(function(){return $(".dorkmode")[0].checked?(Wt||go.verb("went over to the dark side"),Wt=!0,go.pref("noir",!0)):go.pref("noir",!1)}),$(".movingwindow").change(function(){return $(".movingwindow")[0].checked?go.pref("movingwindow",20):go.pref("movingwindow",!1)}),$(".sounds").change(function(){return go.pref("sounds",$(".sounds")[0].checked),$(".sounds").data("ding_sound",new Audio("/sound/ding.wav"))}),Ft=function(){return window.matchMedia?matchMedia("(max-width: 768px)").matches:!1},Modernizr.touch||Ft()||($(".actionbar button").tooltip(),$(".actionbar button").click(function(){return $(".actionbar button").tooltip("hide")}),$("#history, .settings").tooltip({selector:"[rel=tooltip]",placement:function(){return Ft()?"error":"left"}})),$("body").click(function(e){return $(".bundle .ruling").tooltip("destroy"),0===$(e.target).parents(".leaderboard, .popover").length?($(".leaderboard tbody tr").popover("destroy"),$(".popover").remove()):void 0}),$(".singleuser").click(function(){var e;return e=!$(".singleuser").data("full"),$(".singleuser").data("full",e),$(".singleuser .stats .full").slideToggle(e)}),$(".show_image").live("click",function(e){return e.preventDefault(),$(this).parent().find(".chat_image").slideToggle()}),$(".username").live("click",function(e){var t;t=_o.users[$(this).data("id")],t&&(e.shiftKey||e.ctrlKey||e.metaKey)&&(e.preventDefault(),"chat"===Tt&&"@"===$(".chat_input").val()[0]?-1===$(".chat_input").val().indexOf(t.name)&&$(".chat_input").val($(".chat_input").val().replace("@","@"+t.name+", ")):$(".chat_input").val("@"+t.name+" "),Mt())}),$(".banhammer.make-tribunal").live("click",function(e){return e.preventDefault(),go.trigger_tribunal($(this).data("id"))}),$(".banhammer.instaban").live("click",function(e){return e.preventDefault(),go.ban_user($(this).data("id"))}),$(".banhammer.reprimand").live("click",function(e){return e.preventDefault(),go.reprimand({user:$(this).data("id"),reason:$(this).parents(".banham").data("reason")}),_o.users[$(this).data("id")].__reprimanded=Date.now(),setTimeout(function(){return Q()},15e3)}),$(".timer-widget").click(function(){return go.prefs.timer_hide=!$(".timer-widget").data("hidden"),vt(),go.pref("timer_hide",go.prefs.timer_hide)}),$(".leaderboard tbody tr").live("click",function(e){var t,o,n,i;return $(this).is(".ellipsis")?(go.prefs.leaderboard=!go.prefs.leaderboard,go.pref("leaderboard",go.prefs.leaderboard),kt(),void 0):(n=$(this).data("entity"),e.shiftKey||e.ctrlKey||e.metaKey?(e.preventDefault(),"chat"===Tt&&"@"===$(".chat_input").val()[0]?-1===$(".chat_input").val().indexOf(n.name)&&$(".chat_input").val($(".chat_input").val().replace("@","@"+n.name+", ")):$(".chat_input").val("@"+n.name+" "),Mt(),void 0):(o=null!=(i=$(this).data("popover"))?i.enabled:void 0,t=$(".leaderboard tbody tr").map(function(){var e;return null!=(e=$(this).data("popover"))?e.$tip[0]:void 0}),$(".popover").not(t).fadeOut("fast",function(){return $(this).remove()}),$(".leaderboard tbody tr").popover("destroy"),o?void 0:($(this).popover({placement:Ft()?"bottom":"left",trigger:"manual",title:$("<div>").text(n.name).html(),content:function(){return nt(n,!0)}}),$(this).popover("toggle"))))}),Modernizr.touch?($(".show-keyboard").hide(),$(".show-touch").show()):($(".show-keyboard").show(),$(".show-touch").hide()),$(".navbar").click(function(e){return $(".show-sidebar").is(":visible")?($(".mobile-actionbar").toggleClass("hidden",!$(".sidebar").is(":visible")),$(".sidebar").slideToggle(function(){return $(".sidebar").toggleClass("shown",$(".sidebar").is(":visible")).css("display","")
}),e.preventDefault()):void 0});var Kt,Qt,Jt,Vt,Xt,Zt,eo,to,oo,no,ro,ao,so,uo,lo,ho,co,fo,mo,po,yo,go,bo,wo,vo,ko,$o,_o,Co,Eo,xo,Ao,Do,To,Oo,So,Io,f=[].indexOf||function(e){for(var t=0,o=this.length;o>t;t++)if(t in this&&this[t]===e)return t;return-1},zo={}.hasOwnProperty,jo=function(e,t){function o(){this.constructor=e}for(var n in t)zo.call(t,n)&&(e[n]=t[n]);return o.prototype=t.prototype,e.prototype=new o,e.__super__=t.prototype,e},a=[].slice;!function(){return"anachron"in location.query?window.WebSocket=function(){return 0}:void 0}(),function(){var e,t,o,n;try{o=new Date(protobowl_app_build),$("#version").text(""+(o.getMonth()+1)+"/"+o.getDate()+"/"+o.getFullYear()%100+" "+o.getHours()+":"+(o.getMinutes()/100).toFixed(2).slice(2))}catch(i){}try{return t=new Date(protobowl_app_build),e=new Date(protobowl_html_build),n=Math.abs(t-e)}catch(i){}}(),fo=function(e){var t;return null==e&&(e=function(){}),fo.initialized?e():(fo.initialized=!0,t=(("undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config["static"]:void 0)||"/")+"offline.js",("undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config.cache_breaker:void 0)&&!("undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config.offline:void 0)&&(t+="?"+(new Date(protobowl_html_build)-0)),$.ajax({url:t,cache:!0,dataType:"script",success:e}))},bo=function(){return fo(function(){var e,t,o,n,i,r;if(e="offline",localStorage.hasOwnProperty("room-"+_o.name))try{t=JSON.parse(localStorage["room-"+_o.name]),"temporary"!==t.me_id?(e=t.me_id,_o.deserialize(t)):t=null}catch(a){}if(go.__listeners.joined({id:e,name:"offline user"}),null!=t?t.users:void 0)try{for(r=t.users,n=0,i=r.length;i>n;n++)o=r[n],o.id===e&&go.deserialize(o)}catch(a){}return _o.sync(5),go.verb("joined the room"),"undefined"!=typeof Ei&&null!==Ei?Ei():void 0})},setTimeout(function(){return navigator.onLine?W():void 0},6e5),setTimeout(function(){return navigator.onLine?G():void 0},3e5),setTimeout(function(){return navigator.onLine&&Math.random()<Math.pow(.5,(Date.now()-1419481700175)/6048e5)?Y():void 0},12e5),co=function(){var e;return e=$("<div>").addClass("alert alert-info"),e.append($("<div>").append("A  ",$('<span class="label label-info">').text("server restart")," will happen momentarily. This may result in a message indicating that you have been disconnected from the server. However, don't panic as a new connection will automatically be established shortly afterwards. ")),N($("<div>").addClass("log doom-notice").append(e))},uo=function(){var e,t;return"undefined"!=typeof Ei&&null!==Ei&&Ei(),Eo?void 0:($("#reload, #disconnect, #reconnect").hide(),$("#reconnect").show(),(null!=(t=_o.attempt)?t.user:void 0)!==go.id&&(_o.attempt=null),e=$("<div>").addClass("alert alert-error"),e.append($("<p>").append("You were ",$('<span class="label label-important">').text("disconnected")," from the server for some reason. ",$("<em>").text(new Date))),e.append($("<div>").append("This may be due to a drop in the network 			connectivity or a malfunction in the server. The client will automatically 			attempt to reconnect to the server and in the mean time, the app has automatically transitioned			into <b>offline mode</b>. You can continue playing alone with a limited offline set			of questions without interruption. However, you might want to try <a href=''>reloading</a>.")),N($("<div>").addClass("log disconnect-notice").append(e)),$.getJSON("https://api.github.com/gists/4272390?callback=?",function(e){var t,o,n,i,r,a;return t=e.data,n=e.meta,"Nothing"!==(i=null!=t?null!=(r=t.files)?null!=(a=r["protobowl-status.html"])?a.content:void 0:void 0:void 0)&&null!==i?(o=$("<div>").addClass("emergency-message"),o.append($("<div>").addClass("alert alert-info").html(t.files["protobowl-status.html"].content)),$(".emergency-message").remove(),$("#history").before(o)):void 0}),kt(),wt())},ho=!1,xo=null,Ao=0,so=null,wo=function(){var e,t,o,n,i,r,a,s,u,l,c,h,d,p;if(n=5100,d="undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config.sockets[Ao]:void 0,l=null,r=null,a=d[0],c=d[1],"sock"in location.query&&(a=location.query.sock),u=function(){var e,t,o,n,i,r,a;i=null;try{i=localStorage.protocookie}catch(s){}if(t=location.query.id||jQuery.cookie("protocookie")||i,e=null,("undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config.auth:void 0)&&(e=jQuery.cookie("protoauth")),"ninja"in location.query&&(e=location.query.ninja),!t){o="",t="PB4CL"+function(){var e,t;for(t=[],n=e=0;8>=e;n=++e)t.push(Math.random().toString(36).slice(2,6));return t}().join(""),jQuery.cookie("protocookie",t);try{localStorage.protocookie=t}catch(s){}}try{r=JSON.parse(localStorage.referrers||"[]")||[],document.referrer&&(a=document.referrer,f.call(r,a)<0)&&r.push(document.referrer),localStorage.referrers=JSON.stringify(r)}catch(s){}return xo.emit("join",{cookie:t,auth:e,question_type:_o.type,room_name:_o.name,muwave:"muwave"in location.query,custom_id:location.query.id,agent:"M4/Web",agent_version:""+protobowl_app_build,referrers:r,version:8}),go.pref("mobile",Ft()),$(".disconnect-notice, .doom-notice").slideUp(),$("#reload, #disconnect, #reconnect").hide(),$("#disconnect").show()},h=function(e){var t,o,n;xo&&xo!==e&&xo.disconnect(),xo&&xo.removeAllListeners(),xo=e,xo===l?(Z({verb:"established a connection to the secure server"}),so=c):(so=a,xo.io.opts.secure?Z({verb:"established a connection to the server (secure)"}):Z({verb:"established a connection to the server"})),xo.on("disconnect",function(){return(null!=xo?xo.hide_disconnect:void 0)?void 0:uo()}),n=go.__listeners;for(o in n)t=n[o],xo.on(o,t);return u()},e=function(e){return $("#load_error").remove(),xo?xo===e?u():setTimeout(function(){return xo.connected===!0?(e.disconnect(),e.removeAllListeners()):h(e)},2718):h(e)},t=function(e){return e.socket.transport||console.log("ran out of options sir"),console.log("connect fail",e)},p=0,s=0,o=function(){var e;return s++,s===p?("undefined"!=typeof protobowl_config&&null!==protobowl_config?null!=(e=protobowl_config.sockets)?e.length:void 0:void 0)>Ao+1?(Ao++,wo()):(console.log("errythings failed capn"),bo()):void 0},c)try{return p++,l=io.connect(c,{port:443,"connect timeout":n,"force new connection":!0,secure:!0}),l.on("connect",function(){return e(l)}),l.on("connect_failed",function(){return t(l)}),l.on("error",o)}catch(m){return i=m,o()}else try{return p++,r=io.connect(a||location.hostname,{"connect timeout":n,"force new connection":!0}),r.on("connect",function(){return e(r)}),r.on("connect_failed",function(){return t(r)}),r.on("error",o),console.log(r)}catch(m){return i=m,o()}},Eo=!1,ao=function(){return Eo||null!=xo&&xo.connected},Xt=function(e){function t(){return So=t.__super__.constructor.apply(this,arguments)}return jo(t,e),t.prototype.online=function(){return this.online_state},t.prototype.emit=function(){var e;return e=1<=arguments.length?a.call(arguments,0):[],this.id===go.id?go.emit.apply(go,e):void 0},t}(d),Zt=function(e){function t(e,o){var n,i,r;t.__super__.constructor.call(this,e,o),this.__listeners={},n=["envelop_action","level","score","metrics","online","active","authorized","emit","pref","check_tribunal","check_reprimand"];for(r in this)i=this[r],"function"==typeof i&&(f.call(n,r)<0?this[r]=this.envelop_action(r):this["remote_"+r]=this.envelop_action(r))}return jo(t,e),t.prototype.emit=function(e,t){return"undefined"!=typeof li&&null!==li&&li()?ui(e,t):this.__listeners[e](t)},t.prototype.authorized=function(e){return ao()?t.__super__.authorized.call(this,e):!0},t.prototype.envelop_action=function(e){return function(t,o){var n;return ao()&&!Eo?xo.emit(e,t,o):"undefined"!=typeof li&&null!==li&&li()?hi(e,t,o):null!=(n=_o.users[go.id])?"function"==typeof n[e]?n[e](t,o):void 0:void 0}},t.prototype.pref=function(e,t){return this.prefs[e]=t,this.id===go.id&&(go.prefs[e]=t),this.remote_pref(e,t)},t}(Xt),eo=function(e){function t(e){t.__super__.constructor.call(this,e)}return jo(t,e),t.prototype.emit=function(){var e;return e=1<=arguments.length?a.call(arguments,0):[],go.emit.apply(go,e)},t.prototype.load_questions=function(e){var t=this;return"undefined"!=typeof xi&&null!==xi?xi(e):setTimeout(function(){return t.load_questions(e)},100)},t.prototype.check_answer=function(e,t,o){return checkAnswer(e,t,o)},t.prototype.get_parameters=function(e,t,o){return this.load_questions(function(){return yi(e,t,o)})},t.prototype.count_questions=function(e,t,o,n){return this.load_questions(function(){return ai(e,t,o,n)})},t.prototype.get_question=function(e){var t=this;return this.load_questions(function(){var o;return o="custom"===t.category?t.distribution:t.category,gi(t.type,t.difficulty,o,function(t){return e(t||y)})})},t.prototype.deserialize=function(e){var t,o,n,i;o=["users","attempt","generating_question","acl"],i=[];for(t in e)n=e[t],f.call(o,t)<0&&i.push(this[t]=n);return i},t}(m),_o=new eo(location.pathname.replace(/^\/*/g,"").toLowerCase()||"temporary"),_o.type=2===_o.name.split("/").length?_o.name.split("/")[0]:"qb",go=new Zt(_o,"temporary"),function(){var e;return document.title=""+_o.name+" - Protobowl",$(".room-name").text(_o.name),e={qb:"Quizbowl",jeopardy:"Jeopardy!",scibowl:"Science Bowl"},_o.name.split("/").length>1?$("<span>").addClass("label label-info").text(e[_o.type]||_o.type.toTitleCase()).insertAfter(".logo").after(" "):void 0}(),yo=function(e,t){return go.__listeners[e]=t},yo("echo",function(e,t){return t("alive")}),yo("application_update",function(){return"function"==typeof oi?oi():void 0}),yo("force_application_update",function(){return"function"==typeof oi?oi():void 0}),yo("impending_doom",function(){return co()}),yo("shadowban",function(){return Eo=!0}),yo("redirect",function(e){return _o._redirected=!0,window.location=e}),yo("alert",function(e){return window.alert(e)}),yo("chat",function(e){return L(e)}),yo("log",function(e){return Z(e)}),yo("bold",function(e){return q(e)}),yo("reprimand",function(e){return J(e)}),yo("debug",function(e){return P(e)}),yo("sync",function(e){return To(e)}),yo("rtc",function(e){var t,o;return t=e.message,o=e.source,I(o,t)}),yo("throttle",function(){return H("Throttled","The server is ignoring you for a while because you've been doing too many things too quickly. ").addClass("alert-error").insertAfter(".bundle.active .annotations")}),yo("verify",function(e){return"function"==typeof h?h(e):void 0}),yo("rename_user",function(e){var t,o;return o=e.old_id,t=e.new_id,go.id===o&&(go.id=t,_o.users[go.id]=_o.users[o]),$(".user-"+o).removeClass("user-"+o).addClass("user-"+t),delete _o.users[o]}),yo("delete_user",function(e){return delete _o.users[e],kt()}),yo("joined",function(e){var t;if("undefined"!=typeof s&&null!==s&&s&&go.link(s),ho=!0,$("#slow").slideUp(),$(".disconnect-notice").slideUp(),go.id=e.id,go.ip=e.ip,"function"==typeof r&&r(e.ip),_o.users[go.id]=new Xt(_o,go.id),go.name=e.name,"_"!==go.id[0]&&"temporary"!==go.id){t="username"+(("undefined"!=typeof u&&null!==u?u.email:void 0)||"");try{localStorage[t]?e.existing||setTimeout(function(){return go.name=localStorage[t],go.set_name(go.name),$("#username").val(go.name)},137):localStorage[t]=e.name}catch(o){}}return e.muwave&&e.muwave<=34&&(window.WebSocket||$(".no-websocket").show(),$("#polling").slideDown()),$(".actionbar button").disable(!1),$("#username").val(go.name),$("#username").disable(!1),setTimeout(fo,100)}),Do=[],po=[],mo=-1,To=function(e){var t,o,n,i,r,a,s,u,l,c,h,d,p,m,g,y;o=["real_time","users"],Do.push(+new Date-e.real_time),ro(),"realm"in e&&e.realm&&f.call(e.realm,so)<0&&(null!=(p=e.realm)?p.join(";"):void 0)!==(null!=(m=_o.realm)?m.join(";"):void 0)&&N($("<div>").html("<strong>Warning</strong> You are currently connected to a server which is not registered as this room's proper realm.").addClass("alert"));for(t in e)l=e[t],f.call(o,t)<0&&(_o[t]=l);if(ao()&&("timing"in e||_o.__last_rate!==_o.rate)&&(n=function(e,t){var o,n,i,r,a,s;for(n=0,a=[5].concat(e).slice(0,-1),s=[],i=0,r=a.length;r>i;i++)o=a[i],s.push(n+=Math.round(o*t));return s},_o.cumulative=n(_o.timing,_o.rate),_o.__last_rate=_o.rate),"users"in e)for(u=["id"],g=e.users,h=0,d=g.length;d>h;h++){s=g[h],s.id in _o.users||(_o.users[s.id]=new Xt(_o,s.id));for(t in s)l=s[t],f.call(u,t)<0&&(_o.users[s.id][t]=l);if(s.id===go.id)for(t in s)l=s[t],f.call(u,t)<0&&(go[t]=l)}if($("body").toggleClass("offline",!ao()),"difficulties"in e&&gt(),vt(),bt(),Q(),mo!==_o.time_freeze){for(mo=_o.time_freeze,c=_o.attempt?"starts":"stops",i=_o.time_freeze-_o.begin_time,r=0;i>_o.cumulative[r];)r++;a=$(".bundle.active").data(c)||[],y=r-1,f.call(a,y)<0&&a.push(r-1),$(".bundle.active").data(c,a),Et()}return"users"in e?kt():void 0},yo("finish_question",function(e){var t,o;for(t=e-_o.begin_time,o=0;t>_o.cumulative[o];)o++;return $(".bundle.active").data("finish_point",o-1),Et()}),Kt=function(e){return oo(e)/e.length},oo=function(e){var t,o,n,i;for(o=0,n=0,i=e.length;i>n;n++)t=e[n],o+=t;return o},to=function(e){var t,o;return o=Kt(e),Math.sqrt(Kt(function(){var n,i,r;for(r=[],n=0,i=e.length;i>n;n++)t=e[n],r.push((t-o)*(t-o));return r}()))},Vt=function(e){var t;return t=e.sort(function(e,t){return e-t}),t[Math.floor(t.length/2)]||0},Qt=function(e){var t;return t=e.sort(function(e,t){return e-t}),t[~~(.75*t.length)]-t[~~(.25*t.length)]||0},Jt=function(e){var t,o;return o=e.sort(function(e,t){return e-t}),Vt(function(){var e,n,i;for(i=[],e=0,n=o.length;n>e;e++)t=o[e],i.push(Math.abs(t-mu));return i}())},ro=function(){var e,t,o,n;return Do=Do.slice(-20),n=Kt(Do),e=function(){var e,o,i;for(i=[],e=0,o=Do.length;o>e;e++)t=Do[e],n>=t&&i.push(t);return i}(),o=Kt(e),n=Kt(e),e=function(){var e,o,i;for(i=[],e=0,o=Do.length;o>e;e++)t=Do[e],n>=t&&i.push(t);return i}(),_o.sync_offset=Kt(e),$("#sync_offset").text(_o.sync_offset.toFixed(1)+"±"+to(e).toFixed(1)+" ("+Do.length+")")},$(window).unload(function(){var e;return _o._redirected?delete localStorage["room-"+_o.name]:(e=_o.serialize(),e.me_id=go.id,e.archive_time=Date.now(),localStorage["room-"+_o.name]=JSON.stringify(e))}),vo=Date.now(),Oo=function(){var e,t;if(ao())return e=36e5,_o.serverTime()-go.last_action>e&&Date.now()-vo>e&&(xo.disconnect(),i.dialog("<h4>Disconnected for Inactivity</h4> <p>You have been disconnected from the server for an extended period of inactivity.</p> <p>Simply press <span class='label label-info'>Reconnect</span> if you wish to reestablish a connection to the server to resume from the previous state, or press <span class='label'>Cancel</span> if you would like to continue using protobowl offline.</p> ",[{label:"Cancel"},{label:"Reconnect","class":"btn-primary",callback:function(){return xo.socket.reconnect(),vo=Date.now()}}])),t=+new Date,xo.emit("echo",{},function(e){var o,n;return n=+new Date,o=n-t,po.push(o),Do.push(n-e),xo.emit("echo",{avg:Kt(po.slice(-10)),std:to(po.slice(-10)),n:po.length},function(t){var o,i,r;return r=+new Date,o=r-n,i=t-e,Do.push(r-t),po.push(i),po.push(o),ro(),po.length>0?$("#latency").text(Kt(po).toFixed(1)+"±"+to(po).toFixed(1)+(" ("+po.length+")")):void 0})})},setTimeout(function(){var e;return e=function(){var t;return Oo(),t=3e4,go.muwave&&(t=18e4),setTimeout(e,t)},e()},8e3),$o=[],lo=function(e,t){return $o.push([e,t]),"function"==typeof si?si():void 0},Co=function(e,t){return console.log("setting book",e,t),lo(e,function(o){return o?(o.bookmarked=t,o.modified=Date.now(),Vo.put(o,function(){return no(e),"function"==typeof Fi?Fi():void 0},bi)):console.log("question not found (set bookmark)",e)})},no=function(e){return lo(e,function(t){var o,n;return t?(o=t.bookmarked,n=$(".qid-"+e).toggleClass("bookmarked",!!o).toggleClass("bookmark-2",2===o).toggleClass("bookmark-3",3===o).toggleClass("bookmark-4",o>=4),n.find(".bookmark").toggleClass("icon-star-empty",!o).toggleClass("icon-star",!!o)):void 0})},ko=function(e,t){var o;return null==t&&(t={}),o=document.getElementById("_"+e),o||(o=$("<div>").attr("id","_"+e)),$(o).empty().append(jade[e](t))},function(){var e,t;return null!=document.hidden?(t="hidden",e="visibilitychange"):null!=document.mozHidden?(t="mozHidden",e="mozvisibilitychange"):null!=document.msHidden?(t="msHidden",e="msvisibilitychange"):null!=document.webkitHidden&&(t="webkitHidden",e="webkitvisibilitychange"),t?document.addEventListener(e,function(){return go.muwave?void 0:go.set_idle(document[t])},!1):void 0}(),"onLine"in navigator&&navigator.onLine===!1||"undefined"==typeof io||null===io||("undefined"!=typeof protobowl_config&&null!==protobowl_config?protobowl_config.offline:void 0)||"/bookmarks"===(Io=location.pathname)?bo():(wo(),setTimeout(function(){return ho?void 0:$("#slow").slideDown()},3e3),setTimeout(fo,2e3)),$("#load_error").remove(),$("#disconnect").click(function(e){return xo.disconnect(),e.preventDefault()}),$("#reconnect").click(function(e){return xo.socket.reconnect(),e.preventDefault()});